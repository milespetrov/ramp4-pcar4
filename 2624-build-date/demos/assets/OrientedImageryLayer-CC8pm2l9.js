import{B as t,D as e,N as D,aN as B,cs as G,aZ as $,J as z,aH as Y,v as X,s as Z,aX as Q}from"./main-DR_xwlHl.js";import tt from"./FeatureLayer-BNo76Gjq.js";import{f as et}from"./TemporalLayer-BwHnEmTB.js";import{p as it}from"./TimeExtent-Binb6qYY.js";import{A as q}from"./interfaces-CL2NbQte.js";import"./preload-helper-ExcqyqRp.js";import"./MultiOriginJSONSupport-D21fc87f.js";import"./layerContainerType-C5CzMsLd.js";import"./FeatureLayerBase-DXWQnAAB.js";import"./Field-DhgSwzL_.js";import"./fieldType-wcv3badA.js";import"./HeightModelInfo-CX6EC_ZL.js";import"./commonProperties-zw3Mo9uQ.js";import"./ElevationInfo-DgKTumVR.js";import"./lengthUtils-DiF_VnKj.js";import"./timeZoneUtils-BuN6Qp8C.js";import"./labelingInfo-DmnsXKSZ.js";import"./uuid-Cl5lrJ4c.js";import"./Query-CwLwtfbR.js";import"./SimpleRenderer-CtmUDuGY.js";import"./commonProperties-BKYNV93q.js";import"./colorRamps-DPq8OKeb.js";import"./ColorStop-CqsY8dqo.js";import"./visualVariableUtils-BScBQ5tW.js";import"./UniqueValueRenderer-yNDHjcRp.js";import"./defaultCIMValues-BMJlYWGj.js";import"./enums-CD-fX3vU.js";import"./RendererLegendOptions-DZFDfO_W.js";import"./styleUtils-B4Jm_5aJ.js";import"./RelationshipQuery-D8VektLJ.js";import"./NormalizationBinParametersMixin-BqLnZCUf.js";import"./labelUtils-BehckSwU.js";import"./LayerFloorInfo-7-QHYZaM.js";import"./Relationship-CO7QOJ6v.js";import"./serviceCapabilitiesUtils-DovF0u1p.js";import"./infoFor3D-DhzudQro.js";import"./Layer-Dmbscqbs.js";import"./workers-Bmo_KZTz.js";import"./Queue-DAlTa1PR.js";import"./intl-Xwi3kkZi.js";import"./editsZScale-D1GZvy0W.js";import"./queryZScale-B0tcd8Ye.js";import"./projection-r5Syl_wQ.js";import"./projectBuffer-DHC_Xvkb.js";import"./FeatureSet-Dfe2zuGG.js";import"./APIKeyMixin-ClDEGPYI.js";import"./ArcGISService-DEbcJP7h.js";import"./BlendLayer-D5PT9spN.js";import"./jsonUtils-Dj_Nb5QI.js";import"./parser-6ZDCoyI9.js";import"./mat4f32-DcsiF_Rp.js";import"./mat4-CDE6eeQO.js";import"./common-DQOJ18NT.js";import"./CustomParametersMixin-DTvpsyCM.js";import"./DisplayFilteredLayer-Big59J-j.js";import"./scaleUtils-CqYOq9pM.js";import"./displayFilterUtils-Ca0KSxEd.js";import"./EditBusLayer-DbJLpNsI.js";import"./FeatureEffectLayer-BpkoL53t.js";import"./FeatureEffect-CY9XaP7U.js";import"./FeatureFilter-DcbhkR8-.js";import"./FeatureReductionLayer-DX78Wr1s.js";import"./FeatureReductionSelection-_f6v7dKR.js";import"./jsonUtils-9P2iPj21.js";import"./typeUtils-BgNmI9tV.js";import"./ClassBreaksRenderer-C7PDQDSX.js";import"./LRUCache-BDoXR0mO.js";import"./MemCache-BRhZmtF2.js";import"./Version-Dkw8X6BN.js";import"./FieldsIndex-hzbjCmqd.js";import"./utils-DDFIxlur.js";import"./heatmapUtils-U44k0jYc.js";import"./vec42-CKs01hkn.js";import"./vec4f64-o2zAXfmz.js";import"./MD5-C9MwAd2G.js";import"./OperationalLayer-hVXzUQBo.js";import"./OrderedLayer-C7JwG79U.js";import"./OrderByInfo-D8OOQRsJ.js";import"./PortalLayer-ropORnrR.js";import"./PortalItem-N5xGSJQ8.js";import"./portalItemUtils-DpJz2Kbi.js";import"./RefreshableLayer-C8PdSxm0.js";import"./ScaleRangeLayer-rndurihk.js";import"./TrackableLayer-CE-4iD5q.js";import"./TimeInfo-Bzb6TGbO.js";import"./FeatureTemplate-Ba6rDVzH.js";import"./FeatureType-DBYHiOGN.js";import"./fieldProperties-DpiJh23T.js";import"./TitleCreator-DIZWm21-.js";import"./versionUtils-DPeoiEqU.js";import"./styleUtils-BcIh37mX.js";import"./popupUtils-DD1J7THZ.js";let v=class extends B{set horizontalWKID(o){o?G({wkid:+o})?this._set("horizontalWKID",+o):this._set("horizontalWKID",o):this._set("horizontalWKID",null)}set verticalWKID(o){o?this._set("verticalWKID",isFinite(o)&&G({wkid:+o})?+o:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:o,focalLength:r,principalOffsetPoint:s,radialDistortionCoefficients:u,tangentialDistortionCoefficients:p}=this;return o?.length>1&&!Number.isNaN(r)&&s?.length>1&&u?.length>1&&p?.length>1}};t([e({json:{write:!0}})],v.prototype,"affineTransformations",void 0),t([e({json:{write:!0}})],v.prototype,"focalLength",void 0),t([e({json:{write:!0}})],v.prototype,"principalOffsetPoint",void 0),t([e({json:{write:!0}})],v.prototype,"radialDistortionCoefficients",void 0),t([e({json:{write:!0}})],v.prototype,"tangentialDistortionCoefficients",void 0),t([e({json:{write:!0}})],v.prototype,"horizontalWKID",null),t([e({json:{write:!0}})],v.prototype,"verticalWKID",null),t([e({json:{write:!0}})],v.prototype,"x",void 0),t([e({json:{write:!0}})],v.prototype,"y",void 0),t([e({json:{write:!0}})],v.prototype,"z",void 0),t([e({json:{write:!0}})],v.prototype,"type",void 0),v=t([D("esri.layers.orientedImagery.core.CameraOrientation")],v);const U=v;let f=class extends $.ClonableMixin(z.JSONSupportMixin(U)){constructor(){super(...arguments),this.type=1}toString(){const{type:o,horizontalWKID:r,verticalWKID:s,x:u,y:p,z:c,heading:l,pitch:d,roll:j,affineTransformations:P,focalLength:b,principalOffsetPoint:w,radialDistortionCoefficients:N,tangentialDistortionCoefficients:x}=this,m=[o,r,s,u,p,c,l,d,j];return this.isAdvanced&&(P?.forEach(n=>m.push(n)),m.push(b),w?.forEach(n=>m.push(n)),N?.forEach(n=>m.push(n)),x?.forEach(n=>m.push(n))),m.map(n=>Number.isNaN(n)?"":n).join("|")}};t([e({json:{write:!0}})],f.prototype,"type",void 0),t([e({type:[Number],json:{write:!0}})],f.prototype,"affineTransformations",void 0),t([e({type:Number,json:{write:!0}})],f.prototype,"focalLength",void 0),t([e({type:[Number],json:{write:!0}})],f.prototype,"principalOffsetPoint",void 0),t([e({type:[Number],json:{write:!0}})],f.prototype,"radialDistortionCoefficients",void 0),t([e({type:[Number],json:{write:!0}})],f.prototype,"tangentialDistortionCoefficients",void 0),t([e({type:Number,json:{write:!0}})],f.prototype,"heading",void 0),t([e({type:Number,json:{write:!0}})],f.prototype,"pitch",void 0),t([e({type:Number,json:{write:!0}})],f.prototype,"roll",void 0),t([e({type:Number,json:{write:!0}})],f.prototype,"x",void 0),t([e({type:Number,json:{write:!0}})],f.prototype,"y",void 0),t([e({type:Number,json:{write:!0}})],f.prototype,"z",void 0),f=t([D("esri.layers.orientedImagery.core.CameraOrientationHPR")],f);const ot=f;let I=class extends $.ClonableMixin(z.JSONSupportMixin(U)){constructor(){super(...arguments),this.type=4}toString(){const{type:o,latitude:r,longitude:s,ellipsoidRadius:u,squaredEccentricity:p,properties:c}=this,l=`${c}`.split("|");return l.splice(1,1),`${o}|${r}|${s}|${u}|${p}|${l.join("|")}`}};t([e({json:{write:!0}})],I.prototype,"type",void 0),t([e({json:{write:!0},type:Number})],I.prototype,"latitude",void 0),t([e({json:{write:!0},type:Number})],I.prototype,"longitude",void 0),t([e({json:{write:!0},type:Number})],I.prototype,"ellipsoidRadius",void 0),t([e({json:{write:!0},type:Number})],I.prototype,"squaredEccentricity",void 0),t([e({json:{write:!0}})],I.prototype,"properties",void 0),I=t([D("esri.layers.orientedImagery.core.CameraOrientationLTP")],I);const rt=I;let h=class extends $.ClonableMixin(z.JSONSupportMixin(U)){constructor(){super(...arguments),this.type=2}toString(){const{type:o,horizontalWKID:r,verticalWKID:s,x:u,y:p,z:c,omega:l,phi:d,kappa:j,affineTransformations:P,focalLength:b,principalOffsetPoint:w,radialDistortionCoefficients:N,tangentialDistortionCoefficients:x}=this,m=[o,r,s,u,p,c,l,d,j];return this.isAdvanced&&(P?.forEach(n=>m.push(n)),m.push(b),w?.forEach(n=>m.push(n)),N?.forEach(n=>m.push(n)),x?.forEach(n=>m.push(n))),m.map(n=>isNaN(n)?"":n).join("|")}};t([e({json:{write:!0}})],h.prototype,"type",void 0),t([e({type:[Number],json:{write:!0}})],h.prototype,"affineTransformations",void 0),t([e({type:Number,json:{write:!0}})],h.prototype,"focalLength",void 0),t([e({type:[Number],json:{write:!0}})],h.prototype,"principalOffsetPoint",void 0),t([e({type:[Number],json:{write:!0}})],h.prototype,"radialDistortionCoefficients",void 0),t([e({type:[Number],json:{write:!0}})],h.prototype,"tangentialDistortionCoefficients",void 0),t([e({type:Number,json:{write:!0}})],h.prototype,"omega",void 0),t([e({type:Number,json:{write:!0}})],h.prototype,"phi",void 0),t([e({type:Number,json:{write:!0}})],h.prototype,"kappa",void 0),t([e({type:Number,json:{write:!0}})],h.prototype,"x",void 0),t([e({type:Number,json:{write:!0}})],h.prototype,"y",void 0),t([e({type:Number,json:{write:!0}})],h.prototype,"z",void 0),h=t([D("esri.layers.orientedImagery.core.CameraOrientationOPK")],h);const nt=h;let g=class extends $.ClonableMixin(z.JSONSupportMixin(U)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:o,focalLength:r,principalOffsetPoint:s,radialDistortionCoefficients:u,tangentialDistortionCoefficients:p}=this;return o?.length>1||!Number.isNaN(r)||s?.length>1||u?.length>1||p?.length>1}toString(){const{type:o,horizontalWKID:r,verticalWKID:s,x:u,y:p,z:c,yaw:l,pitch:d,roll:j,affineTransformations:P,focalLength:b,principalOffsetPoint:w,radialDistortionCoefficients:N,tangentialDistortionCoefficients:x}=this,m=[o,r,s,u,p,c,l,d,j];return this.isAdvanced&&(P?.forEach(n=>m.push(n)),m.push(b),w?.forEach(n=>m.push(n)),w?.forEach(n=>m.push(n)),N?.forEach(n=>m.push(n)),x?.forEach(n=>m.push(n))),m.map(n=>Number.isNaN(n)?"":n).join("|")}};t([e({json:{write:!0}})],g.prototype,"type",void 0),t([e({type:[Number],json:{write:!0}})],g.prototype,"affineTransformations",void 0),t([e({type:Number,json:{write:!0}})],g.prototype,"focalLength",void 0),t([e({type:[Number],json:{write:!0}})],g.prototype,"principalOffsetPoint",void 0),t([e({type:[Number],json:{write:!0}})],g.prototype,"radialDistortionCoefficients",void 0),t([e({type:[Number],json:{write:!0}})],g.prototype,"tangentialDistortionCoefficients",void 0),t([e({type:Number,json:{write:!0}})],g.prototype,"yaw",void 0),t([e({type:Number,json:{write:!0}})],g.prototype,"pitch",void 0),t([e({type:Number,json:{write:!0}})],g.prototype,"roll",void 0),t([e({type:Number,json:{write:!0}})],g.prototype,"x",void 0),t([e({type:Number,json:{write:!0}})],g.prototype,"y",void 0),t([e({type:Number,json:{write:!0}})],g.prototype,"z",void 0),g=t([D("esri.layers.orientedImagery.core.CameraOrientationYPR")],g);const at=g;var S;(function(i){i[i.HPR=1]="HPR",i[i.OPK=2]="OPK",i[i.YPR=3]="YPR",i[i.LTP=4]="LTP"})(S||(S={}));const M=new Map;M.set(`${S.OPK}`,{desc:"Using Omega Phi Kappa",constructor:nt}),M.set(`${S.HPR}`,{desc:"Using Heading, Pitch and Roll",constructor:ot}),M.set(`${S.YPR}`,{desc:"Using Yaw, Pitch and Roll",constructor:at}),M.set(`${S.LTP}`,{desc:"Using Local Tangent Plane",constructor:rt});let O=class extends $.ClonableMixin(z){constructor(){super(...arguments),this.url=null}};t([e({type:Number,json:{write:!0}})],O.prototype,"lod",void 0),t([e({type:String,json:{write:!0}})],O.prototype,"rasterFunction",void 0),t([e({type:String,json:{write:!0}})],O.prototype,"url",void 0),O=t([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],O);let H=class extends $.ClonableMixin(z){constructor(){super(...arguments),this.constantElevation=null}};t([e({type:Number,json:{write:!0}})],H.prototype,"constantElevation",void 0),H=t([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],H);const st=i=>i!=null&&typeof i.constantElevation=="number";function pt(i,o,r){return o&&(i=`${o}${i}`),r&&(i+=`${r}`),i}function lt(i,o,r){let{url:s}=i;return s?(s=pt(s,o,r),new O({...i,url:s})):null}function mt(i,o,r){return i&&(st(i)?new H(i):lt(i,o,r))}const F=new Y({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),A=new Y({Feet:"feet",Meter:"meter"}),_=new Y({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique","":null}),W=new Map;function yt(i){const[o,r,s,u,p,c,l,d,j,P,b,w,N,x,m,n,C,T,E,K,R,L]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:s,y:u,z:p,omega:c,phi:l,kappa:d,...k([j,P,b,w,N,x],[n,C],[T,E,K],[R,L],m)}}W.set(`${S.HPR}`,ut),W.set(`${S.YPR}`,ct),W.set(`${S.OPK}`,yt),W.set(`${S.LTP}`,dt);const V=i=>{const o=i.map(r=>parseFloat(r)).filter(r=>!isNaN(r));if(o.length===i.length)return o};function k(i,o,r,s,u){const p=V(i),c=V(o),l=V(r),d=V(s);return{affineTransformations:p?.length===6?p:void 0,focalLength:p?.length===6?parseFloat(u):void 0,principalOffsetPoint:c?.length!==2?[0,0]:c,radialDistortionCoefficients:l?.length!==3?[0,0,0]:l,tangentialDistortionCoefficients:d?.length!==2?[0,0]:d}}function ut(i){const[o,r,s,u,p,c,l,d,j,P,b,w,N,x,m,n,C,T,E,K,R,L]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:s,y:u,z:p,heading:c,pitch:l,roll:d,...k([j,P,b,w,N,x],[n,C],[T,E,K],[R,L],m)}}function ct(i){const[o,r,s,u,p,c,l,d,j,P,b,w,N,x,m,n,C,T,E,K,R,L]=i.slice(1);return{horizontalWKID:o,verticalWKID:r,x:s,y:u,z:p,yaw:c,pitch:l,roll:d,...k([j,P,b,w,N,x],[n,C],[T,E,K],[R,L],m)}}function dt(i){const[o,r,s,u,p,...c]=i.slice(1),l=W.get(p),d=M.get(p)?.constructor;return!l||!d?null:{latitude:o,longitude:r,ellipsoidRadius:s,squaredEccentricity:u,properties:new d(l([p,"",...c]))}}function ft(i){return Array.isArray(i)&&i?.length===9&&!i.some(isNaN)}const ht=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),J=(i,o)=>!ht.has(o)&&i,gt=(i,o,r)=>{const s=`orientedImageryProperties.${i}`;return{name:s,write:o?{ignoreOrigin:!0,target:s,writer:o}:{ignoreOrigin:!0},read:r?{ignoreOrigin:!0,source:s,reader:r}:{ignoreOrigin:!0}}};function vt(i){return i.json&&(i.json.origins=i.json.origins??{},i.json.origins["web-scene"]={write:!1,read:!1}),i}function y(i,o,r,s){const{name:u,write:p,read:c}=gt(i,o,r),l={name:u,write:p,read:c,origins:{service:{name:`orientedImageryInfo.${u}`,write:o,read:r},"web-scene":{name:u,write:J(p,i),read:J(c,i)},"web-map":{name:u,write:p,read:c}}};return s&&l.origins&&(l.type=s,l.origins["web-map"].type=s,l.origins["web-scene"].type=s),l}let a=class extends tt{constructor(){super(...arguments),this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:i,demPathPrefix:o,demPathSuffix:r}=this;return mt(i,o,r)}async save(i){return this._debouncedSaveOperations(q.SAVE,i)}async saveAs(i,o){return this._debouncedSaveOperations(q.SAVE_AS,o,i)}findFirstValidLayerId(i){return i.layers?.find(o=>this.supportedSourceTypes.has(o.type))?.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new Z("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};t([e({type:Number,json:y("cameraHeading")})],a.prototype,"cameraHeading",void 0),t([e({type:Number,json:y("cameraHeight")})],a.prototype,"cameraHeight",void 0),t([e({type:Number,json:y("cameraPitch")})],a.prototype,"cameraPitch",void 0),t([e({type:Number,json:y("cameraRoll")})],a.prototype,"cameraRoll",void 0),t([e({type:Number,json:y("coveragePercent")})],a.prototype,"coveragePercent",void 0),t([e({type:String,json:y("demPathPrefix")})],a.prototype,"demPathPrefix",void 0),t([e({type:String,json:y("demPathSuffix")})],a.prototype,"demPathSuffix",void 0),t([e({type:String,json:y("depthImagePathPrefix")})],a.prototype,"depthImagePathPrefix",void 0),t([e({type:String,json:y("depthImagePathSuffix")})],a.prototype,"depthImagePathSuffix",void 0),t([e({type:Object,json:y("elevationSource")})],a.prototype,"elevationSource",void 0),t([e({readOnly:!0})],a.prototype,"effectiveElevationSource",null),t([e({type:Number,json:y("farDistance")})],a.prototype,"farDistance",void 0),t([e()],a.prototype,"geometryType",void 0),t([e({type:Number,json:y("horizontalFieldOfView")})],a.prototype,"horizontalFieldOfView",void 0),t([e({type:String,json:y("horizontalMeasurementUnit")})],a.prototype,"horizontalMeasurementUnit",void 0),t([e({type:String,json:{...y("imageGeometryField"),default:"ImageGeometry"}})],a.prototype,"imageGeometryField",void 0),t([e({type:String,json:y("imagePathPrefix")})],a.prototype,"imagePathPrefix",void 0),t([e({type:String,json:y("imagePathSuffix")})],a.prototype,"imagePathSuffix",void 0),t([e({type:String,json:{...y("imageReferenceField"),default:"OIObjectID"}})],a.prototype,"imageReferenceField",void 0),t([e({type:Number,json:y("imageRotation")})],a.prototype,"imageRotation",void 0),t([e({type:Number,json:y("maximumDistance")})],a.prototype,"maximumDistance",void 0),t([e({type:Number,json:y("nearDistance")})],a.prototype,"nearDistance",void 0),t([e({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],a.prototype,"operationalLayerType",void 0),t([e({json:{...y("orientationAccuracy",(i,o,r)=>{Q(r,i.join(";"),o)},i=>{const o=i?.split(";")?.map(Number);return ft(o)?o:[0,0,0,0,0,0,0,0,0]},String)}})],a.prototype,"orientationAccuracy",void 0),t([e({json:{...y("orientedImageryType",_.write,_.read,_.jsonValues.slice(1))}})],a.prototype,"orientedImageryType",void 0),t([e({json:{read:!1},value:"oriented-imagery",readOnly:!0})],a.prototype,"type",void 0),t([e({type:F.apiValues,json:{...y("timeIntervalUnit",F.write,F.read,F.jsonValues)}})],a.prototype,"timeIntervalUnit",void 0),t([e(vt(X(et)))],a.prototype,"useViewTime",void 0),t([e({type:Number,json:y("verticalFieldOfView")})],a.prototype,"verticalFieldOfView",void 0),t([e({type:A.apiValues,json:{...y("verticalMeasurementUnit",A.write,A.read,A.jsonValues)}})],a.prototype,"verticalMeasurementUnit",void 0),t([e({type:String,json:y("videoPathPrefix")})],a.prototype,"videoPathPrefix",void 0),t([e({type:String,json:y("videoPathSuffix")})],a.prototype,"videoPathSuffix",void 0),t([e({type:it,json:{origins:{"web-scene":{write:!1,read:!1}}}})],a.prototype,"visibilityTimeExtent",void 0),a=t([D("esri.layers.OrientedImageryLayer")],a);const pi=a;export{pi as default};
