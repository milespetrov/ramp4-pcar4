const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Legend-mXJnKSbi.js","./main-CUH7s9Sn.js","./preload-helper-ExcqyqRp.js","./main-DtpOknRx.css","./jsxFactory-7e8cDo8q.js","./intl-BafM9D6A.js","./uuid-Cl5lrJ4c.js","./featureReductionUtils-Caulfaw_.js","./EffectView-OuL-vUR0.js","./parser-CrueJdws.js","./mat4f32-DcsiF_Rp.js","./mat4-BmSopjy-.js","./common-DQOJ18NT.js","./jsonUtils-CRfo8o0j.js","./displayFilterUtils-Dtfjbrqt.js","./ExportImageParameters-BhYtFVPp.js","./scaleUtils-BgSNHqGp.js","./floorFilterUtils-DKzVzLpH.js","./sublayerUtils-Dvj8ABL7.js","./pixelRangeUtils-Esmjpmyq.js","./jsonUtils-fcQdeCod.js","./typeUtils-DOp2eo19.js","./ClassBreaksRenderer-CSWXEzcd.js","./commonProperties-O4EclM75.js","./colorRamps-B4ooF9E2.js","./ColorStop-BvEitoQE.js","./visualVariableUtils-qBHkeeYF.js","./lengthUtils-DDjk7E_n.js","./RendererLegendOptions-DO3N6nMn.js","./LRUCache-DLfc_-3F.js","./MemCache-DyZ34pF9.js","./Version-CiZFdl7o.js","./FieldsIndex-ChqC2yCw.js","./timeZoneUtils-BjvDF32J.js","./utils-BRg6PM3S.js","./defaultCIMValues-DII_GG3u.js","./enums-BJSSbDkD.js","./heatmapUtils-xdmOTgTs.js","./vec42-CKs01hkn.js","./vec4f64-o2zAXfmz.js","./SimpleRenderer-CzHvQNOK.js","./UniqueValueRenderer-CrxJY1O9.js","./diffUtils-poGcxNFZ.js","./styleUtils-Btp44JGj.js","./rendererConversion-5JadtyPk.js","./cimSymbolUtils-CTkMvE8z.js","./utils-CsJ0_fgv.js","./globalCss-DTmqpTm-.js","./Queue-BuGVr5Nt.js","./signal-B2XRx4s5.js","./utils-CSm7gN0i.js","./colorUtils-DgoZUeea.js","./mat2df32-orApM5a3.js","./mat2d-D9DBP-jx.js","./webStyleSymbolUtils-BLA_F0Ge.js","./devEnvironmentUtils-8WtPGj6h.js","./webStyleAcceptedFormats-CG7ZQ6BV.js","./TimeExtent-CZezol20.js","./utils-BbLF_NTL.js","./themeUtils-C3zvZbsE.js","./substitute-CbmJVVFd.js","./index-BpMqcWId.js","./dom-D26mDwiE.js","./observers-D2UblcL0.js","./index-BokFRLax.js","./label-CAQrVkVG.js","./index-19Ai-H2D.js","./ref-DQWouD3Q.js","./form-DQxfX-L-.js","./interactive-BtUAk0p9.js","./key-CZcQa38B.js","./loadable-Coefc456.js","./index-BxsoyF9J.js","./floating-ui-W6djJ3TA.js","./debounce-DbkufipY.js","./guid-ejniuQmw.js","./openCloseComponent-BI3zk6h4.js","./FloatingArrow-ETPfEOW9.js","./keyed-Bi8N0e0Q.js","./index-BhE0Vv63.js","./index-K1CEfFML.js","./useT9n-DfV80OEJ.js","./customElement-BV2HTg-X.js","./index-BLlp3meo.js","./dynamicClasses-pKEMtFzB.js","./index-KWI0Snmc.js","./component-KWlPhK78.js","./index-A5hchpU3.js","./resources6-Cs2_VmEC.js","./index-iNZrvOC3.js","./customElement-D9XQqElq.js","./index-Bp42geN8.js","./static-D3TiMiR0.js","./index-CQrRSd4j.js","./array-BbE1dLa5.js","./index-D16T1pax.js","./index-C50DGh1N.js","./index-CVPF_uP2.js","./Validation-C6WW_nZy.js","./index-Dwbg_uEE.js","./index-DKrP1gbq.js","./customElement-CyqGqrXG.js","./input-Di9HI0Lo.js","./index-CsjliMqD.js","./utils-U1eP8lBZ.js","./index-CJ2K66EU.js","./resources5-SciNIBSe.js","./index-J0Tr8XFt.js","./GridControls-BipJdbF5.js","./unitFormatUtils-C-z4WB_y.js","./ByteSizeUnit-BsxeN7wM.js","./quantityUtils-C4IVg9iY.js","./projection-voo92M7M.js","./projectVectorToVector-Bmp-i5iR.js","./projectPointToVector-Dn5ZfUsS.js","./automaticLengthMeasurementUtils-C7FQ8qob.js","./vec32-BVxZ7_pm.js","./MeshTransform-CoAc3kgr.js","./mat4f64-Dk4dwAN8.js","./quat-Cto7BmOn.js","./mat3f64-q3fE-ZOt.js","./quatf64-aQ5IuZRd.js","./axisAngleDegrees-BgNH406v.js","./meshVertexSpaceUtils-B5Lp9EFL.js","./MeshLocalVertexSpace-djMHxfbo.js","./SketchViewModel-DPtjtVDr.js","./UpdatingHandles-CqLMgYyG.js","./GraphicsLayer-Bs0S4UZs.js","./GraphicsCollection-CDsskFzg.js","./Layer-oZ-UmqoM.js","./ScaleRangeLayer-CaP4p1TE.js","./layerContainerType-C5CzMsLd.js","./ElevationInfo-B8M7_-mq.js","./vec2-maR1OrZI.js","./vec2f64-DohEyf3f.js","./geodesicUtils-CQp4_qye.js","./Query-DDITEKyw.js","./Field-BhhcsUqE.js","./fieldType-6X7O7o6f.js","./plane-OXqzdzET.js","./sphere-CV755Y1n.js","./mat3-CruJiiUv.js","./a11yUtils-MGBJohz7.js","./spatialReferenceEllipsoidUtils-DqG8ZjAx.js","./geodesicLengthMeasurementUtils-C17PSxL5.js","./gridUtils-BDs0tmKZ.js","./normalizeUtils-CalGZKgb.js","./utils-DFGq0666.js","./utils-ChN9L5aE.js","./editingTools-D8pUhCQ8.js","./SnappingVisualizer2D-BgR2a_3w.js","./automaticAreaMeasurementUtils-B6K6O7kn.js","./PointSnappingHint-uTEGgJ1t.js","./earcut-Lltz9D9k.js","./triangle-DPLMhq5b.js","./lineSegment-BnVrY7A7.js","./editPlaneUtils-DSlBxWFd.js","./boundedPlane-Blt987Zj.js","./ViewingMode-HRfKv6NR.js","./GraphicManipulator-C-Z0aMTt.js","./drapedUtils-nufhV_72.js","./drawUtils-o5zygQxl.js","./dynamic-import-helper-BheWnx7M.js","./draw-store-41KY22iZ.js","./layerViewUtils-CBQysEy4.js","./widget-BsbddmCh.js","./hydratedFeatures-CaQRLsJ2.js","./Scheduler-PhIj5Ja0.js","./geometryEngineBase-8g0RzW7z.js","./_commonjsHelpers-DCkdB7M8.js","./hydrated-DLPS5rgs.js","./utils-BQBvadb7.js","./TextOverlayItem-BF2VX92M.js","./number-2GVIPSpc.js","./index-Bis20zXv.js","./index-DV4IwRKk.js","./ExpandToggle-TGcbsNMV.js","./index-DZnahuvr.js","./geometryEngineJSON-5ScVeRQz.js","./json-Wa8cmqdu.js","./index-CnIupYZj.js","./circle-icon-DpKi4ZEU.js","./edit-icon-CoTV4Kir.js","./point-icon-Cl77g8D3.js","./polygon-icon-CyzjjNDq.js","./polyline-icon-DKH03SQo.js","./rectangle-icon-D7ZICx70.js"])))=>i.map(i=>d[i]);
import{_ as x}from"./preload-helper-ExcqyqRp.js";import{_ as Qn}from"./dynamic-import-helper-BheWnx7M.js";import{v as a,x as l,ap as N,J as O,ag as ie,Z as eo,gA as to,eW as io,N as so,gC as no,eV as oo,$ as ro,fw as ao,O as At,i4 as E,ae as lo,ab as M,ao as bi,aY as co,bS as po,d7 as Ne,eF as ho,af as Pe,b8 as Gt,T as uo,br as Ri,aX as go,l9 as yo,Q as st,aZ as mo,bG as Ws,bu as Ft,V as Se,a5 as ce,L as _o,bR as le,fL as li,dF as qi,fW as Ii,l as at,jX as vo,jY as fo,a6 as k,et as Fe,fq as wo,f7 as It,d8 as Me,ak as Di,eT as bo,c7 as Ti,d5 as js,dt as ue,kN as To,kO as xo,kP as Eo,jb as Bt,a_ as Xs,s as Mo,cZ as qs,eX as So,aq as Co,la as Ks,ek as Ys,ck as Js,lb as $o,bs as Po,lc as ps,ld as Vo,e$ as Oo,cc as Lo,ib as ko,ic as Ro,bF as Ki,f9 as Io,le as Qs,lf as en,lg as Do,lh as Ao,ez as Go,f8 as ds,a as zo,hK as si,n as zt,fd as Yi,a7 as Ho,li as Fo,lj as Bo,lk as xi,ll as Nt,lm as Ei,ln as No,cN as Zo,cO as Uo,lo as St,lp as Wo,cU as jo,lq as Xo,lr as qo,dO as Ko,dP as Yo,e1 as Jo,e2 as Qo,a3 as er,e5 as hs,e6 as tr,eb as tn,ls as ir,d2 as sr,gk as nr,d4 as or,f6 as Zt,cC as us,cB as rr,aj as Xe,F as ar,fi as lr}from"./main-CUH7s9Sn.js";import{u as Ji}from"./draw-store-41KY22iZ.js";import cr from"./GraphicsLayer-Bs0S4UZs.js";import"./intl-BafM9D6A.js";import{a5 as pr,K as gs,a6 as ni,a7 as Qi,c as Tt,a8 as dr,a9 as sn,a1 as hr,aa as ur,a2 as wt,Z as ft,ab as nn,ac as gr,M as yr,x as mr,ad as on,ae as _r,j as vr,B as fr,af as rn,ag as wr,ah as br,ai as Tr,aj as an,o as ln,S as cn,ak as xr,D as Ut,C as ys,al as Er,l as pn,am as Ct}from"./SketchViewModel-DPtjtVDr.js";import{O as Oe,n as g,c as Ze,e as Be,a as Mr,h as Sr,i as dn}from"./jsxFactory-7e8cDo8q.js";import{o as qe,d as ms,f as Cr,e as es,g as $r}from"./globalCss-DTmqpTm-.js";import{o as Yt}from"./layerViewUtils-CBQysEy4.js";import{a as Pr,e as _s,b as Vr}from"./widget-BsbddmCh.js";import{y as Or}from"./diffUtils-poGcxNFZ.js";import{h as Lr}from"./UpdatingHandles-CqLMgYyG.js";import{l as hn}from"./ViewingMode-HRfKv6NR.js";import{_ as kr,m as un,r as Rr,T as Ir,e as vs,v as Dr,j as Ar,I as Gr,k as fs}from"./vec2-maR1OrZI.js";import{n as Ke,t as Jt,o as zr}from"./vec2f64-DohEyf3f.js";import{o as lt,I as ts,p as gn,s as _t,J as Ai,K as ws,_ as gt,A as yt,g as Gi,P as Qt,y as bs,u as mt,c as yn,Q as Ts}from"./vec32-BVxZ7_pm.js";import{_ as Hr,a as Fr,L as Br}from"./vec42-CKs01hkn.js";import{n as Nr,r as Mi,u as Zr}from"./vec4f64-o2zAXfmz.js";import{O as oi}from"./projection-voo92M7M.js";import{c as Ur}from"./meshVertexSpaceUtils-B5Lp9EFL.js";import{k as Wr,x as ci}from"./hydratedFeatures-CaQRLsJ2.js";import{M as xs,b as jr,l as Xr,V as $t,f as Es,h as Si,z as qr,H as Kr,O as Ci,k as Yr}from"./plane-OXqzdzET.js";import{f as is,a as Jr,o as Qr}from"./quantityUtils-C4IVg9iY.js";import{e as ss,n as pi}from"./projectVectorToVector-Bmp-i5iR.js";import{j as ea,N as ta}from"./geodesicUtils-CQp4_qye.js";import{g as mn,F as _n}from"./Scheduler-PhIj5Ja0.js";import{G as w}from"./geometryEngineBase-8g0RzW7z.js";import{hydratedAdapter as C}from"./hydrated-DLPS5rgs.js";import{u as ia}from"./mat2d-D9DBP-jx.js";import{R as sa,L as na}from"./quat-Cto7BmOn.js";import{e as Ms}from"./quatf64-aQ5IuZRd.js";import{o as oa,r as ra}from"./drapedUtils-nufhV_72.js";import{e as Ss}from"./utils-BQBvadb7.js";import{s as Cs}from"./substitute-CbmJVVFd.js";var zi;let De=zi=class extends ie{constructor(i){super(i),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const i=this.center,e=this.numberOfPoints;if(this.hasZ=i?.hasZ??!1,this.rings.length!==0||!i)return;const t=eo(this.radius,this.radiusUnit,"meters"),s=i.spatialReference;let n,o="geographic";if(s.isWebMercator?o="webMercator":((s.wkid&&to[s.wkid])!=null||(s.wkt2||s.wkt)&&io(s.wkt2||s.wkt))&&(o="projected"),this.geodesic){let r;switch(o){case"webMercator":r=so(i);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":r=i}n=this._createGeodesicCircle(r,t,e),o==="webMercator"&&(n=no(n))}else{let r;o==="webMercator"||o==="projected"?r=t/oo(i.spatialReference):o==="geographic"&&(r=ro(t,"meters",ao(i.spatialReference).radius)),n=this._createPlanarCircle(i,r,e)}this.spatialReference=n.spatialReference,this.addRing(n.rings[0])}clone(){const{center:i,numberOfPoints:e,radius:t,radiusUnit:s,geodesic:n}=this;return new zi({center:i?.clone(),numberOfPoints:e,radius:t,radiusUnit:s,geodesic:n})}_createGeodesicCircle(i,e,t){const s=[],n=[i.x,i.y];for(let o=0;o<360;o+=360/t){const r=this.hasZ?[0,0,i.z??0]:[0,0];ea(r,n,o,e,At.WGS84),s.push(r)}return s.push(s[0]),new ie({rings:[s]})}_createPlanarCircle(i,e,t){const s=[],n=2*Math.PI/t;for(let o=0;o<t;++o){const r=n*o,c=[i.x+Math.cos(-r)*e,i.y+Math.sin(-r)*e];this.hasZ&&c.push(i.z??0),s.push(c)}return s.push(s[0]),new ie({spatialReference:i.spatialReference,rings:[s]})}};a([l({type:N})],De.prototype,"center",void 0),a([l()],De.prototype,"geodesic",void 0),a([l()],De.prototype,"numberOfPoints",void 0),a([l()],De.prototype,"radius",void 0),a([l()],De.prototype,"radiusUnit",void 0),De=zi=a([O("esri.geometry.Circle")],De);const aa=De;function $(i){const e=Array.isArray(i)?i[0].spatialReference:i.spatialReference;return e?lo(At,e):At.WGS84}function la(i){return w.extendedSpatialReferenceInfo(i)}function ca(i,e){return E(i),w.clip(C,$(i),i,e)}function pa(i,e){return E(i),w.cut(C,$(i),i,e)}function da(i,e){return E(i),E(e),w.contains(C,$(i),i,e)}function ha(i,e){return E(i),E(e),w.crosses(C,$(i),i,e)}function vn(i,e,t){return E(i),E(e),w.distance(C,$(i),i,e,t)}function ua(i,e){return E(i),E(e),w.equals(C,$(i),i,e)}function ga(i,e){return E(i),E(e),w.intersects(C,$(i),i,e)}function ya(i,e){return E(i),E(e),w.touches(C,$(i),i,e)}function ma(i,e){return E(i),E(e),w.within(C,$(i),i,e)}function _a(i,e){return E(i),E(e),w.disjoint(C,$(i),i,e)}function va(i,e){return E(i),E(e),w.overlaps(C,$(i),i,e)}function fa(i,e,t){return E(i),E(e),w.relate(C,$(i),i,e,t)}function wa(i){return E(i),w.isSimple(C,$(i),i)}function fn(i){return E(i),w.simplify(C,$(i),i)}function ba(i,e=!1){return w.convexHull(C,$(i),i,e)}function Ta(i,e){return E(e),w.difference(C,$(i),i,e)}function xa(i,e){return E(e),w.symmetricDifference(C,$(i),i,e)}function Ea(i,e){return E(e),w.intersect(C,$(i),i,e)}function Ma(i){return w.union(C,$(i),i)}function Sa(i,e,t,s,n,o){return w.offset(C,$(i),i,e,t,s,n,o)}function Ca(i,e,t,s=!1){return w.buffer(C,$(i),i,e,t,s)}function $a(i,e,t,s,n,o){return w.geodesicBuffer(C,$(i),i,e,t,s,n,o)}function Pa(i,e,t=!0){return E(i),w.nearestCoordinate(C,$(i),i,e,t)}function Va(i,e){return E(i),w.nearestVertex(C,$(i),i,e)}function Oa(i,e,t,s){return E(i),w.nearestVertices(C,$(i),i,e,t,s)}function ns(i){return"xmin"in i?"center"in i?i.center:null:"x"in i?i:"extent"in i?i.extent?.center??null:null}function La(i,e,t){if(i==null)throw new bt;const s=i.spatialReference;if((t=t??ns(i))==null)throw new bt;const n=i.constructor.fromJSON(w.rotate(i,e,t));return n.spatialReference=s,n}function ka(i,e){if(i==null)throw new bt;const t=i.spatialReference;if((e=e??ns(i))==null)throw new bt;const s=i.constructor.fromJSON(w.flipHorizontal(i,e));return s.spatialReference=t,s}function Ra(i,e){if(i==null)throw new bt;const t=i.spatialReference;if((e=e??ns(i))==null)throw new bt;const s=i.constructor.fromJSON(w.flipVertical(i,e));return s.spatialReference=t,s}function Ia(i,e,t,s){return E(i),w.generalize(C,$(i),i,e,t,s)}function Da(i,e,t){return E(i),w.densify(C,$(i),i,e,t)}function Aa(i,e,t,s=0){return E(i),w.geodesicDensify(C,$(i),i,e,t,s)}function Ga(i,e){return E(i),w.planarArea(C,$(i),i,e)}function za(i,e){return E(i),w.planarLength(C,$(i),i,e)}function Ha(i,e,t){return E(i),w.geodesicArea(C,$(i),i,e,t)}function Fa(i,e,t){return E(i),w.geodesicLength(C,$(i),i,e,t)}function Ba(i,e){return w.intersectLinesToPoints(C,$(i),i,e)}function Na(i,e){w.changeDefaultSpatialReferenceTolerance(i,e)}function Za(i){w.clearDefaultSpatialReferenceTolerance(i)}let bt=class extends Error{constructor(){super("Illegal Argument Exception")}};const bp=Object.freeze(Object.defineProperty({__proto__:null,buffer:Ca,changeDefaultSpatialReferenceTolerance:Na,clearDefaultSpatialReferenceTolerance:Za,clip:ca,contains:da,convexHull:ba,crosses:ha,cut:pa,densify:Da,difference:Ta,disjoint:_a,distance:vn,equals:ua,extendedSpatialReferenceInfo:la,flipHorizontal:ka,flipVertical:Ra,generalize:Ia,geodesicArea:Ha,geodesicBuffer:$a,geodesicDensify:Aa,geodesicLength:Fa,intersect:Ea,intersectLinesToPoints:Ba,intersects:ga,isSimple:wa,nearestCoordinate:Pa,nearestVertex:Va,nearestVertices:Oa,offset:Sa,overlaps:va,planarArea:Ga,planarLength:za,relate:fa,rotate:La,simplify:fn,symmetricDifference:xa,touches:ya,union:Ma,within:ma},Symbol.toStringTag,{value:"Module"}));var H;(function(i){i[i.Z=0]="Z",i[i.M=1]="M"})(H||(H={}));let Ua=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(Ke())}pointToVector(e){return this._tag(Jt(e.x,e.y))}arrayToVector(e){return this._tag(Jt(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,t=new N){return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new N){return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(e)return t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}lerp(e,t,s,n){return kr(n,e,t,s)}addDelta(e,t,s){e[0]+=t,e[1]+=s}distance(e,t){return un(e,t)}getZ(e,t=void 0){return t}hasZ(){return!1}getM(e,t=void 0){return t}hasM(){return!1}clone(e){return this._tag(zr(e))}copy(e,t){return Rr(t,e)}fromXYZ(e){return this._tag(Jt(e[0],e[1]))}toXYZ(e,t=M()){return lt(t,e[0],e[1],0)}pointToXYZ(e,t=M()){return lt(t,e.x,e.y,0)}equals(e,t){return Ir(e,t)}_tag(e){return e}},$s=class{constructor(e,t){this._valueType=e,this.spatialReference=t}createVector(){return this._tag(M())}pointToVector(e){return this._tag(bi(e.x,e.y,this._valueType===H.Z?e.z:e.m))}arrayToVector(e){return this._tag(bi(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===H.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,t=new N){return t.x=e[0],t.y=e[1],t.z=this._valueType===H.Z?e[2]:void 0,t.m=this._valueType===H.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new N){return t.x=e[0],t.y=e[1],t.z=this._valueType===H.Z?e[2]:void 0,t.m=this._valueType===H.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(!e)return;t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};const s=this._valueType===H.Z,n=this._valueType===H.M;return t.x=e[0],t.y=e[1],t.z=s?e[2]:void 0,t.m=n?e[2]:void 0,t.hasZ=s,t.hasM=n,t.spatialReference=this.spatialReference,t}lerp(e,t,s,n){return ts(n,e,t,s)}addDelta(e,t,s,n){e[0]+=t,e[1]+=s,this._valueType===H.Z&&(e[2]+=n)}distance(e,t){return this._valueType===H.Z?gn(e,t):un(e,t)}getZ(e,t=void 0){return this._valueType===H.Z?e[2]:t}hasZ(){return this._valueType===H.Z}getM(e,t=void 0){return this._valueType===H.M?e[2]:t}hasM(){return this._valueType===H.M}clone(e){return this._tag(co(e))}copy(e,t){return _t(t,e)}fromXYZ(e,t=0,s=0){return this._tag(bi(e[0],e[1],this._valueType===H.Z?e.length>2?e[2]:t:s))}toXYZ(e,t=M()){return lt(t,e[0],e[1],this._valueType===H.Z?e[2]:0)}pointToXYZ(e,t=M()){return lt(t,e.x,e.y,this._valueType===H.Z?e.z??0:0)}equals(e,t){return Ai(e,t)}_tag(e){return e}},Wa=class{constructor(e){this.spatialReference=e}createVector(){return this._tag(Nr())}pointToVector(e){return this._tag(Mi(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag(Mi(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,t=new N){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new N){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(e)return t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}lerp(e,t,s,n){return Hr(n,e,t,s)}addDelta(e,t,s,n){e[0]+=t,e[1]+=s,e[2]+=n}distance(e,t){return gn(e,t)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag(Zr(e))}copy(e,t){return Fr(t,e)}fromXYZ(e,t=0,s=0){return this._tag(Mi(e[0],e[1],e.length>2?e[2]:t,s))}toXYZ(e,t=M()){return lt(t,e[0],e[1],e[2])}pointToXYZ(e,t=M()){return lt(t,e.x,e.y,e.z??0)}equals(e,t){return Br(e,t)}_tag(e){return e}};function wn(i,e,t){return i&&e?new Wa(t):e?new $s(H.M,t):i?new $s(H.Z,t):new Ua(t)}function ja(i,e){if(!e.supported)return;let t=1/0,s=-1/0;const n=e.upperBoundX-e.lowerBoundX;i.forEach(r=>{let c=r.pos[0];for(;c<e.lowerBoundX;)c+=n;for(;c>e.upperBoundX;)c-=n;t=Math.min(t,c),s=Math.max(s,c),r.pos[0]=c});const o=s-t;n-o<o&&i.forEach(r=>{r.pos[0]<0&&(r.pos[0]+=n)})}function Xa(i,e){const t=po(i);return e===hn.Global&&t?{supported:!0,lowerBoundX:t.valid[0],upperBoundX:t.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let Ht=class{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}},Ve=class{constructor(e,t,s){this.component=e,this.leftVertex=t,this.rightVertex=s,this.type="edge",t.rightEdge=this,s.leftEdge=this}},di=class{constructor(e,t){this._spatialReference=e,this._viewingMode=t,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||ja(this.vertices,Xa(this._spatialReference,this._viewingMode))}updateVertexIndex(e,t){if(this.vertices.length===0)return;const s=this.vertices[0];let n=null,o=e,r=t;do n=o,n.index=r++,o=n.rightEdge?n.rightEdge.rightVertex:null;while(o!=null&&o!==s);n.leftEdge&&n!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(n),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&this.vertices[0].leftEdge!==null}swapVertices(e,t){const s=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=s}iterateVertices(e){if(this.vertices.length===0)return;const t=this.vertices[0];let s=t;do e(s,s.index),s=s.rightEdge!=null?s.rightEdge.rightVertex:null;while(s!==t&&s!=null)}},Hi=class bn extends Ne{constructor(e,t){super(),this.type=e,this.coordinateHelper=t,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:ho(this.type)}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const t of e.vertices)yield t}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return this.components.length===0||this.components[0].vertices.length===0?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],t=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const n=[];let o=s.vertices.find(c=>c.leftEdge==null);const r=o;do n.push(t(o.pos)),o=o.rightEdge?o.rightEdge.rightVertex:null;while(o&&o!==r);e.push(n)}return new Pe({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],t=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const n=[],o=s.vertices[0];let r=o;const c=r;do n.push(t(r.pos)),r=r.rightEdge!=null?r.rightEdge.rightVertex:null;while(r&&r!==c);s.isClosed()&&n.push(t(o.pos)),e.push(n)}return new ie({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,t){const s=e.spatialReference,n=wn(e.hasZ,e.hasM,s),o=new bn(e.type,n);switch(e.type){case"polygon":qa(o,e,t);break;case"polyline":Ka(o,e,t);break;case"point":Ps(o,e,t);break;case"mesh":Ps(o,e.origin,t),o._geometry=e,o._dirty=!1}return o}};function qa(i,e,t){const s=e.spatialReference,n=i.coordinateHelper,o=e.rings;for(let r=0;r<o.length;++r){const c=o[r],p=new di(s,t);p.index=r;const d=c.length>2&&Gt(c[0],c[c.length-1]),h=d?c.length-1:c.length;for(let y=0;y<h;++y){const _=n.arrayToVector(c[y]),v=new Ht(p);p.vertices.push(v),v.pos=_,v.index=y}const u=p.vertices.length-1;for(let y=0;y<u;++y){const _=p.vertices[y],v=p.vertices[y+1],S=new Ve(p,_,v);p.edges.push(S)}if(d){const y=new Ve(p,p.vertices[p.vertices.length-1],p.vertices[0]);p.edges.push(y)}i.components.push(p)}}function Ka(i,e,t){const s=e.spatialReference,n=i.coordinateHelper,o=e.paths;for(let r=0;r<o.length;++r){const c=o[r],p=new di(s,t);p.index=r;const d=c.length;for(let u=0;u<d;++u){const y=n.arrayToVector(c[u]),_=new Ht(p);p.vertices.push(_),_.pos=y,_.index=u}const h=p.vertices.length-1;for(let u=0;u<h;++u){const y=p.vertices[u],_=p.vertices[u+1],v=new Ve(p,y,_);p.edges.push(v)}i.components.push(p)}}function Ps(i,e,t){const s=e.spatialReference,n=i.coordinateHelper,o=new di(s,t);o.index=0;const r=new Ht(o);r.index=0,r.pos=n.pointToVector(e),o.vertices.push(r),i.components.push(o)}function Pt(i){return i.type==="mesh"}var te;(function(i){i[i.NEW_STEP=0]="NEW_STEP",i[i.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"})(te||(te={}));let Ya=class{constructor(e,t,s){this._editGeometry=e,this._component=t,this._pos=s,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";this._addedVertex==null&&(e="apply",this._addedVertex=new Ht(this._component));const t=this._component.getLastVertex();if(t==null)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let s=null;t.rightEdge&&(this._originalEdge=t.rightEdge,s=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._left==null&&(this._left=new Ve(this._component,t,this._addedVertex)),this._component.edges.push(this._left),t.rightEdge=this._left,this._originalEdge!=null&&s!=null&&(this._right==null&&(this._right=new Ve(this._component,this._addedVertex,s)),this._component.edges.push(this._right),s.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,t.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){this._addedVertex!=null&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),this._left!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),this._right!=null&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),this._originalEdge!=null&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),this._left!=null?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}},Ja=class Tn{constructor(e,t,s){this._editGeometry=e,this._vertices=t,this.operation=s,this._undone=!1}_notifyChanges(e){this._editGeometry.components.forEach(t=>t.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:this._vertices})}apply(){this._vertices.forEach(e=>this.operation.apply(e)),this._notifyChanges(this._undone?"redo":"apply")}undo(){this._vertices.forEach(e=>this.operation.undo(e)),this._undone=!0,this._notifyChanges("undo")}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let t=0;t<e._vertices.length;++t)if(e._vertices[t]!==this._vertices[t])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof Tn&&this.canAccumulate(e))&&(this._vertices.forEach(t=>this.operation.accumulate(t,e.operation)),this.operation.accumulateParams(e.operation),this._notifyChanges("apply"),!0)}};var ge;(function(i){i[i.CUMULATIVE=0]="CUMULATIVE",i[i.REPLACE=1]="REPLACE"})(ge||(ge={}));let Qa=class{constructor(e,t,s=0){this._editGeometry=e,this._vertices=t,this._minNumberOfVertices=s,this.removedVertices=null}apply(){let e="redo";if(this.removedVertices==null){const t=this.removedVertices=[];this._vertices.forEach(s=>{const n=this._removeVertex(s);n!=null&&t.push(n)}),e="apply"}else this.removedVertices.forEach(t=>{this._removeVertex(t.removedVertex)});this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){this.removedVertices?.forEach(e=>{this._undoRemoveVertex(e)}),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;const s={removedVertex:e,createdEdge:null},n=e.leftEdge,o=e.rightEdge;return t.vertices.splice(t.vertices.indexOf(e),1),n&&(t.edges.splice(t.edges.indexOf(n),1),n.leftVertex.rightEdge=null),o&&(t.edges.splice(t.edges.indexOf(o),1),o.rightVertex.leftEdge=null),e.index===0&&o&&this._vertices.length>0&&t.swapVertices(t.vertices.indexOf(o.rightVertex),0),n&&o&&(s.createdEdge=new Ve(t,n.leftVertex,o.rightVertex),t.edges.push(s.createdEdge)),o&&t.updateVertexIndex(o.rightVertex,o.rightVertex.index-1),s}_undoRemoveVertex(e){const t=e.removedVertex,s=e.removedVertex.component,n=t.leftEdge,o=t.rightEdge;e.createdEdge&&s.edges.splice(s.edges.indexOf(e.createdEdge),1),s.vertices.push(t),n&&(s.edges.push(n),n.leftVertex.rightEdge=n),o&&(s.edges.push(o),o.rightVertex.leftEdge=o),s.updateVertexIndex(t,t.index)}},el=class{constructor(e,t,s){this._editGeometry=e,this._edge=t,this._t=s,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const t=this._edge,s=t.component,n=t.leftVertex,o=t.rightVertex;s.edges.splice(s.edges.indexOf(t),1),this.createdVertex==null&&(e="apply",this.createdVertex=new Ht(t.component)),s.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(t.leftVertex.pos,t.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),this._left==null&&(this._left=new Ve(s,n,this.createdVertex)),this._left.leftVertex.leftEdge?s.edges.push(this._left):s.edges.unshift(this._left),n.rightEdge=this._left,this._right==null&&(this._right=new Ve(s,this.createdVertex,o)),s.edges.push(this._right),o.leftEdge=this._right,s.updateVertexIndex(this.createdVertex,n.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(this.createdVertex==null||this._left==null||this._right==null)return null;const e=this._edge,t=e.component,s=this.createdVertex.leftEdge,n=this.createdVertex.rightEdge,o=s?.leftVertex,r=n?.rightVertex;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this._left),1),t.edges.splice(t.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?t.edges.push(this._edge):t.edges.unshift(this._edge),o&&(o.rightEdge=e),r&&(r.leftEdge=e),o&&t.updateVertexIndex(o,o.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}},tl=class xn{constructor(e,t,s){this._editGeometry=e,this._vertex=t,this._pos=s}apply(){const e=this._originalPosition==null;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof xn&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach(t=>t.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}},il=class{constructor(e,t){this._editGeometry=e,this._component=t,this._createdEdge=null}apply(){let e="redo";if(this._createdEdge==null){e="apply";const t=this._component.getFirstVertex(),s=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||t==null||s==null)return;this._createdEdge=new Ve(this._component,s,t)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){this._createdEdge!=null&&(uo(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}},Vs=class En{constructor(e,t,s,n){this._editGeometry=e,this.dx=t,this.dy=s,this.dz=n,this._firstTime=!0}apply(){const e=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(e,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const t=this._editGeometry.geometry;return e instanceof En&&e._editGeometry.geometry===t&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(e,t,s,n){const o=this._editGeometry.geometry;o.offset(t,s,n);const r=this._editGeometry.components[0].getFirstVertex();if(!r)return;const c=this._editGeometry.coordinateHelper;r.pos=c.pointToVector(o.origin),this._editGeometry.notifyChanges({operation:e,updatedVertices:[r]})}},sl=class Mn{constructor(e,t,s,n){this._helper=e,this.dx=t,this.dy=s,this.dz=n}_move(e,t,s,n){this._helper.addDelta(e.pos,t,s,n)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof Mn}accumulate(e,t){this._move(e,t.dx,t.dy,t.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}},nl=class Fi{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,t,s,n=0,o=Dt.IMMEDIATE){this._helper=e,this._planeType=t,this._edge=s,this.distance=n,this._plane=xs(),this._offsetPlane=xs(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,o===Dt.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){const e=this._toXYZ(this._edge.leftVertex.pos),t=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),s=this._toXYZ(this._edge.rightVertex.pos),n=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=ws(M(),e,s),t?(this._left=this._computeNeighbor(e,t,this._edgeDirection),this._right=this._computeNeighbor(s,n,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(s,n,this._edgeDirection),this._left=this._computeNeighbor(e,t,this._edgeDirection,this._right))}_toXYZ(e){return e!=null?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,t,s,n){const o=M();if(t){ws(o,e,t);const r=!this._passesBisectingAngleThreshold(o,s);return{start:e,end:t,direction:r?this._bisectVectorsPerpendicular(s,o):o,isOriginalDirection:!r}}return this._helper.hasZ()?n&&(gt(o,s,n.direction),gt(o,o,s),yt(o,o),Math.sign(o[1])!==Math.sign(s[0])&&Gi(o,o,-1)):lt(o,-s[1],s[0],0),{start:e,end:t,direction:o,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,t){const s=Math.abs(jr(t,e));return s>=Os&&s<=Math.PI-Os}_bisectVectorsPerpendicular(e,t){const s=Qt(e,t)<0?e:bs(M(),e),n=Math.abs(Qt(s,t));if(!(n<Ls||n>1-Ls))return this._bisectDirection(s,t);const o=gt(M(),s,[0,0,1]);return yt(o,o)}_bisectDirection(e,t){const s=mt(M(),e,t);return yt(s,s)}_initializePlane(){const e=this._computeNormalDirection(this._left),t=this._computeNormalDirection(this._right);Qt(e,t)<0&&bs(t,t),Xr(this._left.start,this._bisectDirection(e,t),this._plane)}_computeNormalDirection(e){const t=gt(M(),e.direction,this._edgeDirection);yt(t,t);const s=gt(M(),this._edgeDirection,t);return this._planeType===Bi.XY&&(s[2]=0),yt(s,s)}_initializeDistanceConstraints(){this._left.end==null||this.requiresSplitEdgeLeft||this._updateDistanceConstraint($t(this._plane,this._left.end)),this._right.end==null||this.requiresSplitEdgeRight||this._updateDistanceConstraint($t(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const t=Ci(e),s=this._edgeDirection,n=mt(M(),this._left.start,this._left.direction),o=mt(M(),this._right.start,this._right.direction),r=this._pointInBasis2D(Ke(),t,s,this._left.start),c=this._pointInBasis2D(Ke(),t,s,n),p=this._pointInBasis2D(Ke(),t,s,this._right.start),d=this._pointInBasis2D(Ke(),t,s,o),[h]=pr({start:c,end:r,type:gs.LINE},{start:d,end:p,type:gs.LINE});if(!h)return;const u=vs(Ke(),r,c);Dr(u,u);const y=vs(Ke(),h,c),_=Ar(u,y),v=mt(M(),n,Gi(M(),this._left.direction,-_)),S=$t(e,v);this._updateDistanceConstraint(S)}_pointInBasis2D(e,t,s,n){return e[0]=Es(t,n),e[1]=Es(s,n),e}_offset(e,t){Number.isFinite(this._minDistance)&&(t=Math.max(this._minDistance,t)),Number.isFinite(this._maxDistance)&&(t=Math.min(this._maxDistance,t)),Si(this._offsetPlane,this._plane),this._offsetPlane[3]-=t;const s=(o,r,c)=>r!=null&&Yr(this._offsetPlane,o,mt(M(),o,r),c),n=M();(e===this._edge.leftVertex?s(this._left.start,this._left.direction,n):s(this._right.start,this._right.direction,n))&&this._helper.copy(this._helper.fromXYZ(n,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=qr(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return $t(this.plane,this._pointToXYZ(e))}clampedStartAndEnd(e){const t=this._helper.toXYZ(this._helper.pointToVector(e)),s=Kr(this._plane,t,M()),n=$t(this._plane,t),o=Ri(n,this._minDistance,this._maxDistance);return ts(t,s,t,o/n),{start:s,end:t}}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof Fi&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&Ai(Ci(this._plane),Ci(e._plane))}accumulate(e,t){const s=this._plane[3]-t._plane[3]+t.distance;this._offset(e,s)}accumulateParams(e){const t=e.distance-e._plane[3];this.distance=t+this._plane[3]}clone(){const e=new Fi(this._helper,this._planeType,this._edge,this.distance,Dt.DEFERRED);return Si(e._plane,this._plane),Si(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=_t(M(),this._edgeDirection),e}_maybeEqualsVec3(e,t){return e==null&&t==null||e!=null&&t!=null&&Ai(e,t)}_cloneNeighbor({start:e,end:t,direction:s,isOriginalDirection:n}){return{start:_t(M(),e),end:t!=null?_t(M(),t):null,direction:_t(M(),s),isOriginalDirection:n}}};const Os=go(15),Ls=.001;var Bi,Dt;(function(i){i[i.XYZ=0]="XYZ",i[i.XY=1]="XY"})(Bi||(Bi={})),function(i){i[i.IMMEDIATE=0]="IMMEDIATE",i[i.DEFERRED=1]="DEFERRED"}(Dt||(Dt={}));let ol=class Sn{constructor(e,t,s=ge.CUMULATIVE){this.origin=e,this.angle=t,this._accumulationType=s}_rotate(e,t){Gr(e.pos,e.pos,this.origin,t)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof Sn&&Gt(this.origin,e.origin)}accumulate(e,t){const s=t._accumulationType===ge.REPLACE;this._rotate(e,s?t.angle-this.angle:t.angle)}accumulateParams(e){const t=e._accumulationType===ge.REPLACE;this.angle=t?e.angle:this.angle+e.angle}},rl=class Cn{constructor(e,t,s,n,o=ge.CUMULATIVE){this.origin=e,this.axis1=t,this.factor1=s,this.factor2=n,this._accumulationType=o,this.axis2=Jt(t[1],-t[0])}_scale(e,t,s){fs(e.pos,e.pos,this.origin,this.axis1,t),fs(e.pos,e.pos,this.origin,this.axis2,s)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof Cn&&Gt(this.origin,e.origin)&&Gt(this.axis1,e.axis1)}accumulate(e,t){t._accumulationType===ge.REPLACE?this._scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this._scale(e,t.factor1,t.factor2)}accumulateParams(e){const t=e._accumulationType===ge.REPLACE;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}},al=class $n{constructor(e,t){this._editGeometry=e,this._newPositions=t}apply(){const e=this._originalPositions==null?"apply":"redo";if(!this._originalPositions){const t=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map(s=>t.clone(s.pos))}this._apply(e,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(e){return e instanceof $n&&(this._newPositions=e._newPositions,this._apply("apply",this._newPositions),!0)}_apply(e,t){const s=this._editGeometry.coordinateHelper,n=this._editGeometry.allVertices;for(let o=0;o<n.length;o++)s.copy(t[o],n[o].pos);this._editGeometry.components.forEach(o=>o.unnormalizeVertexPositions()),this._editGeometry.notifyChanges({operation:e,updatedVertices:n})}};var Pn;const ll=Symbol();let cl=class{constructor(e){this._operations=[],this._closed=!1,this[Pn]=!0,e&&(this._operations=e,this._closed=!0)}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const t=this._operations.length?this._operations[this._operations.length-1]:null;return t&&t.accumulate(e)||(this._operations.push(e),e.apply()),!0}};Pn=ll;let Ni=class Vn extends Ne{constructor(e,t){super(),this.data=e,this.viewingMode=t,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",s=>{s.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:s.addedVertices,operation:s.operation}),s.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:s.removedVertices,operation:s.operation}),s.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:s.updatedVertices,operation:s.operation})})}destroy(){this._listener.remove()}splitEdge(e,t){return this._apply(new el(this.data,e,t))}updateVertices(e,t,s=te.ACCUMULATE_STEPS){return this._apply(new Ja(this.data,e,t),s)}move(e,t,s,n=te.ACCUMULATE_STEPS){return Pt(this.data)?this._apply(new Vs(this.data,e,t,s),n):this.moveVertices(this.data.allVertices,e,t,s,n)}moveVertices(e,t,s,n,o=te.ACCUMULATE_STEPS){return Pt(this.data)?this._apply(new Vs(this.data,t,s,n),o):this.updateVertices(e,new sl(this.data.coordinateHelper,t,s,n),o)}scale(e,t,s,n,o=te.ACCUMULATE_STEPS,r=ge.CUMULATIVE){return this.scaleVertices(this.data.allVertices,e,t,s,n,o,r)}scaleVertices(e,t,s,n,o,r=te.ACCUMULATE_STEPS,c=ge.CUMULATIVE){return this.updateVertices(e,new rl(t,s,n,o,c),r)}rotate(e,t,s=te.ACCUMULATE_STEPS,n=ge.CUMULATIVE){return this.rotateVertices(this.data.allVertices,e,t,s,n)}rotateVertices(e,t,s,n=te.ACCUMULATE_STEPS,o=ge.CUMULATIVE){return this.updateVertices(e,new ol(t,s,o),n)}removeVertices(e){return this._apply(new Qa(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return this.data.components.length===0?null:this._apply(new Ya(this.data,this.data.components[0],e))}setVertexPosition(e,t){return this._apply(new tl(this.data,e,t))}offsetEdge(e,t,s,n=te.ACCUMULATE_STEPS){return this.updateVertices([t.leftVertex,t.rightVertex],new nl(this.data.coordinateHelper,e,t,s),n)}trySetGeometry(e,t=te.ACCUMULATE_STEPS){const{data:s}=this,{coordinateHelper:n}=s;if(s.type!==e.type||!s.spatialReference.equals(e.spatialReference)||n.hasZ()!==e.hasZ||n.hasM()!==e.hasM||!yo(s.geometry,e)||Pt(s))return;const o=Array.from(Hi.fromGeometry(e,this.viewingMode).iterateVertices(),r=>r.pos);return this.setVertexPositions(o,t)}setVertexPositions(e,t=te.ACCUMULATE_STEPS){return this._apply(new al(this.data,e),t)}createResetState(){if(Pt(this.data))return this._createResetStateMesh();const e=this.data.geometry.clone();return st(()=>this.trySetGeometry(e))}closeComponent(e){return this.data.components.includes(e)?this._apply(new il(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new cl;return this._apply(e),st(()=>e.close())}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,t=te.ACCUMULATE_STEPS){return t!==te.NEW_STEP&&this.lastOperation!=null&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}_createResetStateMesh(){if(!Pt(this.data))return st();const e=this.data.geometry,{vertexSpace:t}=e;if(t.origin){const n=mo(t.origin);return st(()=>{e.vertexSpace.origin=n})}const s=e.vertexAttributes.clonePositional();return st(()=>{e.vertexAttributes=s,e.vertexAttributesChanged()})}static fromGeometry(e,t){return new Vn(Hi.fromGeometry(e,t),t)}};function ei(i,e){return i===e||i!=null&&e!=null&&Ws(i.spatialReference,e.spatialReference)&&i.x===e.x&&i.y===e.y&&i.z===e.z&&i.m===e.m}function $i(i,e,t){return i===e||i!=null&&e!=null&&Ws(i.spatialReference,e.spatialReference)&&Ft(i.x,e.x,t)&&Ft(i.y,e.y,t)&&Ft(i.z??0,e.z??0,t)&&Ft(i.m??0,e.m??0,t)}var nt;(function(i){i[i.WhenToolEditable=0]="WhenToolEditable",i[i.WhenToolNotEditable=1]="WhenToolNotEditable",i[i.Always=2]="Always"})(nt||(nt={}));let pl=class{constructor(){this._isToolEditable=!0,this._manipulators=new Se,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,t=nt.WhenToolEditable){this.addMany([e],t)}addMany(e,t=nt.WhenToolEditable){for(const s of e){const n={manipulator:s,visibilityPredicate:t,attached:!1};this._manipulators.add(n),this._attached&&this._updateManipulatorAttachment(n)}}remove(e){for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.at(t).manipulator===e){const s=this._manipulators.splice(t,1)[0];this._detachManipulator(s);break}}removeAll(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._manipulators.removeAll()}attach(){this._manipulators.forEach(e=>{this._updateManipulatorAttachment(e)}),this._attached=!0}detach(){this._manipulators.forEach(e=>{this._detachManipulator(e)}),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach(({manipulator:e})=>e.destroy()),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,s=>{t(s)})}forEach(e){for(const t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach(t=>e.push(t.manipulator)),e}intersect(e,t){let s=null,n=Number.MAX_VALUE;return this._manipulators.forEach(({manipulator:o,attached:r})=>{if(!r||!o.interactive)return;const c=o.intersectionDistance(e,t);c!=null&&c<n&&(n=c,s=o)}),s}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===nt.Always||(this._isToolEditable?e.visibilityPredicate===nt.WhenToolEditable:e.visibilityPredicate===nt.WhenToolNotEditable)}},q=class extends ce{constructor(e){super(e),this.manipulators=new pl,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[qe.MANAGER,!0],[qe.USER,!0]]),this._creationFinishedResolver=_o()}get active(){return this.view!=null&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(qe.USER)}set editable(e){this.setEditableFlag(qe.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){this.view!=null&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===qe.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}endDrag(){const e=this.view.inputManager.latestPointerLocation;if(!e)return;let t=!1;this.manipulators.forEach(({manipulator:s})=>{s.dragging&&(t=!0,s.events.emit("drag",{action:"end",start:e,screenPoint:e}))}),t&&(this.view.toolViewManager.activeTool=null)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(qe.USER)&&this.getEditableFlag(qe.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized){if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};a([l({constructOnly:!0})],q.prototype,"view",void 0),a([l({readOnly:!0})],q.prototype,"active",null),a([l({value:!0})],q.prototype,"visible",null),a([l({value:!0})],q.prototype,"editable",null),a([l({readOnly:!0})],q.prototype,"manipulators",void 0),a([l({readOnly:!0})],q.prototype,"updating",null),a([l()],q.prototype,"cursor",null),a([l({readOnly:!0})],q.prototype,"automaticManipulatorSelection",void 0),a([l()],q.prototype,"hasFocusedManipulators",null),a([l()],q.prototype,"hasGrabbedManipulators",void 0),a([l()],q.prototype,"hasHoveredManipulators",void 0),a([l()],q.prototype,"firstGrabbedManipulator",void 0),a([l({readOnly:!0})],q.prototype,"created",void 0),a([l({readOnly:!0})],q.prototype,"removeIncompleteOnCancel",void 0),q=a([O("esri.views.interactive.InteractiveToolBase")],q);function dl(i,e){let t=null,s=null;return n=>{if(n.action==="cancel")return void(s!=null&&(s.execute({action:"cancel"}),t=null,s=null));const o={action:n.action,screenStart:n.start,screenEnd:n.screenPoint};n.action==="start"&&t==null&&(t=new Zi,s=new Zi,e(i,t,s,n.pointerType,o)),t?.execute(o),n.action==="end"&&t!=null&&(t=null,s=null)}}function Pi(i,e){return i.events.on("drag",dl(i,e))}function Ip(i,e){const t=[i.x,i.y,i.z??0],s=e,n=[Math.cos(s),Math.sin(s)],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(o===0)return null;n[0]/=o,n[1]/=o;const r=c=>{const p=(c.x-t[0])*n[0]+(c.y-t[1])*n[1];c.x=t[0]+p*n[0],c.y=t[1]+p*n[1]};return c=>(r(c.mapStart),r(c.mapEnd),{...c,axis:n})}function hl(i){let e=null;return t=>{if(t.action==="start"&&(e=ul(i,t.mapStart.spatialReference)),e==null)return null;const s=t.mapEnd.x-t.mapStart.x,n=t.mapEnd.y-t.mapStart.y,o=(t.mapEnd.z??0)-(t.mapStart.z??0);return e.move(s,n,o,t.action),{...t,translationX:s,translationY:n,translationZ:o}}}function ks(i,e){return i==null?null:i.spatialReference.equals(e)?i.clone():oi(i,e)}function ul(i,e){const t=i.operations;if(!t)return null;const s=t.data.geometry,n=Wr(e);if(s.spatialReference.equals(n))return Vi(i,t,()=>{});if(s.type!=="mesh"){const o=ks(s,n);if(o==null)return null;const r=s.spatialReference;return Vi(i,Ni.fromGeometry(o,t.viewingMode),()=>{const c=oi(s,r);t.trySetGeometry(c)})}if(Ur(s)){const o=ks(s.origin,n);if(!o)return null;const r=s.spatialReference,c=Ni.fromGeometry(o,t.viewingMode);return Vi(i,t,()=>{const p=oi(c.data.geometry,r),d=p.x-s.origin.x,h=p.y-s.origin.y,u=(p.z??0)-(s.origin.z??0);t.move(d,h,u)})}return null}function Vi(i,e,t){let s=0,n=0,o=0;return{move:(r,c,p,d)=>{d==="start"&&(s=0,n=0,o=0);const h=r-s,u=c-n,y=p-o;e.move(h,u,y),s+=h,n+=u,o+=y,t(),d==="end"&&i.endInteraction?.()}}}function Dp(i,e=null,t){let s=null;const n=e==null||i.spatialReference?.equals(e)?r=>r:r=>r!=null?oi(r,e):r,o={exclude:[],...t};return r=>{if(r.action==="start"&&(s=n(i.toMap(r.screenStart,o))),s==null)return null;const c=n(i.toMap(r.screenEnd,o));return c!=null?{...r,mapStart:s,mapEnd:c}:null}}function Ap(i){const e=i.map(t=>hl(t)).filter(le);return t=>{const s=t.mapEnd.x-t.mapStart.x,n=t.mapEnd.y-t.mapStart.y,o=t.mapEnd.z-t.mapStart.z;return e.forEach(r=>r(t)),{...t,translationX:s,translationY:n,translationZ:o}}}function gl(i){const e=i.operations?.createResetState();return t=>(e?.remove(),t)}function Gp(i){const e=i.map(t=>gl(t)).filter(t=>t!=null);return t=>(e.forEach(s=>s(t)),t)}function zp(){let i=0,e=0,t=0;return s=>{s.action==="start"&&(i=s.mapStart.x,e=s.mapStart.y,t=s.mapStart.z);const n=s.mapEnd.x-i,o=s.mapEnd.y-e,r=s.mapEnd.z-t;return i=s.mapEnd.x,e=s.mapEnd.y,t=s.mapEnd.z,{...s,mapDeltaX:n,mapDeltaY:o,mapDeltaZ:r,mapDeltaSpatialReference:s.mapStart.spatialReference}}}function Hp(){let i=0,e=0;return t=>{t.action==="start"&&(i=t.screenStart.x,e=t.screenStart.y);const s=t.screenEnd.x-i,n=t.screenEnd.y-e;return i=t.screenEnd.x,e=t.screenEnd.y,{...t,screenDeltaX:s,screenDeltaY:n}}}function Fp(i,e){let t=null,s=0,n=0;return o=>{if(o.action==="start"&&(t=i.toScreen?.(e),t!=null&&(t.x<0||t.x>i.width||t.y<0||t.y>i.height?t=null:(s=o.screenStart.x-t.x,n=o.screenStart.y-t.y))),t==null)return null;const r=Ri(o.screenEnd.x-s,0,i.width),c=Ri(o.screenEnd.y-n,0,i.height),p=li(r,c);return o.screenStart=t,o.screenEnd=p,o}}const yl=()=>{};let Zi=class On{constructor(){this.execute=yl}next(e,t=new On){return e!=null&&(this.execute=s=>{const n=e(s);n!=null&&t.execute(n)}),t}};function ml(i,e,t=[]){if(i.type==="2d")return n=>n;let s=null;return n=>{n.action==="start"&&(s=i.toMap(n.screenStart,{exclude:t}),s!=null&&(s.z=ni(s,i,e)));const o=i.toMap(n.screenEnd,{exclude:t});o!=null&&(o.z=ni(o,i,e));const r=s!=null&&o!=null?{sceneStart:s,sceneEnd:o}:null;return{...n,scenePoints:r}}}function Rs(i,e,t){const s=e.elevationProvider.getElevation(i.x,i.y,i.z??0,i.spatialReference,"scene")??0,n=ci(i);return n.z=s,n.hasZ=!0,n.z=ni(n,e,t),n}function Bp(i,e){if(i.type==="2d")return s=>s;let t=null;return s=>{s.action==="start"&&(t=Rs(s.mapStart,i,e));const n=Rs(s.mapEnd,i,e),o=t!=null&&n!=null?{sceneStart:t,sceneEnd:n}:null;return{...s,scenePoints:o}}}let Ui=class{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}},Ye=class extends ce{constructor(e){super(e),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=qi(async(t,s,n,o)=>{const r=this._frameTask;if(r==null)return;const c=await r.schedule(()=>s.snap({...t,context:n,signal:o}),o);c.valid&&await r.schedule(()=>{this.stagedPoint=c.apply(),t!==this._snapPoints&&this._snapPoints!=null&&(this.stagedPoint=s.update({...this._snapPoints,context:n}))},o)})}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){const e=this.view.type==="3d"?this.view?.resourceController?.scheduler:null;this._frameTask=e!=null?e.registerTask(mn.SNAPPING):_n}destroy(){this._abortController=Ii(this._abortController),this._frameTask=at(this._frameTask)}update(e,t,s){this._snapPoints=e;const{point:n,scenePoint:o}=e,r=t.update({point:n,scenePoint:o,context:s});return this.stagedPoint=r,r}async snap(e,t,s){const{point:n,scenePoint:o}=e;return this.stagedPoint=t.update({point:n,scenePoint:o,context:s}),this._snapPoints=e,this._abortController==null&&(this._abortController=new AbortController),this._snap(e,t,s,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,t){this._snapPoints!=null&&await this.snap(this._snapPoints,e,t)}abort(){this._abortController=Ii(this._abortController),this._snapPoints=null}};a([l({constructOnly:!0})],Ye.prototype,"view",void 0),a([l()],Ye.prototype,"stagedPoint",null),a([l()],Ye.prototype,"constrainResult",void 0),a([l()],Ye.prototype,"_stagedPoint",void 0),Ye=a([O("esri.views.interactive.snapping.SnappingOperation")],Ye);function Is(i){let e,t,s=[],n=!1;function o(...r){return n&&e===this&&_l(r,s)||(t=i.apply(this,r),e=this,s=r,n=!0),t}return o}function _l(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(i[t]!==e[t])return!1;return!0}const Ln="click";let vl=class{constructor({consumesClicks:e,grabbableForEvent:t}){this.events=new Ne,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=t}destroy(){}intersectionDistance(e,t){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}};function Wp(i,e,t,s,n,o){let r="geodesic",c=ta(t);const p=Tt();return Qi(i,e,s,p),p[2]=0,c&&pi(p,t,p,c)||(r="euclidean",c=t),{mode:r,view:e,elevationInfo:s,hasZ:n,directionMode:o,spatialReference:i.spatialReference,measurementSR:c,origin:p}}function fl(i,e,t){if(e==null||i==null)return;const s=fo(t.measurementSR);if(s==null)return;const n=hi(i,t);if(n==null)return;const o=is(e,s);return new ur(n,o)}function wl(i,e,t,s){if(t==null||i==null)return;const n=hi(i,s);if(n==null)return;const o=wt(t),r=10,c=d=>{if(d==null)return;const h=Tt(),u=Qr(d,"degrees","geographic");return yr(h,n,s.measurementSR,r,u,s.mode)?new mr(n,h):void 0},p=()=>{if(e!=null&&i!=null)return wt(on(e,i))};switch(s.directionMode){case ft.Absolute:return c(o);case ft.Relative:{const d=p();return d==null?void 0:c(d+o)}case ft.RelativeBilateral:{const d=p();return d==null?void 0:nn([c(d+o),c(d-o)])}}}function kn(i,e){const t=ui(i,e);return t!=null?new gr(t):void 0}function Rn(i,e,t){const{context:s,longitude:n,latitude:o,direction:r,distance:c,elevation:p}=t;if(n!=null||o!=null||c!=null||p!=null||r!=null){if(n!=null||o!=null){const d=wt(n),h=wt(o),u=ui(p,s);return new sn(d,h,u)}return bl(i,e,t)}}function bl(i,e,{context:t,direction:s,distance:n,elevation:o}){if(e==null)return kn(o,t);const{view:r,elevationInfo:c,measurementSR:p}=t,d=Qi(e,r,c);if(!p||!pi(d,e.spatialReference,Ds,p))return;const[h,u]=Ds,y=n!=null?is(n,"meters"):void 0,_=wt(s),v=ui(o,t),S=A=>{const Z=new _r([h,u],p,y,v,A);return y==null||A==null||v==null&&t.hasZ?Z:new vr(Z.closestTo(d))};if(_==null)return S(void 0);const z=()=>{if(i!=null&&e!=null)return wt(on(i,e))};switch(t.directionMode){case ft.Absolute:return S(_);case ft.Relative:{const A=z();return A==null?void 0:S(A+_)}case ft.RelativeBilateral:{const A=z();return A==null?void 0:nn([S(A+_),S(A-_)])}}}function Tl(i){return i.context.mode==="geodesic"?Rn(null,null,i):In(i)}function xl(i,e,t){const{context:s,x:n,y:o,distance:r,direction:c,elevation:p}=t;return s.mode==="geodesic"?Rn(e,i,t):n!=null||o!=null?In(t):El([fl(i,r,s),wl(i,e,c,s),kn(p,s)])}function In({x:i,y:e,elevation:t,context:s}){Wt.x=i?.value??0,Wt.y=e?.value??0,Wt.spatialReference=s.spatialReference;const n=hi(Wt,s,Cl);return new sn(i!=null&&n!=null?n[0]:void 0,e!=null&&n!=null?n[1]:void 0,ui(t,s))}function El(i){let e;for(const t of i)t&&(e=e?.intersect(t)??t);return e}function hi(i,e,t=Tt()){const{view:s,elevationInfo:n,measurementSR:o,origin:r,mode:c}=e;if(Qi(i,s,n,t),pi(t,i.spatialReference,t,o))return c!=="geodesic"&&yn(t,t,r),t}function Ml(i,e,t,s){const{view:n,measurementSR:o,spatialReference:r,origin:c,mode:p}=t;if(p==="geodesic"?_t(Vt,i):mt(Vt,i,c),pi(Vt,o,Vt,r))return dr(Vt,n,e,t,s)}function ui(i,e){return Sl(i,e)?.value??void 0}function Sl(i,{view:e,origin:t,elevationInfo:s,hasZ:n,measurementSR:o}){if(i==null||!n)return;const r=vo(o);if(r==null)return;const[c,p]=t,d=is(i,r),h=e?.type==="3d"?hr(e,c,p,d,o,s):d;return h!=null?Jr(h,r):void 0}const Ds=Tt(),Cl=Tt(),Vt=Tt(),Wt=ss(0,0,0,At.WGS84);function $l({predicate:i=()=>!0,snappingManager:e,snappingContext:t,updatingHandles:s,useZ:n=!0}){const o=new Zi;if(e==null)return{snappingStep:[As,o],cancelSnapping:As};let r,c=null,p=null,d=null;const h=()=>{c=Ii(c),e.doneSnapping(),p?.frameTask.remove(),p=null,r=at(r),d=null},u=Pl(e,n,o);let y=null,_=null,v=null;return{snappingStep:[S=>{if(!i(S))return S;const{action:z}=S;if(z==="start"){const{info:A}=S,Z=Vl(e.view);if(p=Ol(t,S,Z),p.context.selfSnappingZ=null,!n&&A!=null){const ye=kl(t.coordinateHelper,A.handle.component);ye!=null&&(p.context.selfSnappingZ={value:ye,elevationInfo:t.elevationInfo??fr})}}if(p!=null){const{context:A,originalScenePos:Z,originalPos:ye}=p,{mapEnd:Le,mapStart:Ue,scenePoints:pe}=S,ke=Dn(ye,Wi(Le,Ue)),We=Wi(Ue,ye),mi={...S,action:"update"},m=p.context,b=Ll(Z,pe),P=e.update({point:ke,scenePoint:b,context:A});if(v=P,An(Le,P,We,n),y=ke,_=b,z!=="end"){const{frameTask:I}=p;c==null&&(c=new AbortController),d=G=>{s.addPromise(Fe(u({frameTask:I,event:mi,context:m,point:ke,scenePoint:b,delta:We,getLastState:()=>({point:y,scenePoint:_,updatePoint:G.forceUpdate?null:v})},c.signal)))},d({forceUpdate:!1}),r==null&&(r=k(()=>e.options.effectiveEnabled,()=>d?.({forceUpdate:!0})))}}return z==="end"&&h(),S},o],cancelSnapping:S=>(h(),S)}}function Pl(i,e,t){return qi(async({frameTask:s,point:n,scenePoint:o,context:r,event:c,delta:p,getLastState:d},h)=>{const u=await s.schedule(()=>i.snap({point:n,scenePoint:o,context:r,signal:h}),h);if(u.valid){let y=await s.schedule(()=>u.apply(),h);const _=d();_.point!=null&&n!==_.point&&(y=i.update({point:_.point,scenePoint:_.scenePoint,context:r})),_.updatePoint!=null&&ei(y,_.updatePoint)||(An(c.mapEnd,y,p,e),t.execute(c))}})}function Vl(i){return i.type==="3d"?i.resourceController.scheduler.registerTask(mn.SNAPPING):_n}function Ol(i,e,t){return{context:new Ui({editGeometryOperations:i.editGeometryOperations,elevationInfo:i.elevationInfo,pointer:i.pointer,vertexHandle:e.info!=null?e.info.handle:null,excludeFeature:i.excludeFeature,feature:i.feature,visualizer:i.visualizer}),originalPos:e.snapOrigin!=null?i.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:e.scenePoints!=null?e.scenePoints.sceneStart:null,frameTask:t}}function Dn(i,[e,t,s]){const n=ci(i);return n.x+=e,n.y+=t,n.hasZ&&(n.z+=s),n}function Ll(i,e){return i==null||e==null?null:Dn(i,Wi(e.sceneEnd,e.sceneStart))}function Wi(i,e){const t=i.hasZ&&e.hasZ?i.z-e.z:0;return[i.x-e.x,i.y-e.y,t]}function An(i,e,[t,s,n],o){i.x=e.x+t,i.y=e.y+s,o&&i.hasZ&&e.hasZ&&(i.z=e.z+n)}function kl(i,e){if(!i.hasZ())return null;const t=e.vertices;let s=null;for(const n of t){const o=i.getZ(n.pos);if(s!=null&&o!=null&&Math.abs(o-s)>1e-6)return null;s==null&&(s=o)}return s}function As(i){return i}const Rl="crosshair",Il="progress",Gs=Symbol(),zs=Symbol();let f=class extends Ne.EventedMixin(ce){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new Pr,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new Lr,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=Is(Tl),this._getPolylineOrPolygonConstraint=Is(xl),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new rn,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,e.elevationInfo==null&&(this.elevationInfo=wr(!!e.hasZ))}initialize(){const{geometryType:e,view:t}=this,s=t.spatialReference,n="viewingMode"in t.state?t.state.viewingMode:hn.Local,o=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=wn(this.hasZ,this.hasM,s),this._editGeometryOperations=new Ni(new Hi(o,this.coordinateHelper),n),this._snappingOperation=new Ye({view:t}),this.addHandles([k(()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint}),({stagedPoint:p,constraint:d},h)=>{const{snappingOptions:u}=this;if(u&&(u.forceDisabled=d!=null&&br(d)),h!=null&&p===h.stagedPoint&&d!==h.constraint)return this._onKeyboardBasedChange();this._processCursor(p??this._screenToMap(this._stagedScreenPoint))},{equals:(p,d)=>p.stagedPoint===d.stagedPoint&&wo(p.constraint,d.constraint)}),k(()=>this.view.viewpoint,(p,d)=>{p&&d&&Or(p,d)&&this._onKeyboardBasedChange()})]),this._activeComponent=new di(s,n),this._editGeometryOperations.data.components.push(this._activeComponent);const r=this.segmentLabels;r!=null&&(r.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles(k(()=>this.labelOptions.enabled,p=>{r.visible=p},It))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],p=>{const d=p.vertices.map(v=>({componentIndex:0,vertexIndex:v.index,coordinates:this.coordinateHelper.vectorToArray(v.pos)})),h=d.map(v=>v.coordinates),u=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getFirstVertex()?.pos)??null;ei(u,this.firstVertex)||(this.firstVertex=u);const y=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getLastVertex()?.pos)??null;ei(y,this.lastVertex)||(this.lastVertex=y);const _=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.edges.at(-1)?.leftVertex?.pos)??null;switch(ei(_,this.secondToLastVertex)||(this.secondToLastVertex=_),this._processCursor(this.cursorVertex),p.type){case"vertex-add":this.emit(p.type,{...p,added:h,vertices:d});break;case"vertex-update":this.emit(p.type,{...p,updated:h,vertices:d});break;case"vertex-remove":this.emit(p.type,{...p,removed:h,vertices:d})}}));const c=this._manipulator=new vl({consumesClicks:!1,grabbableForEvent:p=>this.drawingMode!=="click"||p.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1});this.manipulators.add(c),c.grabbable=e!=="point"&&e!=="multipoint",this.addHandles([c.events.on("immediate-click",p=>this._onImmediateClick(p)),c.events.on("immediate-double-click",p=>this._onImmediateDoubleClick(p)),k(()=>this.drawingMode,()=>{this.removeHandles(Gs),this.addHandles(this._createManipulatorDragPipeline(c),Gs)},It),k(()=>({effectiveCursor:this.effectiveCursor}),({effectiveCursor:p})=>{c.cursor=p},It)]),Tr(this,()=>{const p=this.view.inputManager.latestPointerType??"mouse",d=this._getSnappingContext(p);if(this.snappingManager!=null){const h=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,d);this._updatingHandles.addPromise(Fe(h))}})}destroy(){Me(this.segmentLabels),Me(this._snappingOperation),this._editGeometryOperations=Me(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:e,_manipulator:t}=this;return e!=null&&this._pointerDownStates.has(e)||t.grabbing||!t.interactive}get _snappingEnabled(){return this.snappingManager!=null&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return this.view.type==="3d"&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}get _constraint(){const{constraints:e,constraintsEnabled:t}=this;if(e&&t)switch(this.geometryType){case"point":case"multipoint":return this._getPointConstraint(e);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e)}}set drawingMode(e){this._set("drawingMode",e??Ln)}get effectiveCursor(){return this.loading?Il:this._hideDefaultCursor?null:this.cursor||Rl}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return this.snappingManager!=null?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return this._stagedPointerType==="mouse"?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:t,firstVertex:s,geometryType:n}=this;return n==="polygon"&&$i(e,s)||$i(e,t)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:t,coordinateHelper:s}=this,n=e.slice();return t!=null&&n.push(s.pointToArray(t)),n}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;e!=null&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){const t=e?.aborted||!1;this._snappingOperation.abort(),this.snappingManager?.doneSnapping();const{geometryType:s,numCommittedVertices:n}=this,o=s==="multipoint"&&n===0||s==="polyline"&&n<2||s==="polygon"&&n<3;s!=="segment"&&s!=="point"||this.commitStagedVertex(),this._createOperationCompleted=!o,(this.isCompleted||t)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map((r,c)=>({componentIndex:0,vertexIndex:c,coordinates:r})),aborted:t,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){this.snappingManager!=null&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){const t=Di(this.cursorVertex),s=Di(e),n=s&&(this._updateAndGetEffectiveDrawSurface()?.constrainZ(s)??s),o=this._snapToClosingVertex(n),r=this._applyConstraints(o);$i(t,r)||(this._set("cursorVertex",r),this.segmentLabels?.set("stagedVertex",r!=null?this.coordinateHelper.pointToVector(r):null),r==null||this._stagedPointerType!=="mouse"?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(r)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(e==null||this._isDragging||this.geometryType!=="polygon"||this.numCommittedVertices<=2)return e;const t=this._mapToScreen(e);if(!t)return e;const s=this._activeComponent;return this._vertexWithinPointerDistance(s.vertices[0].pos,t)?this.firstVertex:this._vertexWithinPointerDistance(s.vertices.at(-1).pos,t)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return Pi(e,(t,s,n,o)=>{const r=o==="touch"&&this._snappingEnabled;if(this.isCompleted||!r)return;const{snappingStep:c,cancelSnapping:p}=$l({predicate:()=>r,snappingManager:this.snappingManager,snappingContext:new Ui({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:o,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});n=n.next(d=>(r&&this.snappingManager!=null&&this.snappingManager.doneSnapping(),d)).next(p),s.next(this._screenToMapDragEventStep()).next(d=>(d.action==="start"&&(this._processCursor(d.mapStart),(this.geometryType==="segment"||r&&!this.numCommittedVertices)&&this.commitStagedVertex()),d)).next(ml(this.view,this.elevationInfo)).next(...c).next(d=>(r&&(this._processCursor(d.mapEnd),d.action==="end"&&this.commitStagedVertex()),d)).next(d=>(d.action==="end"&&(this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),d))})}_createManipulatorDragPipelineFreehand(e){return Pi(e,(t,s)=>{this.isCompleted||s.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(this._snappingOperation.abort(),this.committableVertex==null&&this._processCursor(n.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this._processCursor(n.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return n})})}_createManipulatorDragPipelineHybrid(e){return Pi(e,(t,s)=>{this.isCompleted||s.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),zs),this._processCursor(n.mapStart),this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this._processCursor(n.mapEnd),this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this._stagedPointerType!=="mouse"&&this._snappingOperation.abort(),this.removeHandles(zs),this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return n})})}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:t,geometryType:s,numCommittedVertices:n}=this;return e?t!=null||s==="segment"&&n>0:(s==="segment"||s==="polygon")&&n>0}_updateAndGetEffectiveDrawSurface(){const{constraintsEnabled:e,coordinateHelper:t,drawSurface:s,elevationDrawSurface:n,snapToSceneEnabled:o}=this;if(n==null)return s;if(!this.hasZ)return n.defaultZ=null,n;const r=this.elevationInfo?.mode;let c=this.defaultZ,p=e||r==="absolute-height";return o!=null&&(p=o),r==="on-the-ground"&&(p=!1),this._drawAtFixedElevation&&(c=(e?this.constraintZ:null)??t.getZ(this._activeComponent.vertices[0].pos),p=!1),p?s:(n.defaultZ=c,n)}_mapToScreen(e){return this._updateAndGetEffectiveDrawSurface()?.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging))try{const{drawingMode:t,geometryType:s}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const n=this._screenToMap(e.screenPoint);if(n==null||n==null||t==="freehand"&&s!=="point"&&s!=="multipoint")return;if(this._snappingEnabled&&this.cursorVertex!=null||this._processCursor(n),this.committableVertex==null)return void this.complete();this.commitStagedVertex(),e.pointerType!=="mouse"&&this._processCursor(null),(t==="freehand"&&this.geometryType!=="multipoint"||s==="point"||s==="segment"&&this.numCommittedVertices===2||s==="segment"&&t==="hybrid"&&this.numCommittedVertices===1)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=li(e.x,e.y);this._stagedScreenPoint=t,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId,this._isDragging?this._snappingOperation.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(t,e.pointerType))}_onKeyboardBasedChange(){this._stagedPointerType==="mouse"&&this._stagedScreenPoint&&this._stagedPointerId!=null&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,t){const s=this._snappingOperation,n=this._screenToMap(e),o=this._requiresScenePoint?this.drawSurface?.screenToMap(e):null;if(n==null)return this._hideDefaultCursor=!0,this._processCursor(null),void s.abort();this._hideDefaultCursor=!1;const r=this.snappingManager;if(r==null)return this._processCursor(n),void s.abort();const c=this._getSnappingContext(t);this._updatingHandles.addPromise(Fe(s.snap({point:n,scenePoint:o},r,c)))}_applyConstraints(e){const{_constraint:t,constraints:s}=this;if(!e||!s||!t)return e;const{context:n}=s,o=hi(e,n),r=o?t.closestTo(o):void 0;if(!r)return e;const c=Ml(r,e,n),p=this.view.type==="2d"||n.elevationInfo.mode!=="absolute-height";return c!=null&&p&&this.constraintZ!=null&&this.hasZ&&(c.z=this.constraintZ),c}_screenToMap(e){return e?this._updateAndGetEffectiveDrawSurface()?.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return t=>{if(t.action==="start"&&(e=this._screenToMap(t.screenStart)),e==null)return null;const s=this._screenToMap(t.screenEnd);return s!=null?{...t,mapStart:e,mapEnd:s}:null}}_vertexWithinPointerDistance(e,t){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return n!=null&&Dl(n,t,25)}_getSnappingContext(e){const t=this._drawAtFixedElevation?this.elevationDrawSurface?.defaultZ:null;return new Ui({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:t!=null?{value:t,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function Dl(i,e,t){const s=i.x-e.x,n=i.y-e.y;return s*s+n*n<=t}a([l()],f.prototype,"_hideDefaultCursor",void 0),a([l()],f.prototype,"_stagedPointerId",void 0),a([l()],f.prototype,"_isDragging",null),a([l()],f.prototype,"_snappingOperation",void 0),a([l()],f.prototype,"_snappingEnabled",null),a([l({constructOnly:!0})],f.prototype,"graphic",void 0),a([l()],f.prototype,"constraintsEnabled",void 0),a([l()],f.prototype,"constraints",void 0),a([l()],f.prototype,"_constraint",null),a([l()],f.prototype,"constraintZ",void 0),a([l()],f.prototype,"defaultZ",void 0),a([l()],f.prototype,"isDraped",void 0),a([l({value:Ln})],f.prototype,"drawingMode",null),a([l({constructOnly:!0})],f.prototype,"elevationDrawSurface",void 0),a([l({constructOnly:!0})],f.prototype,"elevationInfo",void 0),a([l({constructOnly:!0,type:rn})],f.prototype,"labelOptions",void 0),a([l({constructOnly:!0})],f.prototype,"geometryType",void 0),a([l({constructOnly:!0})],f.prototype,"hasM",void 0),a([l({constructOnly:!0})],f.prototype,"hasZ",void 0),a([l()],f.prototype,"cursor",void 0),a([l()],f.prototype,"effectiveCursor",null),a([l()],f.prototype,"loading",void 0),a([l({constructOnly:!0})],f.prototype,"manipulators",void 0),a([l({constructOnly:!0})],f.prototype,"drawSurface",void 0),a([l({constructOnly:!0})],f.prototype,"segmentLabels",void 0),a([l({constructOnly:!0})],f.prototype,"snappingManager",void 0),a([l({constructOnly:!0})],f.prototype,"snappingVisualizer",void 0),a([l()],f.prototype,"snapToSceneEnabled",void 0),a([l({readOnly:!0})],f.prototype,"cursorVertex",null),a([l({readOnly:!0})],f.prototype,"visualizationCursorVertex",null),a([l()],f.prototype,"committableVertex",null),a([l()],f.prototype,"firstVertex",void 0),a([l()],f.prototype,"lastVertex",void 0),a([l()],f.prototype,"secondToLastVertex",void 0),a([l()],f.prototype,"updating",null),a([l({constructOnly:!0})],f.prototype,"view",void 0),f=a([O("esri.views.draw.DrawOperation")],f);let Xp=class{constructor(e,t,s,n=null){this._elevationInfo=e,this.defaultZ=t,this._view=s,this._excludeGraphics=n}screenToMap(e){const{defaultZ:t,_view:s}=this,n=s.sceneIntersectionHelper.intersectElevationFromScreen(bo(e.x,e.y),this._elevationInfo,t??0,this._excludeGraphics);return t==null&&n!=null&&(n.z=void 0),n}mapToScreen(e){const t=ss(e.x,e.y,an(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}constrainZ(e){const{defaultZ:t}=this;return t!=null&&e.z!==t&&((e=ci(e)).z=t),e}},Kp=class{constructor(e,t,s=[]){this.view=e,this.elevationInfo=t,this.exclude=s}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude,excludeLabels:!0});return t!=null&&(t.z=ni(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return this.elevationInfo!=null&&(t=ss(e.x,e.y,an(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}constrainZ(e){return e}},Jp=class{constructor(e,t=!1,s=0){this.view=e,this.hasZ=t,this.defaultZ=s,this.mapToScreen=n=>e.toScreen(n),this.screenToMap=t?n=>{const o=e.toMap(n);return o.z=s,o}:n=>e.toMap(n)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=ci(e)).z=t),e}},ji=class Gn{screenToMap(e){const{x:t,y:s}=e;return new N({x:t,y:s,spatialReference:Gn.spatialReference})}mapToScreen(e){return li(e.x,e.y)}constrainZ(e){return e}};ji.spatialReference=new At;function ri(i,e,t=null){return t!=null?[i,e,t]:[i,e]}function R(i,e,t=null){return t!=null?{x:i,y:e,z:t}:{x:i,y:e}}let zn=class{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map(t=>this.mapToLocal(t)).filter(le)}get doUnnormalization(){return!1}};class Hn extends zn{constructor(e,t,s=null){super(t),this._defaultZ=s,this.transform=ms(),this.transformInv=ms(),this.transform=Cr(e),ia(this.transformInv,this.transform)}makeMapPoint(e,t){return ri(e,t,this._defaultZ)}mapToLocal(e){return R(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return ri(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}let Al=class extends zn{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=M(),this.tangentFrameUpWS=M(),this.tangentFrameRightWS=M(),this.tangentFrameForwardWS=M(),this.localFrameRightWS=M(),this.localFrameUpWS=M(),this.worldToLocalTransform=Ms(),this.localToWorldTransform=Ms(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const s=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Ti.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Ti.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Ti.Z,this.tangentFrameForwardWS);const n=M();Gi(n,this.tangentFrameForwardWS,Qt(s,this.tangentFrameForwardWS)),yn(this.localFrameRightWS,s,n),yt(this.localFrameRightWS,this.localFrameRightWS),gt(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),sa(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),na(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(e,t){return ri(e,t,this.defaultZ)}mapToLocal(e){const t=M();this.view.renderCoordsHelper.toRenderCoords(new N({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),Ts(t,t,this.worldToLocalTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(t,new N({spatialReference:this.view.spatialReference}));return s!=null?R(s.x/this.scale,s.y/this.scale):null}localToMap(e){const t=M();this.view.renderCoordsHelper.toRenderCoords(new N({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),Ts(t,t,this.localToWorldTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(t,new N({spatialReference:this.view.spatialReference}));return s!=null?ri(s.x,s.y,this.defaultZ):null}};function id(i,e){if(i.type==="2d")return new Hn(i.state.transform,i.spatialReference,e.length>2?e[2]:null);if(i.type==="3d"){const t=e.length>2?new N({x:e[0],y:e[1],z:e[2],spatialReference:i.spatialReference}):new N({x:e[0],y:e[1],spatialReference:i.spatialReference});return new Al(i,t)}return null}const Gl={absolute:"absolute-direction",relative:"relative-direction"},zl={hide:"hide",hideChildren:"hide-children"};function ai(i){return i?.listMode??void 0}function Hl(i){return i!=null&&"minScale"in i&&i.minScale!=null?i.minScale:void 0}function Fl(i){return i!=null&&"maxScale"in i&&i.maxScale!=null?i.maxScale:void 0}function Bl(i){if(!i)return"inherited";const e=Zl(Bn(i)?i.layer:i);return e!=null?e?"independent":"inherited":"visibilityMode"in i&&i.visibilityMode!=null?i.visibilityMode:"independent"}function Fn(i){if(i&&(!("type"in i)||i.type!=="wmts"))return"sublayers"in i?"sublayers":"layers"in i?"layers":void 0}function os(i){return ai(i)!==zl.hide}function Nl(i,e){if(!i||e==null||isNaN(e))return!1;const t=Hl(i),s=Fl(i),n=t!=null&&!isNaN(t)&&t>0&&e>t,o=s!=null&&!isNaN(s)&&s>0&&e<s;return n||o}function Hs(i){const e=i?.layer;return e&&"layers"in e?e.layers:null}function Bn(i){return i!=null&&"layer"in i&&i.layer!=null}function Zl(i){const e=Ul(i);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function Ul(i){return i&&"capabilities"in i&&i.capabilities!=null&&"exportMap"in i.capabilities?i.capabilities.exportMap:void 0}let K=class extends js.IdentifiableMixin(Oe){constructor(e,t){super(e,t),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([k(()=>this._canCreateLegend,()=>this._createLegend(),ue),k(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),ue)])}destroy(){this._legend=Me(this._legend)}get _canCreateLegend(){const{content:e,listItem:t}=this;if(!t)return!1;const s="legend";return e===s||e!=null&&!!Array.isArray(e)&&e.includes(s)}get _legendOptions(){const{listItem:e,_legendLayerInfo:t}=this,s=e?.view;return t&&s?{view:s,layerInfos:[t]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;const t=Bn(e)?e:null,s=e?.parent,n=s!=null&&"type"in s&&s.type==="map-image"?t?.source:null,o="";return n&&s?{layer:s,title:o,sublayerIds:[n.mapLayerId]}:{layer:e,title:o}}get disabled(){const{listItem:e,_legend:t,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return g("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:t,disabled:s,open:n}=this;return e&&!s&&n?e==="legend"&&t?g("div",{key:"legend-widget"},t.render()):typeof e=="string"?g("div",{innerHTML:e,key:e}):_s(e)?g("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?g("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:t}=this;return t?Array.isArray(e)?e.map(s=>this._renderContent(s)):this._renderContent(e):null}async _createLegend(){if(Me(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await x(()=>import("./Legend-mXJnKSbi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60]),import.meta.url),t=new e(this._legendOptions);this._legend=t}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:_s(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};a([l()],K.prototype,"_legend",void 0),a([l()],K.prototype,"_canCreateLegend",null),a([l()],K.prototype,"_legendOptions",null),a([l()],K.prototype,"_legendLayerInfo",null),a([l()],K.prototype,"className",void 0),a([l()],K.prototype,"content",void 0),a([l()],K.prototype,"disabled",null),a([l()],K.prototype,"flowEnabled",void 0),a([l()],K.prototype,"icon",null),a([l()],K.prototype,"image",void 0),a([l()],K.prototype,"listItem",void 0),a([l()],K.prototype,"open",void 0),a([l()],K.prototype,"title",null),a([l()],K.prototype,"visible",void 0),K=a([O("esri.widgets.LayerList.ListItemPanel")],K);const Nn=K;var Rt;const Wl=Se.ofType({key:"type",defaultKeyValue:"button",base:To,typeMap:{button:xo,toggle:Eo}}),Zn=Se.ofType(Wl),Oi="layer",jt="child-list-mode",jl="hide";let V=Rt=class extends js.IdentifiableMixin(ce){constructor(i){super(i),this.actionsSections=new Zn,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Se.ofType(Rt)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([k(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),ue),k(()=>this.checkPublishStatusEnabled,i=>this._updateChildrenPublishing(i),ue),k(()=>this.view,i=>this._updateChildrenView(i),ue),k(()=>this.panel,i=>this._setListItemOnPanel(i),ue)]),typeof this.listItemCreatedFunction=="function"){const i={item:this};this.listItemCreatedFunction.call(null,i)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:i,publishing:e}=this;if(!e&&i&&"connectionStatus"in i)return i.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:i}=this;return!(!i||!("spatialReferenceSupported"in i))&&!i.spatialReferenceSupported}get layerView(){const{layer:i,view:e}=this;if(!i||!e||i.type==="sublayer")return null;const t=i.type==="subtype-sublayer"?i.parent:i;return e.allLayerViews.find(s=>s.layer===t)??null}castPanel(i){return this.panel?.open&&!i.hasOwnProperty("open")&&(i.open=!0),i?new Nn(i):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(i){this._set("sortable",i)}get title(){const i=Bt(this,"layer.layer");return(!i||i&&Bt(this,"layer.layer.loaded"))&&Bt(this,"layer.title")||Bt(this,"layer.attributes.title")||""}set title(i){this._override("title",i)}get publishing(){const{layer:i,checkPublishStatusEnabled:e}=this;return!!(e&&i&&"publishingInfo"in i&&i.publishingInfo?.status==="publishing")}get updating(){const{layerView:i,connectionStatus:e,layer:t,publishing:s}=this;return!s&&!e&&(i?i.updating:t?.loadStatus==="loading"||!1)}get visible(){return!!this.layer?.visible}set visible(i){const e=this.layer;e&&(e.visible=i)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!Nl(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return Bl(this.layer)}clone(){return new Rt({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(i){i&&(i.listItem=this)}_updateChildrenPublishing(i){this.children?.forEach(e=>e.checkPublishStatusEnabled=i)}_updateChildrenView(i){const e=this.children;e&&e.forEach(t=>t.view=i)}_createChildren(i){const{listModeDisabled:e,children:t}=this,s=i.filter(n=>!t.some(o=>o.layer===n));t.addMany(this._createChildItems(s,e))}_destroyChildren(i){const{children:e}=this,t=e.filter(s=>!!s.layer&&!i.includes(s.layer));e.destroyMany(t)}_sortChildren(i){this.children.sort((e,t)=>i.indexOf(t.layer)-i.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(jt),this.children.destroyAll()}_watchChildLayerListMode(i){this.removeHandles(jt),this.listModeDisabled||this.addHandles(i.toArray().map(e=>k(()=>e.listMode,()=>this._compileChildren(i))),jt)}_compileChildren(i){const e=this.listModeDisabled?i:i?.filter(t=>ai(t)!==jl);i?.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(i)):this._destroyAllChildren()}_watchSublayerChanges(i){i&&this.addHandles(i.on("change",()=>this._compileChildren(i)),Oi)}_initializeChildLayers(i){this._compileChildren(i),this._watchSublayerChanges(i)}_createChildItems(i,e){return i.reverse().map(t=>e||os(t)?new Rt({layer:t,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(le)}_watchLayerProperties(i){if(this.removeHandles(Oi),this.removeHandles(jt),!i)return;if((!this.listModeDisabled&&ai(i))==="hide-children")return void this.children.destroyAll();const e=Fn(i);e&&this.addHandles(k(()=>i[e],t=>{i.hasOwnProperty(e)&&this._initializeChildLayers(t)},ue),Oi)}};a([l({type:Zn})],V.prototype,"actionsSections",void 0),a([l()],V.prototype,"actionsOpen",void 0),a([l()],V.prototype,"checkPublishStatusEnabled",void 0),a([l({type:Se.ofType(V)})],V.prototype,"children",void 0),a([l()],V.prototype,"childrenSortable",void 0),a([l({readOnly:!0})],V.prototype,"connectionStatus",null),a([l({readOnly:!0})],V.prototype,"error",null),a([l()],V.prototype,"hidden",void 0),a([l({readOnly:!0})],V.prototype,"incompatible",null),a([l()],V.prototype,"layer",void 0),a([l({readOnly:!0})],V.prototype,"layerView",null),a([l()],V.prototype,"listItemCreatedFunction",void 0),a([l({nonNullable:!0})],V.prototype,"listModeDisabled",void 0),a([l()],V.prototype,"open",void 0),a([l({type:Nn})],V.prototype,"panel",void 0),a([Xs("panel")],V.prototype,"castPanel",null),a([l()],V.prototype,"parent",void 0),a([l({value:!0})],V.prototype,"sortable",null),a([l()],V.prototype,"title",null),a([l({readOnly:!0})],V.prototype,"publishing",null),a([l({readOnly:!0})],V.prototype,"updating",null),a([l()],V.prototype,"view",void 0),a([l()],V.prototype,"visible",null),a([l({readOnly:!0})],V.prototype,"visibleAtCurrentScale",null),a([l({readOnly:!0})],V.prototype,"visibleAtCurrentTimeExtent",null),a([l({readOnly:!0})],V.prototype,"visibilityMode",null),V=Rt=a([O("esri.widgets.LayerList.ListItem")],V);const rs=V;let de=class extends ce{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};a([l({type:Boolean,nonNullable:!0})],de.prototype,"colorSelection",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"dynamicScaleToggle",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"gridEnabledToggle",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"numericInputs",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"gridSnapEnabledToggle",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"lineIntervalInput",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"outOfScaleWarning",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"placementButtons",void 0),a([l({type:Boolean,nonNullable:!0})],de.prototype,"rotateWithMapToggle",void 0),de=a([O("esri.widgets.support.GridControls.VisibleElements")],de);const Un=de;let he=class extends ce{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new Un({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};a([l({type:Boolean,nonNullable:!0})],he.prototype,"enabledToggle",void 0),a([l({type:Boolean,nonNullable:!0})],he.prototype,"featureEnabledToggle",void 0),a([l({type:Boolean,nonNullable:!0})],he.prototype,"gridEnabledToggle",void 0),a([l({type:Boolean,nonNullable:!0})],he.prototype,"header",void 0),a([l({type:Boolean,nonNullable:!0})],he.prototype,"layerList",void 0),a([l({type:Boolean,nonNullable:!0})],he.prototype,"gridControls",void 0),a([l({type:Un,nonNullable:!0})],he.prototype,"gridControlsElements",void 0),a([l({type:Boolean,nonNullable:!0})],he.prototype,"layerListToggleLayersButton",void 0),a([l({type:Boolean,nonNullable:!0})],he.prototype,"selfEnabledToggle",void 0),he=a([O("esri.widgets.support.SnappingControls.VisibleElements")],he);const gi=he,Wn=()=>Ze({icon:()=>x(()=>import("./index-BpMqcWId.js").then(i=>i.i),__vite__mapDeps([61,4,1,2,3,5,6,62,63]),import.meta.url),label:()=>x(()=>import("./index-BokFRLax.js"),__vite__mapDeps([64,4,1,2,3,5,6,65,62]),import.meta.url),switch:()=>x(()=>import("./index-19Ai-H2D.js"),__vite__mapDeps([66,4,1,2,3,5,6,67,62,68,69,70,65,71]),import.meta.url),tooltip:()=>x(()=>import("./index-BxsoyF9J.js"),__vite__mapDeps([72,4,1,2,3,5,6,67,73,62,74,75,76,77,78]),import.meta.url)}),Ot="esri-labeled-switch",Lt={label:`${Ot}__label`,labelContent:`${Ot}__label-content`,iconInfo:`${Ot}__icon_info`,iconWarning:`${Ot}__icon_warning`,tooltip:`${Ot}__tooltip`};function vt({checked:i,disabled:e,hint:t,key:s,label:n,onChange:o,hintIcon:r,hintKind:c}){return g("calcite-label",{class:Lt.label,disabled:e,key:s,layout:"inline-space-between",scale:"s"},t?g("div",{class:Lt.labelContent,key:"label-content"},g("div",null,n),g("calcite-icon",{class:c!=="warning"?Lt.iconInfo:Lt.iconWarning,icon:r??"information",id:s,scale:"s",tabIndex:0}),g("calcite-tooltip",{class:Lt.tooltip,overlayPositioning:"fixed",referenceElement:s},t)):n,g("calcite-switch",{checked:i,disabled:e,scale:"s",onCalciteSwitchChange:p=>o(p.currentTarget.checked)}))}let Je=class extends ce{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};a([l({type:Boolean,nonNullable:!0})],Je.prototype,"directionModePicker",void 0),a([l({type:Boolean,nonNullable:!0})],Je.prototype,"header",void 0),a([l({type:Boolean,nonNullable:!0})],Je.prototype,"labelsToggle",void 0),a([l({type:Boolean,nonNullable:!0})],Je.prototype,"tooltipsToggle",void 0),Je=a([O("esri.widgets.support.SketchTooltipControls.VisibleElements")],Je);const as=Je,kt="esri-sketch-tooltip-controls",Xt={base:kt,block:`${kt}__block`,blockContent:`${kt}__block-content`,hintIcon:`${kt}__hint-icon`,radioButtonLabelWrapper:`${kt}__radio-button-label-wrapper`};let Ae=class extends Oe{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new as,this.sketchOptions=new ln,this.viewType=void 0,this._onTooltipsEnabledChange=s=>{this.sketchOptions.tooltips.enabled=s},this._onLabelsEnabledChange=s=>{this.sketchOptions.labels.enabled=s},this._onDirectionModeChange=s=>{this.sketchOptions.values.directionMode=s.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([Ze({block:()=>x(()=>import("./index-BhE0Vv63.js"),__vite__mapDeps([79,80,4,1,2,3,5,6,75,81,82,67,63,62,61,83,73,74,69,70,71,76,84,85,78,86,87,88,89,90,91,92,77,93,94]),import.meta.url),label:()=>x(()=>import("./index-BokFRLax.js"),__vite__mapDeps([64,4,1,2,3,5,6,65,62]),import.meta.url),icon:()=>x(()=>import("./index-BpMqcWId.js").then(e=>e.i),__vite__mapDeps([61,4,1,2,3,5,6,62,63]),import.meta.url),"radio-button":()=>x(()=>import("./index-D16T1pax.js"),__vite__mapDeps([95,4,1,2,3,5,6,67,94,62,68,69,65,71]),import.meta.url),"radio-button-group":()=>x(()=>import("./index-C50DGh1N.js"),__vite__mapDeps([96,61,4,1,2,3,5,6,62,63,97,71,98]),import.meta.url)}),Wn()])}render(){const{label:e,visibleElements:t}=this,s=this._renderContent();return g("div",{"aria-label":e,class:this.classes(Xt.base,es.widget)},s?g("calcite-block",{class:Xt.block,heading:t.header?this.label:"",key:"content-block",label:this.label,open:!0},g("div",{class:Xt.blockContent,key:"content"},s)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:t}=this,s=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(le);return s.length===0?null:s}_renderTooltipsToggle(){const{messages:e,sketchOptions:t}=this;return g(vt,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:t}=this;return g(vt,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:t}=this,{directionMode:s}=t.values;return g("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,g("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:s,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",s,e.directionModeRelative),this._renderDirectionModeOption("absolute",s,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,s){return g("calcite-label",{key:e,layout:"inline",scale:"s"},g("calcite-radio-button",{checked:e===t,scale:"s",value:e}),g("div",{class:Xt.radioButtonLabelWrapper,key:"label-wrapper"},g("calcite-icon",{icon:Gl[e],scale:"s"}),s))}};a([l()],Ae.prototype,"label",null),a([l({type:as,nonNullable:!0})],Ae.prototype,"visibleElements",void 0),a([l(),Be("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Ae.prototype,"messages",void 0),a([l({nonNullable:!0,type:ln})],Ae.prototype,"sketchOptions",void 0),a([l({type:String})],Ae.prototype,"viewType",void 0),Ae=a([O("esri.widgets.support.SketchTooltipControls")],Ae);const Xl=Ae,_e={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},ql="hide",jn=Se.ofType(rs);let Te=class extends Ne.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new jn,this.view=null}initialize(){this.addHandles([k(()=>this.view?.ready===!0,()=>this._viewHandles(),ue),k(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),k(()=>Ss(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],_e.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,s,n){const o=e?.layer;if(!o||o.type==="subtype-sublayer"||o.type==="sublayer")return;const r=this.view?.map?.layers,c=t?Hs(t):r,p=s?Hs(s):r;if(!c||!p)return;const{operationalItems:d}=this,h=t?.children||d,u=s?.children||d,y=p.length-n;e.parent=s||null,h.remove(e),c.remove(o),u.includes(e)||u.add(e,y),p.includes(o)||p.add(o,y),this._compileList()}_createLayerViewHandles(e){this.removeHandles(_e.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),_e.layerViews)}_createMapLayerHandles(e){this.removeHandles(_e.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),_e.mapLayers)}_createListItem(e){const{view:t,listItemCreatedFunction:s,checkPublishStatusEnabled:n,listModeDisabled:o}=this;return new rs({checkPublishStatusEnabled:n,listModeDisabled:o,layer:e,listItemCreatedFunction:s,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(t=>ai(t)!==ql):void 0}_watchLayersListMode(e){this.removeHandles(_e.layerListMode),e&&!this.listModeDisabled&&this.addHandles(k(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),_e.layerListMode)}_compileList(){const e=this.view?.map?.layers,t=Ss(this.view)&&!this.view.inGeographicLayout?e?.filter(({type:n})=>n==="link-chart"):e;this._watchLayersListMode(t);const s=this._getViewableLayers(t);s?.length?(this._createNewItems(s),this._removeItems(s),this._sortItems(s)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach(s=>{t.some(n=>n.layer===s)||t.add(this._createListItem(s))})}_removeItems(e){const{operationalItems:t}=this,s=[];t.forEach(n=>{n&&e&&e.includes(n.layer)||s.push(n)}),t.destroyMany(s)}_sortItems(e){const{operationalItems:t}=this;t.sort((s,n)=>{const o=e.indexOf(s.layer),r=e.indexOf(n.layer);return o>r?-1:o<r?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([_e.mapLayers,_e.layerViews,_e.viewLayers]),e?.ready?this.addHandles([k(()=>this.view?.map?.allLayers,t=>this._createMapLayerHandles(t),ue),k(()=>this.view?.allLayerViews,t=>this._createLayerViewHandles(t),ue)],_e.viewLayers):this._removeAllItems()}};a([l()],Te.prototype,"checkPublishStatusEnabled",void 0),a([l()],Te.prototype,"listItemCreatedFunction",void 0),a([l({nonNullable:!0})],Te.prototype,"listModeDisabled",void 0),a([l({type:jn})],Te.prototype,"operationalItems",void 0),a([l({readOnly:!0})],Te.prototype,"state",null),a([l()],Te.prototype,"totalItems",null),a([l()],Te.prototype,"view",void 0),Te=a([O("esri.widgets.LayerList.LayerListViewModel")],Te);const Kl=Te,ls=i=>Yl(i)||Jl(i),Yl=i=>{if(!("type"in i))return!1;switch(i.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},Jl=i=>{const e=Fn(i);if(e!=null&&i.hasOwnProperty(e)&&i[e]!=null){for(const t of i[e])if(ls(t))return!0}return!1},ti=(i,e)=>e!=null&&i!=null&&(e.test(i.title)?"self":!!i.children.some(t=>ti(t,e)!==!1)&&"children");var Xi;let $e=Xi=class extends rs{constructor(i){super(i),this.children=new Se,this.parent=null}get enabled(){const{children:i}=this;if(i.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let e=!1,t=!1;for(const s of i){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?e=!0:s.enabled==="disabled"&&(t=!0),t&&e)return"indeterminate"}return t?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(i=>[i.layer?.id,...i.childLayerIds])}get featureSource(){const{layer:i,getFeatureSnappingSources:e}=this;return e().find(t=>t.layer===i)}_initializeChildLayers(i){if(!i)return;const e=i.filter(ls);super._initializeChildLayers(e)}_createChildItems(i){return i.map(e=>os(e)?new Xi({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(le).reverse()}};a([l()],$e.prototype,"enabled",null),a([l()],$e.prototype,"children",void 0),a([l()],$e.prototype,"childLayerIds",null),a([l()],$e.prototype,"featureSource",null),a([l({constructOnly:!0})],$e.prototype,"getFeatureSnappingSources",void 0),a([l()],$e.prototype,"parent",void 0),$e=Xi=a([O("esri.widgets.support.SnappingControls.SnappingListItem")],$e);let Qe=class extends Kl{constructor(){super(...arguments),this.featureSnappingSources=new Se}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>!e.children?.length)}_compileList(){const e=this.view?.map?.layers;if(!e)return;const t=e.filter(ls);this._watchLayersListMode(t);const s=this._getViewableLayers(t);s?.length?(this._createNewItems(s),this._removeItems(s),this._sortItems(s)):this._removeAllItems()}_createListItem(e){return new $e({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};a([l()],Qe.prototype,"featureSnappingSources",void 0),a([l()],Qe.prototype,"operationalItems",void 0),a([l()],Qe.prototype,"operationalItemsFlat",null),a([l()],Qe.prototype,"selectableItems",null),Qe=a([O("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Qe);let xe=class extends ce{constructor(e){super(e),this.layerListViewModel=new Qe,this.snappingOptions=new cn,this.view=null}initialize(){this.addHandles([k(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},ue),k(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:e,sources:t})=>{e.featureSnappingSources=t},ue)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>e.enabled==="enabled")}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>!e.enabled)}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter(e=>e.enabled==="enabled").length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach(s=>t?this.enableSnappingForLayer(s):this.disableSnappingForLayer(s))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:t})=>{const s=t?.id;e?this.enableSnappingForLayer(s):this.disableSnappingForLayer(s)})}enableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){const t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(const t of this.snappingOptions.featureSources)os(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){const t=this.layerListViewModel.operationalItemsFlat.find(n=>n.layer?.id===e)?.layer;if(!t)throw new Mo("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;const s=new xr({layer:t});return this.snappingOptions.featureSources.add(s),s}};a([l()],xe.prototype,"allLayersEnabled",null),a([l()],xe.prototype,"allLayersDisabled",null),a([l({constructOnly:!0})],xe.prototype,"layerListViewModel",void 0),a([l()],xe.prototype,"layersEnabledCount",null),a([l({type:cn,nonNullable:!0})],xe.prototype,"snappingOptions",void 0),a([l()],xe.prototype,"state",null),a([l()],xe.prototype,"view",void 0),xe=a([O("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],xe);const Ql=xe,ve="esri-snapping-controls",fe={base:ve,container:`${ve}__container`,item:`${ve}__item`,toggleBlock:`${ve}__toggle-block`,layerListBlock:`${ve}__layer-list-block`,layerList:`${ve}__layer-list`,layerListFilter:`${ve}__layer-list__filter`,layerListButton:`${ve}__layer-list__button`,layerListItem:`${ve}__layer-list__item`,layerListGroup:`${ve}__layer-list__group`,nestedContainer:`${ve}__nested-container`};let B=class extends Oe{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new gi,this._enableSnappingSwitchChange=r=>{this.snappingOptions.enabled=r},this._featureEnabledSwitchChange=r=>{this.snappingOptions.featureEnabled=r},this._gridEnabledSwitchChange=r=>{this.snappingOptions.gridEnabled=r,r&&this._startLoadGrid()},this._selfEnabledSwitchChange=r=>{this.snappingOptions.selfEnabled=r},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),Mr(r.target)};const{snappingOptions:s,view:n,viewModel:o}=e;this.viewModel=o??(this._defaultViewModel=new Ql({snappingOptions:s,view:n}))}normalizeCtorArgs(e){const{snappingOptions:t,view:s,viewModel:n,...o}=e;return o}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=Me(this._defaultViewModel))}loadDependencies(){return Promise.all([Ze({block:()=>x(()=>import("./index-BhE0Vv63.js"),__vite__mapDeps([79,80,4,1,2,3,5,6,75,81,82,67,63,62,61,83,73,74,69,70,71,76,84,85,78,86,87,88,89,90,91,92,77,93,94]),import.meta.url),button:()=>x(()=>import("./index-Dwbg_uEE.js"),__vite__mapDeps([99,80,4,1,2,3,5,6,75,81,61,62,63,67,92,68,69,65,71,86]),import.meta.url),input:()=>x(()=>import("./index-DKrP1gbq.js"),__vite__mapDeps([100,61,4,1,2,3,5,6,62,63,97,101,102,67,70,78,92,68,69,65,71,86,98,81]),import.meta.url),list:()=>x(()=>import("./index-CsjliMqD.js"),__vite__mapDeps([103,80,4,1,2,3,5,6,75,81,82,67,63,62,78,61,97,101,100,102,70,92,68,69,65,71,86,98,74,104]),import.meta.url),"list-item":()=>x(()=>import("./index-CJ2K66EU.js"),__vite__mapDeps([105,61,4,1,2,3,5,6,62,63,83,67,73,74,75,69,70,71,76,84,80,81,85,78,86,87,88,89,90,104,106]),import.meta.url),checkbox:()=>x(()=>import("./index-J0Tr8XFt.js"),__vite__mapDeps([107,4,1,2,3,5,6,67,62,68,69,70,65,71]),import.meta.url),loader:()=>x(()=>import("./index-K1CEfFML.js"),__vite__mapDeps([80,4,1,2,3,5,6,75,81]),import.meta.url)}),Wn()])}initialize(){this.addHandles(k(()=>this.view?.type==="2d"&&!!this.view.grid,e=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=e)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=Me(this._defaultViewModel)),this._set("viewModel",e))}render(){const{label:e}=this;return g("div",{"aria-label":e,class:this.classes(fe.base,es.widget)},g("div",{class:fe.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList(),this.view?.type==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:e,view:t}=this,s=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null,e.gridEnabledToggle&&t?.type==="2d"?this._renderGridEnabledToggle():null].filter(le),n=[e.enabledToggle?this._renderEnabledToggle():null,s.length>0?g("div",{class:fe.nestedContainer},s):null].filter(le);return n.length===0?null:g("calcite-block",{class:fe.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",label:this.label,open:!0},n)}_renderEnabledToggle(){return g(vt,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return g(vt,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return g(vt,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return g(vt,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:e,viewModel:t}=this,s=t.layerListViewModel.operationalItems.length>9?g("calcite-input",{class:fe.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:({currentTarget:{value:c}})=>{this._layerListFilter=c===""?null:new RegExp(c,"i")}}):null,n=this._secondaryElementsDisabled,o=this.layerListOpen&&!n,r=t.layerListViewModel.operationalItems?.find(c=>!!c.children.length);return g("calcite-block",{class:fe.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:o,onCalciteBlockToggle:c=>this.layerListOpen=c.currentTarget.open},s,this._renderToggleLayersButton(),g("calcite-list",{class:fe.layerList,displayMode:r?"nested":"flat",label:e?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderGridOptions(){const{view:e,visibleElements:t,snappingManager:s,snappingOptions:n,_openAndReady:o}=this,{gridEnabled:r,enabled:c}=n;(o||e?.type==="2d"&&e.grid)&&this._startLoadGrid();const p=this._gridLoadTask?.value,d=p&&e?.type==="2d"&&g(p,{snappingManager:s,snappingOptions:n,view:e,visibleElements:t.gridControlsElements});return g("calcite-block",{class:fe.layerListBlock,collapsible:!0,disabled:!r||!c,heading:this.messages.gridOptionsHeading,key:"grid-block",open:o,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},d??g("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){!this._gridLoadTask&&this.visibleElements.gridControls&&this.view?.type==="2d"&&(this._gridLoadTask=qs(async()=>(await x(async()=>{const{default:e}=await import("./GridControls-BipJdbF5.js");return{default:e}},__vite__mapDeps([108,2,1,3,5,109,110,47,48,49,31,111,4,6,112,16,113,114,115,116,12,117,11,118,119,120,121,38,122,123,124,125,126,127,128,129,57,130,131,13,9,10,132,27,133,134,135,136,137,138,39,139,140,141,59,142,143,144,145,146,147,148,149,150,36,151,152,153,154,155,156,157,45,34,35,158,159,160,51,161,162,163,164,165,42,166,167,168,169,170,53,171,60,172,173]),import.meta.url)).default))}_renderLayerListItemCollection(e){const t=this._layerListFilter;return e.map(s=>{switch(t?ti(s,t):null){case"children":{const n=s.children.filter(o=>ti(o,t)!==!1);return this._renderLayerListItemGroup(s,n)}case"self":case null:return this._renderLayerListItemOrGroup(s);case!1:return ti(s.parent,t)==="self"?this._renderLayerListItemOrGroup(s):null}}).toArray().filter(le)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:e},messages:t}=this,s=e?t.disableAllLayers:t.enableAllLayers;return g("calcite-button",{appearance:"transparent",class:fe.layerListButton,label:s,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},s)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);const{messages:{untitledLayer:t}}=this,s=e.title||t,n=()=>{this.viewModel.toggleSnappingForLayers([e.layer?.id],e.enabled!=="enabled")};return g("calcite-list-item",{class:fe.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:s,onCalciteListItemSelect:o=>{o.stopPropagation(),n()}},g("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:n}))}_renderLayerListItemGroup(e,t){const{messages:s}=this,{children:n,title:o}=e,r=o||s.untitledLayer,c=o&&o!==""?o:So(),p=!!t?.length,d=t??n,h=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")},u=d?.find(y=>!!y.children.length);return g("calcite-list-item",{class:fe.layerListGroup,key:c,label:r,open:p,onCalciteListItemSelect:y=>{y.stopPropagation(),h()}},g("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:h}),g("calcite-list",{displayMode:u?"nested":"flat",label:s?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(d)))}get _enabledToggleDisabled(){const e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};a([l()],B.prototype,"_defaultViewModel",void 0),a([l()],B.prototype,"_layerListFilter",void 0),a([l()],B.prototype,"_gridLoadTask",void 0),a([l()],B.prototype,"_openAndReady",null),a([l()],B.prototype,"label",null),a([l({type:Boolean,nonNullable:!0})],B.prototype,"layerListOpen",void 0),a([l({type:Boolean,nonNullable:!0})],B.prototype,"gridOptionsOpen",void 0),a([l(),Be("esri/widgets/support/SnappingControls/t9n/SnappingControls")],B.prototype,"messages",void 0),a([l(),Be("esri/t9n/common")],B.prototype,"messagesCommon",void 0),a([l()],B.prototype,"snappingOptions",null),a([l()],B.prototype,"snappingManager",void 0),a([l()],B.prototype,"view",null),a([l()],B.prototype,"viewModel",null),a([l({type:gi,nonNullable:!0})],B.prototype,"visibleElements",void 0),a([l()],B.prototype,"_enabledToggleDisabled",null),a([l()],B.prototype,"_secondaryElementsDisabled",null),B=a([O("esri.widgets.support.SnappingControls")],B);const ec=B;let ae=class extends ce{constructor(i){super(i),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};a([l({type:Boolean,nonNullable:!0})],ae.prototype,"point",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"polyline",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"polygon",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"rectangle",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"circle",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"multipoint",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"mesh",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"freehandPolyline",void 0),a([l({type:Boolean,nonNullable:!0})],ae.prototype,"freehandPolygon",void 0),ae=a([O("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],ae);let ot=class extends ce{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};a([l({nonNullable:!0})],ot.prototype,"rectangle-selection",void 0),a([l({nonNullable:!0})],ot.prototype,"lasso-selection",void 0),a([l({nonNullable:!0})],ot.prototype,"custom-selection",void 0),ot=a([O("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],ot);let J=class extends ce{constructor(e){super(e),this.createTools=new ae,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new ot,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new gi,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};a([l({type:ae,nonNullable:!0})],J.prototype,"createTools",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"directionModePicker",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"duplicateButton",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"deleteButton",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"selectionCountLabel",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"labelsToggle",void 0),a([l({type:ot,nonNullable:!0})],J.prototype,"selectionTools",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"settingsMenu",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"snappingControls",void 0),a([l({type:gi,nonNullable:!0})],J.prototype,"snappingControlsElements",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"tooltipsToggle",void 0),a([l({type:Boolean,nonNullable:!0})],J.prototype,"undoRedoMenu",void 0),J=a([O("esri.widgets.Sketch.VisibleElements")],J);const Q={groupSeparator:1,action:{s:32,m:48,l:64},splitButtonPart:{horizontal:{s:16,m:16,l:24},vertical:{s:16,m:24,l:40}}},Xn={splitButton:{horizontal:"chevron-down",vertical:"ellipsis"},overflow:"ellipsis"};function qn(i,e){return i.vnodeSelector===e?[i]:i.children?.flatMap(t=>qn(t,e))??[]}const cs=i=>{let e=class extends i{constructor(){super(...arguments),this.priority=0,this.scale="m",this.slot=void 0,this.lastActiveKey=null,this.layout="horizontal"}destroy(){this.measurementManager?.managedElements.remove(this),this.measurementManager=null}set measurementManager(t){const s=this._get("measurementManager");t!==s&&(s&&s.managedElements.remove(this),this._set("measurementManager",t),t?.managedElements.add(this))}set budgetedLength(t){this.budgetedLength!==t&&(this._set("budgetedLength",t),this.scheduleRender())}get actionChildren(){return this.children?.flatMap(t=>qn(t,"calcite-action"))??[]}get activeChildElement(){const t=this.actionChildren.find(s=>s.properties?.active===!0);return t?(this._set("lastActiveKey",t.properties?.key),t):this.lastActiveKey?this.actionChildren.find(s=>s.properties?.key===this.lastActiveKey):void 0}_handleClick(t){t?.dataset&&"dataset"in t&&t.dataset.actionKey&&(this.lastActiveKey=t.dataset.actionKey)}};return a([l()],e.prototype,"priority",void 0),a([l()],e.prototype,"measurementManager",null),a([l()],e.prototype,"budgetedLength",null),a([l()],e.prototype,"actionChildren",null),a([l()],e.prototype,"activeChildElement",null),a([l()],e.prototype,"scale",void 0),a([l()],e.prototype,"slot",void 0),a([l()],e.prototype,"lastActiveKey",void 0),a([l()],e.prototype,"layout",void 0),e=a([O("esri.widgets.Sketch.support.ResponsiveToolbar.ToolbarGroupBase")],e),e},Fs=Symbol("on-resize-handle-key");let et=class extends cs(Oe){constructor(i){super(i),this._measuredWidth=0,this._measuredHeight=0,this._measuredElement=null}destroy(){this._measuredElement=null}get lengthOptions(){return[this.layout==="horizontal"?this._measuredWidth:this._measuredHeight]}render(){return g("div",{afterCreate:i=>{this._measuredElement=i.firstElementChild,this.addHandles(Sr(this._measuredElement,()=>{this._measuredWidth=this._measuredElement?.clientWidth??0,this._measuredHeight=this._measuredElement?.clientHeight??0}),Fs)},afterRemoved:()=>this.removeHandles(Fs)},this.children)}};a([l()],et.prototype,"_measuredWidth",void 0),a([l()],et.prototype,"_measuredHeight",void 0),a([l()],et.prototype,"lengthOptions",null),a([l()],et.prototype,"_measuredElement",void 0),et=a([O("esri.widgets.Sketch.support.ResponsiveToolbar.MeasuredContentGroup")],et);const tc=et;let Ge=class extends cs(Oe){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return Ze({action:()=>x(()=>import("./index-KWI0Snmc.js"),__vite__mapDeps([85,80,4,1,2,3,5,6,75,81,61,62,63,78,67,69,71,86]),import.meta.url),"action-group":()=>x(()=>import("./index-Bis20zXv.js").then(e=>e.i),__vite__mapDeps([174,80,4,1,2,3,5,6,75,81,61,62,63,85,78,67,69,71,86,91,73,74,76,92,77,70,93,94]),import.meta.url),"action-menu":()=>x(()=>import("./index-CQrRSd4j.js").then(e=>e.i),__vite__mapDeps([93,80,4,1,2,3,5,6,75,81,61,62,63,85,78,67,69,71,86,91,73,74,76,92,77,70,94]),import.meta.url)})}get minimumLength(){const{actionChildren:e,scale:t}=this;return e.length?this.allowCollapse?Q.groupSeparator+Q.action[t]*Math.min(e.length,2):Q.groupSeparator+Q.action[t]*e.length:0}get lengthOptions(){const{actionChildren:e,scale:t,minimumLength:s,allowCollapse:n,priority:o}=this,r=[s];if(e.length<=2||!n||o<1)return r;for(let c=1;c<e.length-1;c++)r.push(s+Q.action[t]*c);return r}render(){if(!this.actionChildren.length)return g(dn,null,void 0);const{budgetedLength:e,actionChildren:t,activeChildElement:s,layout:n,slot:o,scale:r}=this,c=Math.floor(e/Q.action[r]),p=[],d=[];if(c>=t.length)p.push(...t);else{const h=s??p.at(0);if(p.push(...t.slice(0,c-1)),d.push(...t.slice(c-1)),h&&d.includes(h)){const[u]=d.splice(d.indexOf(h),1),y=p.pop();p.push(u),y&&d.unshift(y)}}return g("calcite-action-group",{key:"overflow-button-group",layout:n,onclick:h=>this._handleClick(h.target),slot:o},p.map(h=>this._renderManagedAction(h)),d.length>0?g("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},g("calcite-action",{icon:Xn.overflow,key:"split-button-dropdown-trigger",scale:r,slot:"trigger",text:this.messagesCommon.more}),d.map(h=>this._renderManagedAction(h))):void 0)}_renderManagedAction(e){return g("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};Ge.vnodeSelector="calcite-action-group",a([l()],Ge.prototype,"allowCollapse",void 0),a([l()],Ge.prototype,"minimumLength",null),a([l(),Be("esri/t9n/common")],Ge.prototype,"messagesCommon",void 0),a([l()],Ge.prototype,"lengthOptions",null),Ge=a([O("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],Ge);const ic=Ge;let ze=class extends ce{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new Se,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver(()=>{this._measure()})}get _sortedElements(){return[...this.managedElements].sort((i,e)=>e.priority-i.priority)}connect(i){this._resizeObserver.disconnect(),this.measuredElement=i,this._resizeObserver.observe(i),this._measure()}allocate(){const i=new Map,{availableLength:e,_sortedElements:t}=this;let s=0;for(const n of t){const o=n.lengthOptions[0];i.set(n,o),s+=o}for(const n of t)for(;s<e;){const o=i.get(n);if(!o)break;const r=n.lengthOptions.find(p=>p>o);if(!r)break;const c=s-o+r;if(c>e)break;i.set(n,r),s=c}for(const[n,o]of i)n.budgetedLength=o}_measure(){const i=this.measuredElement;this.availableLength=i?this.layout==="horizontal"?i.clientWidth??0:i.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};a([l()],ze.prototype,"measuredElement",void 0),a([l()],ze.prototype,"managedElements",void 0),a([l()],ze.prototype,"_sortedElements",null),a([l()],ze.prototype,"availableLength",void 0),a([l()],ze.prototype,"layout",void 0),ze=a([O("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],ze);const sc=ze,nc={base:"esri-split-button",splitButtonBase:"esri-split-button--split-part"};let tt=class extends cs(Oe){constructor(e){super(e),this.messagesCommon=null}loadDependencies(){return Ze({action:()=>x(()=>import("./index-KWI0Snmc.js"),__vite__mapDeps([85,80,4,1,2,3,5,6,75,81,61,62,63,78,67,69,71,86]),import.meta.url),"action-group":()=>x(()=>import("./index-Bis20zXv.js").then(e=>e.i),__vite__mapDeps([174,80,4,1,2,3,5,6,75,81,61,62,63,85,78,67,69,71,86,91,73,74,76,92,77,70,93,94]),import.meta.url),"action-menu":()=>x(()=>import("./index-CQrRSd4j.js").then(e=>e.i),__vite__mapDeps([93,80,4,1,2,3,5,6,75,81,61,62,63,85,78,67,69,71,86,91,73,74,76,92,77,70,94]),import.meta.url)})}get minimumLength(){const e=this.actionChildren;return e.length?e.length===1?Q.action[this.scale]+Q.groupSeparator:Q.action[this.scale]+Q.splitButtonPart[this.layout][this.scale]+Q.groupSeparator:0}get lengthOptions(){const{actionChildren:e,minimumLength:t,layout:s,scale:n,priority:o}=this;if(e.length<2||o<0)return[t];const r=Q.groupSeparator+Q.action[n]*e.length;return[Q.groupSeparator+Q.action[n]+Q.splitButtonPart[s][n],r]}render(){if(!this.actionChildren.length)return g(dn,null,void 0);const{actionChildren:e,minimumLength:t,budgetedLength:s,layout:n,slot:o}=this,r=e.length<2||s>t;return g("calcite-action-group",{key:"split-button-group",layout:n,onclick:c=>this._handleClick(c.target),slot:o},r?this._renderUnSplit():this._renderSplit())}_renderSplit(){const{activeChildElement:e,layout:t,actionChildren:s,scale:n,messagesCommon:o}=this,r=e??s.at(0);if(!r)return;const c=s.filter(p=>p!==r);return[this._renderManagedAction(r),g("calcite-action-menu",{key:"split-button-dropdown",label:o.more,overlayPositioning:"fixed",placement:t==="horizontal"?"bottom-end":"right-end"},g("calcite-action",{class:`${nc.splitButtonBase}--${t}--${this.scale}`,compact:t==="horizontal",icon:Xn.splitButton[t],key:"split-button-dropdown-trigger",scale:n,slot:"trigger",text:o.more}),c?.map(p=>this._renderManagedAction(p)))]}_renderUnSplit(){return this.actionChildren.map(e=>this._renderManagedAction(e))}_renderManagedAction(e){return g("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};tt.vnodeSelector="calcite-action-group",a([l()],tt.prototype,"minimumLength",null),a([l()],tt.prototype,"lengthOptions",null),a([l(),Be("esri/t9n/common")],tt.prototype,"messagesCommon",void 0),tt=a([O("esri.widgets.Sketch.support.ResponsiveToolbar.SplitButton")],tt);const we="esri-responsive-toolbar",be={rulerBase:`${we}__ruler`,rulerBarHorizontal:`${we}__ruler--bar`,rulerBarVertical:`${we}__ruler--bar--vertical`,rulerPadVertical:`${we}__ruler--pad--vertical`,rulerPadHorizontal:`${we}__ruler--pad--horizontal`,bar:`${we}__bar`,barHorizontal:`${we}__bar--horizontal`,barVertical:`${we}__bar--vertical`,pad:`${we}__pad`,padVertical:`${we}__pad--vertical`,padHorizontal:`${we}__pad--horizontal`};let He=class extends Oe{constructor(e){super(e),this.scale="m",this.barStyle="floating",this._measurementManager=new sc,this._managedWidgets=new Map}loadDependencies(){return Ze({"action-bar":()=>x(()=>import("./index-DV4IwRKk.js"),__vite__mapDeps([175,80,4,1,2,3,5,6,75,81,61,62,63,85,78,67,69,71,86,91,73,74,76,92,77,70,93,94,174,176]),import.meta.url),"action-pad":()=>x(()=>import("./index-DZnahuvr.js"),__vite__mapDeps([177,80,4,1,2,3,5,6,75,81,61,62,63,85,78,67,69,71,86,91,73,74,76,92,77,70,93,94,174,176]),import.meta.url)})}destroy(){this._measurementManager=Me(this._measurementManager),this._managedWidgets.forEach(e=>e.destroy()),this._managedWidgets.clear()}set layout(e){const t=this._get("layout");this._set("layout",e),this._measurementManager&&(this._measurementManager.layout=e),t!==e&&this.scheduleRender()}render(){const{layout:e,scale:t,barStyle:s}=this,n={layout:e,scale:t,expandDisabled:!0,key:"measured-toolbar"},o=s==="docked"?e==="vertical"?be.rulerBarVertical:be.rulerBarHorizontal:e==="horizontal"?be.rulerPadHorizontal:be.rulerPadVertical;return g("div",null,g("div",{afterCreate:r=>{this._measurementManager?.connect(r)},class:this.classes(be.rulerBase,o)}),s==="docked"?g("calcite-action-bar",{...n,classes:{[be.barHorizontal]:this.layout==="horizontal",[be.barVertical]:this.layout==="vertical",[be.bar]:!0},overflowActionsDisabled:!0},this._renderChildren()):g("calcite-action-pad",{...n,class:this.classes(be.pad,e==="horizontal"?be.padHorizontal:be.padVertical)},this._renderChildren()))}_renderChildren(){if(!this.children)return;const e=this.children.filter(n=>n.properties?.key!==void 0&&"group-kind"in n.properties),t=new Set,s=e.map(n=>{const o=n.properties,r=o.key;t.add(r);const c=this.barStyle==="docked"?o.slot??void 0:void 0,p=o.priority??0,d=o["group-kind"]??"overflow-group",h=o["allow-collapse"]??!0,u=this._managedWidgets.get(r);if(u)return u.children=n.children,u.priority=p,"allowCollapse"in u&&(u.allowCollapse=h),u.slot=c,u.layout=this.layout,u.scale=this.scale,u.measurementManager=this._measurementManager,u;const y={scale:this.scale,priority:p,measurementManager:this._measurementManager,children:n.children,slot:c,layout:this.layout};switch(d){case"split-button":{const _=new tt({...y});return this._managedWidgets.set(r,_),_}case"overflow-group":{const _=new ic({...y,allowCollapse:h});return this._managedWidgets.set(r,_),_}case"measured-content":{const _=new tc({...y});return this._managedWidgets.set(r,_),_}}}).filter(le);return Array.from(this._managedWidgets.keys()).filter(n=>!t.has(n)).forEach(n=>{this._managedWidgets.get(n)?.destroy(),this._managedWidgets.delete(n)}),this._measurementManager?.allocate(),s.map(n=>n.render())}};a([l()],He.prototype,"scale",void 0),a([l({value:"horizontal"})],He.prototype,"layout",null),a([l()],He.prototype,"barStyle",void 0),a([l()],He.prototype,"_measurementManager",void 0),a([l()],He.prototype,"_managedWidgets",void 0),He=a([O("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbar")],He);const Bs=He;function rt(i,e){const t=new N({x:i[0],y:i[1],spatialReference:e});return i.length>2&&(t.z=i[2]),t}function _d(i,e){return new Co({points:i,spatialReference:e})}function vd(i,e,t){const s=new Pe({paths:i,spatialReference:e});return t&&Ks(s),s}function yi(i,e,t,s=!0){const n=Di(i);n.forEach(r=>{const c=r[0],p=r[r.length-1];Gt(c,p)&&r.length!==1||r.push(r[0])});let o=new ie({rings:n,spatialReference:e});return o.rings.forEach(r=>{Ys(r)||r.reverse()}),t&&Ks(o),s&&o.isSelfIntersecting&&Js(e)&&(o=fn(o)),o}function oc(i,e,t){const s=e.mapToLocalMultiple(i),n=[],o={x:s[0].x,y:s[0].y},r={x:s[1].x,y:s[1].y},c=Math.round(r.x-o.x),p=Math.round(r.y-o.y),d=Math.max(Math.abs(c),Math.abs(p));if(t){const h={x:o.x+d,y:o.y+d},u={x:o.x-d,y:o.y-d};n.push(R(h.x,u.y),R(u.x,u.y),R(u.x,h.y),R(h.x,h.y))}else{const h={x:c>0?o.x+d:o.x-d,y:p>0?o.y+d:o.y-d};n.push(R(o.x,o.y),R(h.x,o.y),R(h.x,h.y),R(o.x,h.y))}return Kn(yi([n.map(h=>e.localToMap(h)).filter(le)],e.spatialReference,e.doUnnormalization,!0),n,e)}function rc(i,e,t){let s=e.mapToLocalMultiple(i);if(s.length===1){const p=s[0];s=[R(p.x-48,p.y+48),R(p.x+48,p.y-48),R(p.x+48,p.y-48),R(p.x-48,p.y+48)]}const n=[],o={x:s[0].x,y:s[0].y},r={x:s[1].x,y:s[1].y};if(t){const c=Math.round(r.x-o.x),p=Math.round(r.y-o.y);n.push(R(o.x-c,o.y-p),R(r.x,o.y-p),R(r.x,r.y),R(o.x-c,r.y))}else n.push(R(o.x,o.y),R(r.x,o.y),R(r.x,r.y),R(o.x,r.y));return Kn(yi([n.map(c=>e.localToMap(c)).filter(le)],e.spatialReference,e.doUnnormalization,!0),n,e)}function Kn(i,e,t){const s=qt(e[3],e[2],t),n=qt(e[1],e[2],t),o=qt(e[0],e[1],t),r=qt(e[0],e[3],t);return{geometry:i,midpoints:s!=null&&n!=null&&o!=null&&r!=null?{top:s,right:n,bottom:o,left:r}:null}}function qt(i,e,t){ht[0]=i.x,ht[1]=i.y,ht[2]=0,ut[0]=e.x,ut[1]=e.y,ut[2]=0,ts(ht,ht,ut,.5),Kt.x=ht[0],Kt.y=ut[1],Kt.z=ut[2];const s=t.localToMap(Kt);return s!=null?rt(s,t.spatialReference):null}const Kt=R(0,0,0),ht=M(),ut=M();function ac(i,e,t,s){const n=e.mapToLocalMultiple(i);let o=null,r=null;if(t)o=n[0],r=n[1];else{const v=n[0],S=n[1],z=Math.round(S.x-v.x),A=Math.round(S.y-v.y),Z=Math.max(Math.abs(z),Math.abs(A));o=R(z>0?v.x+Z/2:v.x-Z/2,A>0?v.y+Z/2:v.y-Z/2),r=R(Math.abs(z)>Math.abs(A)?o.x-Z/2:o.x,Math.abs(z)>Math.abs(A)?o.y:o.y-Z/2)}const c=e.localToMap(o),p=e.localToMap(r);if(c==null||p==null)return null;e.doUnnormalization&&$o([[c,p]],e.spatialReference);const d=rt(c,e.spatialReference),h=rt(p,e.spatialReference),u=Po(e.spatialReference);let y=0;if(Js(e.spatialReference))y=u*vn(d,h,null);else{const v=o.x-r.x,S=o.y-r.y;y=u*Math.sqrt(v*v+S*S)*(s||1)}const _=new aa({center:d,radius:y,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:yi(_.rings,_.spatialReference,!1),center:d,edge:h}}function lc(i,e,t){const s=e.mapToLocalMultiple(i),n=s[0],o=s[1],r=Math.round(o.x-n.x),c=Math.round(o.y-n.y),p=R(t?n.x:n.x+r/2,t?n.y:n.y+c/2),d=t?r:r/2,h=t?c:c/2,u=60,y=[],_=2*Math.PI/u;function v(pe){const ke=Math.cos(pe),We=Math.sin(pe);return R(d*ke+p.x,h*We+p.y)}for(let pe=0;pe<u;pe++)y.push(v(pe*_));y.push(y[0]);const{spatialReference:S,doUnnormalization:z}=e,A=yi([y.map(pe=>e.localToMap(pe)).filter(le)],S,z,!1),Z=e.localToMap(v(Math.PI/2)),ye=e.localToMap(v(0)),Le=e.localToMap(v(-Math.PI/2)),Ue=e.localToMap(v(Math.PI));return{geometry:A,midpoints:Z!=null&&ye!=null&&Le!=null&&Ue!=null?{top:rt(Z,S),right:rt(ye,S),bottom:rt(Le,S),left:rt(Ue,S)}:null}}let ee=class extends ce{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:ps};const t=Vo(Oo(Lo(ps),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const s of this.coordinates)e.push([Math.floor(s[0]-t[0])+.5,Math.floor(s[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,s=ko(t),n=Ro(t);return g("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:s+"px",height:n+"px",visibility:this.visible?"visible":"hidden"}},g("svg",{height:n,styles:{display:"block"},width:s},g("polygon",{fill:this._fillStyle,points:e.map(([o,r])=>`${o},${r}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),g("polygon",{fill:"transparent",points:e.map(([o,r])=>`${o},${r}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};a([l()],ee.prototype,"coordinates",void 0),a([l()],ee.prototype,"strokeDash",void 0),a([l()],ee.prototype,"strokeWidth",void 0),a([l()],ee.prototype,"strokeColor",void 0),a([l()],ee.prototype,"strokeDashColor",void 0),a([l()],ee.prototype,"fillColor",void 0),a([l()],ee.prototype,"visible",void 0),a([l()],ee.prototype,"isDecoration",void 0),a([l({readOnly:!0})],ee.prototype,"_strokeStyle",null),a([l({readOnly:!0})],ee.prototype,"_strokeBackgroundStyle",null),a([l({readOnly:!0})],ee.prototype,"_fillStyle",null),a([l({readOnly:!0})],ee.prototype,"_renderCoordinates",null),ee=a([O("esri.views.overlay.OutlineOverlayItem")],ee);const cc=ee;let re=class extends Ne.EventedMixin(q){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=t=>this.drawOperation.on(t,s=>{this._updateVisuals(),this.emit(t,s)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=Me(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new f({view:e,manipulators:this.manipulators,geometryType:pc(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new ji,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,s=e.committableVertex,n=e.committedVertices.slice();s!=null&&n.push(t.pointToArray(s));const o=n.length;switch(this.geometryType){case"circle":case"rectangle":{const r=new Hn($r,ji.spatialReference),c=this.geometryType==="circle"?ac:oc,p=this.geometryType==="circle"?lc:rc;if(o===1&&e.isCompleted){const d=n[0],h=r.makeMapPoint(d[0]+dc,d[1]);return c([d,h],r,!0)?.geometry.rings[0]??[]}if(o===2){const d=this.geometryType!=="rectangle",h=this.centeredToggled!==d,u=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==u?c(n,r,h)?.geometry.rings[0]:p(n,r,h)?.geometry.rings[0])??[]}return[]}}return n}_updateVisuals(){if(!this._overlayItem){const e=new cc({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles(st(()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0})),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function pc(i){switch(i){case"polygon":case"point":return i;case"circle":case"rectangle":return"segment"}}a([l({value:!1})],re.prototype,"centeredToggled",null),a([l()],re.prototype,"drawOperation",void 0),a([l({value:!0})],re.prototype,"enabled",null),a([l({value:!1})],re.prototype,"uniformSizeToggled",null),a([l({constructOnly:!0})],re.prototype,"geometryType",void 0),a([l({constructOnly:!0})],re.prototype,"mode",void 0),a([l({readOnly:!0})],re.prototype,"type",void 0),a([l({readOnly:!0})],re.prototype,"updating",null),a([l({constructOnly:!0,nonNullable:!0})],re.prototype,"view",void 0),a([l()],re.prototype,"cursor",null),re=a([O("esri.views.draw.DrawScreenTool")],re);const dc=48;async function hc(){return x(()=>import("./geometryEngineJSON-5ScVeRQz.js").then(i=>i.g),__vite__mapDeps([178,168,169,179]),import.meta.url)}async function uc(){return hc().then(({contains:i,intersects:e,overlaps:t,simplify:s})=>({contains:i,intersects:e,overlaps:t,simplify:s}))}async function gc(i){const{currentSelection:e,selector:t,signal:s,sources:n,view:o}=i;if(!n?.length)return{added:[],removed:[]};const{layers:r,layerViews:c,graphicsLayers:p}=vc(n),d=(await Ki(Promise.all([mc(t,r,o,s),_c(t,c,o,s),yc(t,p,o)]),s)).flat();if(!e)return{added:d,removed:[]};const h=e.toArray(),u=d.filter(_=>!Ns(h,_)),y=h.filter(_=>!Ns(d,_));return e.removeMany(y),e.addMany(u),{added:u,removed:y}}const yc=async(i,e,t)=>Tc({candidates:e.flatMap(s=>s.graphics.toArray())??[],selector:i,view:t}),mc=async(i,e,t,s)=>{const n=await Fe(wc({selector:i,signal:s,layers:e,view:t}));return n?Yn(n):[]},_c=async(i,e,t,s)=>{const n=await Fe(fc({selector:i,signal:s,layerViews:e,view:t}));return n?Yn(n):[]};function Yn(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t];s.status==="fulfilled"&&e.push(...s.value)}return e}function vc(i){const e=[],t=[],s=[];return i.forEach(n=>{Io(n)?e.push(n):(Qs(n)||en(n))&&n.layers?.length?e.push(...n.layers.toArray()):Do(n)&&n.sublayers?.length?s.push(...n.sublayers.toArray()):Ao(n)?s.push(n):Yt(n)&&t.push(n)}),{layers:e,layerViews:t,graphicsLayers:s}}function Ns(i,e){if(i.includes(e))return!0;const t=e.getObjectId(),s=t!=null,{layer:n,uid:o}=e;return s?i.some(r=>{if(n===r.layer)return t===r.getObjectId()}):i.some(r=>{if(n===r.layer)return o===r.uid})}async function fc(i){const{layerViews:e,selector:t,signal:s,view:n}=i;return Ki(Promise.allSettled(e.map(async o=>{const r=o.createQuery(),{geometry:c}=Jn(t,o.layer,n);return r.outFields=["*"],r.geometry=c,r.returnGeometry=!0,r.outSpatialReference=n.spatialReference,o.queryFeatures(r,{signal:s}).then(({features:p})=>p)})),s)}async function wc(i){const{layers:e,selector:t,signal:s,view:n}=i;return Ki(Promise.allSettled(e.map(async o=>o.queryFeatures(bc(o.createQuery(),t,o,n),{signal:s}).then(({features:r})=>r))),s)}function Jn(i,e,t){const s="renderer"in e?oa({renderer:e.renderer}):0,n=i.type==="point"?ra(i,s,t):i,o="displayField"in e?e.displayField:null,r=Go({displayField:o,fields:e.fields}),c=[e.objectIdField];if(r!=null&&e.fieldsIndex.has(r)&&c.push(r),"globalIdField"in e&&e.globalIdField!=null&&e.fieldsIndex.has(e.globalIdField)&&c.push(e.fieldsIndex.get(e.globalIdField).name),ds(e)&&e.subtypeField!=null&&e.fieldsIndex.has(e.subtypeField)&&c.push(e.fieldsIndex.get(e.subtypeField).name),"utilityNetworks"in t.map&&t.map.utilityNetworks?.length&&(ds(e)||e.type==="feature")){const p=e.fieldsIndex.get("assetgroup"),d=e.fieldsIndex.get("assettype");p?.name&&c.push(p.name),d?.name&&c.push(d.name)}return{geometry:n,outFields:c}}function bc(i,e,t,s){const{outFields:n,geometry:o}=Jn(e,t,s);return i.outFields=n,i.geometry=o,i.returnGeometry=!0,i.outSpatialReference=s.spatialReference,i}async function Tc(i){const{selector:e,candidates:t,view:s}=i;if(!t?.length||!e)return[];const{spatialReference:n}=s,o=e,r=await uc();return t.filter(c=>c.geometry&&c.geometry.type!=="mesh"&&r.intersects(n,o,c.geometry))}const xc=100;let it=class extends Ne.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new Se,this.sources=null,this._process=qi(async(t,s)=>{const{callback:n,selector:o,completed:r}=t,c=qs(async p=>{const{options:d,sources:h,selection:u,view:y}=this;if(!(!h?.length&&!y?.selectionManager.sources.length)&&y){if(o&&h!=null){const _=await gc({currentSelection:u,selector:o,signal:p,sources:h,view:y});r&&d?.persistSelection!==!1&&y.selectionManager?.updateSelection({current:u.toArray(),..._})}n&&n()}else u.removeAll()});return zo(s,()=>c.abort()),this._processTask=c,c.promise},xc)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const t=this.options,s=t?.createTool??"rectangle",n=t?.mode??(s==="polygon"?"click":"hybrid"),o=Symbol();this._tool=new re({view:e,mode:n,geometryType:s}),t?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>Fe(this._process({selector:this._selectionArea}))),o),this.addHandles([e.on("key-down",r=>{if(!r.repeat)switch(r.key){case Ut.constraint:this._tool.uniformSizeToggled=!0,r.stopPropagation();break;case Ut.center:this._tool.centeredToggled=!0,r.stopPropagation()}}),e.on("key-up",r=>{switch(r.key){case Ut.constraint:this._tool.uniformSizeToggled=!1,r.stopPropagation();break;case Ut.center:this._tool.centeredToggled=!1,r.stopPropagation()}}),this._tool.on("complete",async r=>{this.removeHandles(o);const c=()=>{this.removeAllHandles(),this.emit("complete",{aborted:r.aborted,selection:this.selection.toArray()})};r.aborted?(this.cancel(),this.selection.removeAll(),c()):await this._process({selector:this._selectionArea,callback:c,completed:!0})})],o),this.addHandles(st(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=li(),t=this._tool.coordinates,s=this.view.spatialReference,n=r=>{e.x=r[0],e.y=r[1];const{x:c,y:p}=this.view.toMap(e);return[c,p]};if(t.length===0)return;if(t.length===1||t.every(([r,c])=>r===t[0][0]&&c===t[0][1])){const[r,c]=n(t[0]);return new N({x:r,y:c,spatialReference:s})}const o=t.map(n);if(o.length!==0)return Ys(o)||o.reverse(),new ie({spatialReference:s,rings:[o]})}};a([l()],it.prototype,"options",void 0),a([l({readOnly:!0})],it.prototype,"selection",void 0),a([l()],it.prototype,"sources",void 0),a([l({constructOnly:!0})],it.prototype,"view",void 0),it=a([O("esri.widgets.support.Selector2D.SelectionOperation")],it);const Ec=it;let Ee=class extends Ne.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.layerViewPreferenceEnabled=!0,this.sources=null}initialize(){this.addHandles([k(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=at(this._operationHandlesGroup)}get _sources(){const{layerViewPreferenceEnabled:e,sources:t,view:s}=this;return s&&t?.length?t.flatMap(n=>{if(Yt(n))return n;if(Qs(n)||en(n)){const r=n.layers||[],c=r.map(p=>{const d=ys(s,p)||void 0;return e&&Yt(d)?d:p});return c.length?c.toArray():r.length?r.toArray():n}if(!e)return n;const o=ys(s,n)||void 0;return Yt(o)?o:n}):[]}get layers(){return si(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){si(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:t}=this,s=!e?.length&&!t?.selectionManager.sources.length;return this.activeOperation?"active":t?.ready&&!s?"ready":"disabled"}cancel(){this.state==="active"&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:t,state:s,view:n}=this,o=!t?.length&&!n?.selectionManager.sources.length;if(s==="disabled"||o||!this.view)return;s==="active"&&this.cancel();const r=new Ec({view:this.view,sources:t,options:e});return this._operationHandlesGroup=Yi([r.selection.on("change",c=>this.emit("selection-change",c)),r.once("complete",c=>this._onOperationComplete(c))]),this._set("activeOperation",r),r}_onOperationComplete(e){this._operationHandlesGroup=at(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};a([l()],Ee.prototype,"_sources",null),a([l({readOnly:!0})],Ee.prototype,"activeOperation",void 0),a([l()],Ee.prototype,"layers",null),a([l()],Ee.prototype,"layerViewPreferenceEnabled",void 0),a([l()],Ee.prototype,"sources",void 0),a([l({readOnly:!0})],Ee.prototype,"state",null),a([l()],Ee.prototype,"view",void 0),Ee=a([O("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],Ee);const Mc=Ee,Zs={lassoTool:!0,rectangleTool:!0},Li="esri-selection-toolbar",ki={base:Li,container:`${Li}__container`,toolButton:`${Li}__tool-button`};let F=class extends Oe{constructor(i,e){super(i,e),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.defaultLassoToolOptions={createTool:"polygon",mode:"freehand"},this.defaultRectangleToolOptions={createTool:"rectangle"},this.messages=null,this.toolConfigs=[],this.viewModel=new Mc,this.visibleElements={...Zs},this.scale="s",this.layout="horizontal",this._viewModelHandlesGroup=Yi([this.viewModel.on("complete",t=>{this._set("activeToolInfo",null),this.emit("complete",t)})])}destroy(){this._viewModelHandlesGroup=at(this._viewModelHandlesGroup)}loadDependencies(){return Ze({action:()=>x(()=>import("./index-KWI0Snmc.js"),__vite__mapDeps([85,80,4,1,2,3,5,6,75,81,61,62,63,78,67,69,71,86]),import.meta.url)})}get label(){return this.messages?.widgetLabel??""}set label(i){this._overrideIfSome("label",i)}get layers(){return si(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(i){si(zt.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=i}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(i){this.viewModel.layerViewPreferenceEnabled=i}get sources(){return this.viewModel.sources}set sources(i){this.viewModel.sources=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}castVisibleElements(i){return{...Zs,...i}}get state(){return this.viewModel.state}get visibleToolCount(){const{view:i,toolConfigs:e,visibleElements:t}=this;return(e?.length??0)+(i?.type==="2d"?(t.lassoTool?1:0)+(t.rectangleTool?1:0):0)}activate(i){if(this.cancel(),this.state!=="disabled")switch(i){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(i)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return g("div",{"aria-label":this.label,class:this.classes(ki.base,es.widget)},g("div",{class:ki.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if(this.view?.type==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map(({toolName:i,icon:e,toolKey:t})=>this._renderToolWithTooltip(i,t,e))}_renderLassoTool(){const{messages:i,visibleElements:e}=this;if(!e.lassoTool)return;const t=i.selectByLasso;return this._renderToolWithTooltip("lasso","lasso","lasso-select",t)}_renderRectangleTool(){const{messages:i,visibleElements:e}=this;if(!e.rectangleTool)return;const t=i.selectByRectangle;return this._renderToolWithTooltip("rectangle","rectangle","cursor-marquee",t)}_renderToolWithTooltip(i,e,t,s=i){const n=`${this.id}-tool-${e}`;return g("calcite-action",{active:this.activeToolInfo?.toolName===i,bind:this,class:ki.toolButton,disabled:this.state==="disabled",icon:t||"selection",id:n,key:n,onclick:()=>this._toggleTool(i),scale:this.scale,text:s,title:s})}_activateTool(i){const e=this._getToolOptions(i);if(!e)return;const t=this.viewModel.activate(e);t&&this._set("activeToolInfo",{toolName:i,operation:t})}_toggleTool(i){if(this.activeToolInfo){const e=this.activeToolInfo.toolName;if(this.cancel(),e===i)return}this._activateTool(i)}_getToolOptions(i){return i==="lasso"?this.defaultLassoToolOptions:i==="rectangle"?this.defaultRectangleToolOptions:this.toolConfigs.find(e=>e.toolName===i)}};a([l({readOnly:!0})],F.prototype,"activeToolInfo",void 0),a([l()],F.prototype,"defaultLassoToolOptions",void 0),a([l()],F.prototype,"defaultRectangleToolOptions",void 0),a([l()],F.prototype,"label",null),a([l()],F.prototype,"layers",null),a([l()],F.prototype,"layerViewPreferenceEnabled",null),a([l(),Be("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],F.prototype,"messages",void 0),a([l()],F.prototype,"sources",null),a([l()],F.prototype,"toolConfigs",void 0),a([l()],F.prototype,"view",null),a([l()],F.prototype,"viewModel",void 0),a([l()],F.prototype,"visibleElements",void 0),a([Xs("visibleElements")],F.prototype,"castVisibleElements",null),a([l()],F.prototype,"scale",void 0),a([l()],F.prototype,"state",null),a([l()],F.prototype,"layout",void 0),a([l()],F.prototype,"visibleToolCount",null),F=a([O("esri.widgets.support.SelectionToolbar")],F);const Sc=F,Ie="esri-sketch",Ce={base:Ie,vertical:`${Ie}--vertical`,docked:`${Ie}-bar`,floating:`${Ie}-pad`,chipHorizontal:`${Ie}__selection-count-chip--horizontal`,chipVertical:`${Ie}__selection-count-chip--vertical`,chipVerticalSmall:`${Ie}__selection-count-chip--vertical--s`,popoverWrapper:`${Ie}__popover-wrapper`},Cc={point:"pin",polyline:"line",polygon:"polygon",rectangle:"rectangle",circle:"circle",multipoint:"pins",mesh:"i3-d-building",freehandPolygon:"freehand-area",freehandPolyline:"freehand"};let T=class extends Oe{constructor(i,e){super(i,e),this._activeCustomToolOptions=null,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.customToolOptions=null,this.customActions=null,this.toolbarKind="floating",this.contextualToolLocation="separate",this.groupCollapsePriorities=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new J,this._defaultViewModel=null,this._calcitePopoverReferenceElement=null,this._relativeLocation="top",this._popoverOpen=!1,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=i?.viewModel||(this._defaultViewModel=new pn({creationMode:i?.creationMode??"continuous"}))}initialize(){const{layer:i,view:e}=this,t=new Sc({view:e?.type==="2d"?e:null,sources:i?[i]:null,scale:this.scale});this.addHandles([k(()=>this.viewModel,s=>{this._viewModelHandlesGroup=at(this._viewModelHandlesGroup),s&&(this._viewModelHandlesGroup=Yi([s.on("create",()=>this.scheduleRender()),s.on("update",()=>this.scheduleRender()),s.on("delete",n=>this.emit("delete",n)),s.on("undo",()=>this.scheduleRender()),s.on("redo",()=>this.scheduleRender()),k(()=>s.layer,n=>{this._selectionToolbar&&(this._selectionToolbar.sources=n?[n]:null)}),k(()=>s.view,n=>{this._selectionToolbar&&(this._selectionToolbar.view=n?.type==="2d"?n:null)}),k(()=>s.state,()=>this.notifyChange("state"))]))},It),Ho(()=>t.activeToolInfo,()=>this.viewModel.cancel()),t.on("complete",s=>this._onSelectionOperationComplete(s)),k(()=>{const{selectionTools:s}=this.visibleElements;return{lassoTool:!!s?.["lasso-selection"],rectangleTool:!!s?.["rectangle-selection"]}},s=>{Object.assign(t.visibleElements,s)},It)]),this._selectionToolbar=t}loadDependencies(){return Ze({action:()=>x(()=>import("./index-KWI0Snmc.js"),__vite__mapDeps([85,80,4,1,2,3,5,6,75,81,61,62,63,78,67,69,71,86]),import.meta.url),chip:()=>x(()=>import("./index-CnIupYZj.js"),__vite__mapDeps([180,61,4,1,2,3,5,6,62,63,67,71,69,70,86,81]),import.meta.url),popover:()=>x(()=>import("./index-Bp42geN8.js").then(i=>i.i),__vite__mapDeps([91,80,4,1,2,3,5,6,75,81,61,62,63,85,78,67,69,71,86,73,74,76,92,77,70]),import.meta.url)})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=at(this._viewModelHandlesGroup)}get activeTool(){const i=this._selectionToolbar?.activeToolInfo;if(i)switch(i.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}const e=this._effectiveAvailableCreateTools,{activeTool:t,activeCreateToolDrawMode:s}=this.viewModel;return t==="polygon"&&s==="freehand"&&e?.includes("freehandPolygon")?"freehandPolygon":t==="polyline"&&s==="freehand"&&e?.includes("freehandPolyline")?"freehandPolyline":this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get creationMode(){return this.viewModel.creationMode}set creationMode(i){this.viewModel.creationMode=i}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(i){this.viewModel.defaultCreateOptions=i}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(i){this.viewModel.defaultUpdateOptions=i}get icon(){return"pencil"}set icon(i){this._overrideIfSome("icon",i)}get label(){return this.messages?.widgetLabel??""}set label(i){this._overrideIfSome("label",i)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(i){this.viewModel.labelOptions=i}get layer(){return this.viewModel.layer}set layer(i){this.viewModel.layer=i}set layout(i){this._set("layout",i),this._selectionToolbar&&(this._selectionToolbar.layout=i)}set scale(i){this._set("scale",i),this._selectionToolbar&&(this._selectionToolbar.scale=i)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(i){this.viewModel.snappingOptions=i}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(i){this.viewModel.tooltipOptions=i}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(i){this.viewModel.valueOptions=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}set viewModel(i){const e=this._get("viewModel");i!==e&&(e&&e===this._defaultViewModel&&Me(e),this._set("viewModel",i))}get _effectiveAvailableCreateTools(){const{availableCreateTools:i,view:e,visibleElements:t}=this,s=i?.filter(n=>!!t.createTools?.[n]);return e?.type==="3d"?s?.filter(n=>n!=="multipoint"):s}create(i,e,t){const s=t?.createOptions??e;return this._activeCustomToolOptions=t,Fe(this.viewModel.create(i,s))}update(i,e){return Fe(this.viewModel.update(i,e))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}dismissFloatingElements(){this._popoverOpen=!1}render(){const{toolbarKind:i,layout:e,scale:t}=this,s=this.customActions?.filter(n=>n.position==="selection-toolbar");return g("div",null,g("div",{classes:{[Ce.base]:!0,[Ce.floating]:i==="floating",[Ce.docked]:i==="docked",[Ce.vertical]:e==="vertical"}},g(Bs,{barStyle:i,layout:e,scale:t},this._renderSelectionSetItemGroupInline(),g("div",{"group-kind":"split-button",key:"selection-split-button",priority:this.groupCollapsePriorities?.get("selectionTools")??Ct.Low},this._renderDefaultSelectionButton(),this._selectionToolbar?.render(),s?.map(n=>this._renderToolbarItem(n))),this._renderCreateToolActionGroup(),this._renderUndoRedoMenuItemGroup(),this._renderSettingsMenuItemGroup()),this._renderSelectionSetToolbar(),this._renderSettingsMenuPopover()))}_renderSettingsMenuPopover(){const{messagesCommon:i,snappingOptions:e,view:t,viewModel:s,visibleElements:n}=this;if(!this._calcitePopoverReferenceElement)return;const o={directionModePicker:n.directionModePicker,labelsToggle:n.labelsToggle,tooltipsToggle:n.tooltipsToggle},r=this.layout==="horizontal"?this._relativeLocation==="top"?"bottom-end":"top-end":"right-end";return g("calcite-popover",{closable:!0,focusTrapDisabled:!0,heading:i.settings,label:i.settings,open:this._popoverOpen,overlayPositioning:"fixed",placement:r,referenceElement:this._calcitePopoverReferenceElement,scale:this.scale,onCalcitePopoverBeforeClose:()=>this._popoverOpen=!1,onCalcitePopoverBeforeOpen:c=>this._remeasurePopoverSizes(c.currentTarget),onCalcitePopoverClose:()=>this._refocusOnView()},g("div",{class:Ce.popoverWrapper},Object.values(o).includes(!0)?g(Xl,{sketchOptions:s.sketchOptions,viewType:t?.type,visibleElements:new as(o)}):void 0,n.snappingControls&&t&&e?g(ec,{snappingManager:this.viewModel.snappingManager,snappingOptions:e,view:t,visibleElements:n.snappingControlsElements}):void 0))}_renderSelectionSetToolbar(){if(this.contextualToolLocation!=="separate")return;const i=this._renderSelectionSetItemGroup();return i?.length?g(Bs,{barStyle:this.toolbarKind,layout:this.layout,scale:this.scale},i):void 0}_renderSelectionSetItemGroupInline(){return this.contextualToolLocation==="separate"?[]:this._renderSelectionSetItemGroup()}_renderUndoRedoMenuItemGroup(){return g("div",{"group-kind":"split-button",key:"undo-redo-menu",priority:this.groupCollapsePriorities?.get("undoRedo")??Ct.Medium,slot:"actions-end"},this._renderUndoButton(),this._renderRedoButton())}_renderSettingsMenuItemGroup(){const i=[],e=[];this.customActions?.forEach(s=>{s.position==="settings-before"?e.push(s):s.position==="settings-after"&&i.push(s)});const t=[...e.map(s=>this._renderToolbarItem(s)),this._renderSettingsMenuButton(),...i.map(s=>this._renderToolbarItem(s))].filter(le);if(t.length)return g("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"settings-menu",priority:this.groupCollapsePriorities?.get("settings")??Ct.Max,slot:"actions-end"},t)}_renderSelectionSetItemGroup(){if(!this.updateGraphics.length)return[];const i=this.contextualToolLocation==="inline-end"?"actions-end":void 0,e=this.customActions?.filter(n=>n.position==="before-selection-set"),t=this.customActions?.filter(n=>n.position==="after-selection-set"),s=this.groupCollapsePriorities?.get("selectionSet")??Ct.High;return[g("div",{"group-kind":"measured-content",key:"selection-count-chip-group",priority:s,slot:i},this._renderFeatureCountChip()),g("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"selection-set-tool-group",priority:s,slot:i},e?.map(n=>this._renderToolbarItem(n)),this._renderDuplicateButton(),this._renderDeleteButton(),t?.map(n=>this._renderToolbarItem(n)))]}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return[];const{messages:i,state:e}=this;return this._renderToolbarItem({id:"pointer-select",text:i.selectFeature,icon:"cursor",onclick:this._activateDefaultSelectTool,active:e==="ready"})}_renderCreateToolActionGroup(){const i=this._effectiveAvailableCreateTools?.flatMap(t=>this._renderBuiltInCreateToolItem(t))??[],e=this.customToolOptions?.flatMap(t=>this._renderCustomToolItem(t))??[];return g("div",{"group-kind":"overflow-group",key:"create-tools-group",priority:this.groupCollapsePriorities?.get("createTools")??Ct.High},i,e)}_renderBuiltInCreateToolItem(i){return this._renderToolbarItem({id:`${i}-button`,text:this.messages.draw[i],icon:Cc[i],onclick:()=>this._activateCreateTool(i),active:this.activeTool===i&&!this._activeCustomToolOptions})}_renderCustomToolItem(i){const{toolKey:e}=i;return this._renderToolbarItem({id:`custom-${i.toolKey}`,text:i.label,icon:i.icon,onclick:()=>this._activateCreateTool(i.toolName,null,i),active:this._activeCustomToolOptions?.toolKey===e})}_renderUndoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"undo-button",text:this.messages.undo,icon:"undo",disabled:!this.viewModel.canUndo(),onclick:this.undo,flipRTL:!0}):[]}_renderRedoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"redo-button",text:this.messages.redo,icon:"redo",disabled:!this.viewModel.canRedo(),onclick:this.redo,flipRTL:!0}):[]}_renderSettingsMenuButton(){return this.visibleElements.settingsMenu?this._renderToolbarItem({id:"settings-menu-action",text:this.messagesCommon.settings,icon:"gear",active:this._popoverOpen,onclick:()=>this._popoverOpen=!this._popoverOpen,afterCreate:i=>this._calcitePopoverReferenceElement=i,afterUpdate:i=>this._calcitePopoverReferenceElement=i,afterRemoved:()=>this._calcitePopoverReferenceElement=null}):[]}_renderFeatureCountChip(){if(!this.visibleElements.selectionCountLabel)return[];const{layout:i,messages:e,scale:t,id:s,updateGraphics:{length:n}}=this,o=Cs(e.selectedCount,{count:n}),r=t==="s"?99:999,c=n>r?Cs(e.selectedCountTruncated,{truncated:r}):n,p=t==="s"&&i==="vertical",d=p?`${s}-selection-chip-small`:`${s}-selection-chip`;return[p?g("span",{classes:{[Ce.chipVertical]:!0,[Ce.chipVerticalSmall]:this.scale==="s"},id:d,tabIndex:0,title:o},c):g("calcite-chip",{appearance:"outline",class:i==="horizontal"?Ce.chipHorizontal:Ce.chipVertical,id:d,kind:"brand",label:o,scale:t==="l"?"m":"s",tabIndex:0,title:i==="vertical"?o:void 0},i==="vertical"?c:o)]}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return[];const{messages:i}=this;return this._renderToolbarItem({id:"duplicate",text:this.updateGraphics.length>1?i.duplicateFeatures:i.duplicateFeature,icon:"copy",onclick:this._onDuplicateSelect})}_renderDeleteButton(){if(!this.visibleElements.deleteButton)return[];const{messages:i}=this,e=this.updateGraphics.length>1?i.deleteFeatures:i.deleteFeature;return this._renderToolbarItem({id:"delete",text:e,icon:"trash",onclick:this.delete})}_renderToolbarItem({id:i,text:e,icon:t,disabled:s,onclick:n,active:o,flipRTL:r,afterCreate:c,afterUpdate:p,afterRemoved:d}){const h=`${this.id}-${i}`;return[g("calcite-action",{active:o,afterCreate:c,afterRemoved:d,afterUpdate:p,bind:this,"data-testid":i,disabled:s||this.state==="disabled",icon:t,iconFlipRtl:r??!1,id:h,key:i,onclick:n,scale:this.scale,text:e,title:e})]}_remeasurePopoverSizes(i){try{const e=i.parentElement,t=this?.view?.container?.getBoundingClientRect(),s=e?.style;if(!(e&&t&&s&&this.view?.container?.contains(e)))return;const n=this._calcitePopoverReferenceElement;if(!n)return;const{bottom:o,top:r}=n.getBoundingClientRect();if(this.layout==="horizontal"){const p=o<t.height/2;p!==(this._relativeLocation==="top")&&(this._relativeLocation=p?"top":"bottom"),p?(s?.setProperty("--sketch-view-height-offset",o-t.top+"px"),s?.setProperty("--sketch-view-margin-offset","30px")):(s?.setProperty("--sketch-view-height-offset",t.bottom-r+"px"),s?.setProperty("--sketch-view-margin-offset","15px"))}else this.layout==="vertical"&&(s.setProperty("--sketch-view-height-offset","15px"),s.setProperty("--sketch-view-margin-offset","15px"));const c=i.shadowRoot?.querySelector("div.header")?.getBoundingClientRect().height;s.setProperty("--sketch-popover-header-offset",`${c}px`)}catch(e){zt.getLogger(this.declaredClass).warnOnce("Sketch failed to lay out settings menu.",e)}}_activateCreateTool(i,e,t){const s=this._activeCustomToolOptions;if(t||s){if(t?.toolKey===s?.toolKey)return void this.cancel()}else if(this.activeTool===i)return void this.cancel();this._selectionToolbar?.cancel(),this.create(i,e,t)}_onDuplicateSelect(){const i=this.duplicate(),e=this.viewModel.activeTool;e!=="transform"&&e!=="reshape"||this.update(i,{tool:e})}_onSelectionOperationComplete(i){const{viewModel:{defaultUpdateOptions:e}}=this,{selection:t}=i;if(!i.aborted&&t.length){const s=e.tool,n=t.length>1&&s==="reshape"?"transform":s;this.update(t,{...e,tool:n})}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}_refocusOnView(){this.activeTool&&this.view?.focus()}};a([l()],T.prototype,"_activeCustomToolOptions",void 0),a([l()],T.prototype,"activeTool",null),a([l({readOnly:!0})],T.prototype,"activeTooltip",null),a([l({cast:i=>{if(!i?.length)return null;const e=new Set(["point","polyline","polygon","rectangle","circle","multipoint","freehandPolyline","freehandPolygon","mesh"]);return i.filter(t=>e.has(t))}})],T.prototype,"availableCreateTools",void 0),a([l({readOnly:!0})],T.prototype,"createGraphic",null),a([l()],T.prototype,"creationMode",null),a([l()],T.prototype,"customToolOptions",void 0),a([l()],T.prototype,"customActions",void 0),a([l()],T.prototype,"defaultCreateOptions",null),a([l()],T.prototype,"defaultUpdateOptions",null),a([l()],T.prototype,"icon",null),a([l()],T.prototype,"label",null),a([l()],T.prototype,"labelOptions",null),a([l()],T.prototype,"layer",null),a([l({type:["horizontal","vertical"],value:"horizontal"})],T.prototype,"layout",null),a([l({value:"m"})],T.prototype,"scale",null),a([l()],T.prototype,"toolbarKind",void 0),a([l()],T.prototype,"contextualToolLocation",void 0),a([l()],T.prototype,"groupCollapsePriorities",void 0),a([l(),Be("esri/widgets/Sketch/t9n/Sketch")],T.prototype,"messages",void 0),a([l(),Be("esri/t9n/common")],T.prototype,"messagesCommon",void 0),a([l()],T.prototype,"snappingOptions",null),a([l()],T.prototype,"state",null),a([l()],T.prototype,"tooltipOptions",null),a([l({readOnly:!0})],T.prototype,"updateGraphics",null),a([l({type:Er,nonNullable:!0})],T.prototype,"valueOptions",null),a([l()],T.prototype,"view",null),a([l({type:pn}),Vr(["create","update","undo","redo"])],T.prototype,"viewModel",null),a([l({type:J,nonNullable:!0})],T.prototype,"visibleElements",void 0),a([l()],T.prototype,"_effectiveAvailableCreateTools",null),a([l()],T.prototype,"_defaultViewModel",void 0),a([l()],T.prototype,"_calcitePopoverReferenceElement",void 0),a([l()],T.prototype,"_relativeLocation",void 0),a([l()],T.prototype,"_popoverOpen",void 0),T=a([O("esri.widgets.Sketch")],T);const $c=T;/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.14 */const Pc=(i,e)=>(t,s)=>Oc(t,i,s);class Vc extends Bo{constructor(e,t,s){super(e,t,s),this._watchedViewModelProperties=new Map,this._watchedVisibleElementsProperties={},this._isBindingViewModel={value:!0},Object.defineProperty(this.exports,"viewModel",{value:xi.makeGetterProxy(e,this._watchedViewModelProperties,this._isBindingViewModel)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){super.hostConnected(),this._isBindingViewModel.value=!1,this.component.manager.loadedCalled&&Nt(this.component)}async hostLoad(){if(this._watchedProperties.delete("viewModel"),await super.hostLoad(),this.component.manager.destroyed)return;this._watchMetaProperties(),this.onLifecycle(()=>this.reactiveUtils.watch(()=>this._instance.viewModel,s=>{this.component.viewModel=s},{initial:!0}));const e=this._instance.viewModel;typeof e=="object"&&(xi.watchComponentUpdates(this,e,this._watchedViewModelProperties),xi.watchAccessorUpdates(this,e,this._watchedViewModelProperties));const t=Object.entries(this._watchedVisibleElementsProperties);t.length>0&&this.onLifecycle(()=>t.map(([s,n])=>{let o=this._instance.visibleElements??{},r;for(const d of n.slice(0,-1))if(typeof o[d]=="object"&&o[d]!==null)o=o[d];else{r=!!o[d];break}r===void 0&&(r=!!(o[n.slice(-1)[0]]??!0)),s.startsWith("hide");const c=s.startsWith("hide")||s.startsWith("show")?s.startsWith("hide"):r,p=this.component;return typeof p[s]=="boolean"?this._updateWidgetVisibleElement(n,p[s],c):p[s]=!1,Ei(this.component,s,d=>this._updateWidgetVisibleElement(n,d,c))}))}_updateWidgetVisibleElement(e,t,s){let n=this._instance.visibleElements??{};for(const r of e.slice(0,-1))(typeof n[r]!="object"||n[r]===null)&&(n[r]={}),n=n[r];const o=!!(s?!t:t);n[e.at(-1)]=o}hostLoaded(){const{el:e}=this.component;e.childElem??=document.createElement("div"),this._instance.container=e.childElem;let t=!1;const s=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>this._instance.view??this._instance.viewModel?.view,set:n=>{!("view"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.view=n:this._instance.view=n,!("map"in this._instance)&&typeof this._instance.viewModel=="object"?this._instance.viewModel.map=n.map:this._instance.map=n.map,this._watchViewDestroy(),n&&!t&&(t=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),s&&(this._instance.view=s),this.component.el.isConnected&&(Nt(this.component),this._watchViewDestroy())}hostDisconnected(){typeof this.component.el.childElem=="object"&&this.component.el.view?.ui?.remove(this.component.el.childElem)}hostDestroy(){super.hostDestroy(),this._watchViewDestroyHandle?.remove()}_watchMetaProperties(){Ei(this.component,"position",e=>{this.component.el.childElem!=null&&typeof e=="string"&&Nt(this.component)}),Ei(this.component,"referenceElement",()=>Nt(this.component))}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,t)=>typeof t=="string"||Reflect.has(e,t),get:(e,t)=>{if(typeof t=="symbol"||t in Promise.prototype)return Reflect.get(e,t);const s=[t],n=this._makeRecursiveProxy(s);return No(this.component,o=>{const r=o;this.component[r]=!1,this._watchedVisibleElementsProperties[r]=s},n)}})}_makeRecursiveProxy(e){const t=new Proxy({},{get:(s,n)=>{const o=Reflect.get(s,n);return typeof n=="symbol"||n in Promise.prototype?o:(e.push(n),t)}});return t}_watchViewDestroy(){this._watchViewDestroyHandle?.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when(()=>this.component.el.view?.destroyed===!0,()=>void this.component.destroy().catch(console.error),{sync:!0})}}const Oc=Fo(Vc);/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.14 */const Lc=Zo`@layer{arcgis-sketch{display:block}}`,kc=Pc($c);class Rc extends Uo{constructor(){super(),this.widget=kc(this,{editConstructorProperties:this._editConstructorProperties}),this.viewModel=this.widget.viewModel,this.activeTool=this.widget.activeTool,this.autoDestroyDisabled=!1,this.availableCreateTools=this.widget.availableCreateTools,this.createGraphic=this.widget.createGraphic,this.creationMode=this.widget.creationMode,this.defaultCreateOptions=this.widget.defaultCreateOptions,this.defaultGraphicsLayerDisabled=!1,this.defaultUpdateOptions=this.widget.defaultUpdateOptions,this.hideCreateToolsCircle=this.widget.visibleElements.createTools.circle,this.hideCreateToolsPoint=this.widget.visibleElements.createTools.point,this.hideCreateToolsPolygon=this.widget.visibleElements.createTools.polygon,this.hideCreateToolsPolyline=this.widget.visibleElements.createTools.polyline,this.hideCreateToolsRectangle=this.widget.visibleElements.createTools.rectangle,this.hideDuplicateButton=this.widget.visibleElements.duplicateButton,this.hideDeleteButton=this.widget.visibleElements.deleteButton,this.hideSelectionCountLabel=this.widget.visibleElements.selectionCountLabel,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideSelectionToolsLassoSelection=this.widget.visibleElements.selectionTools["lasso-selection"],this.hideSelectionToolsRectangleSelection=this.widget.visibleElements.selectionTools["rectangle-selection"],this.hideSettingsMenu=this.widget.visibleElements.settingsMenu,this.hideSnappingControls=this.widget.visibleElements.snappingControls,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.hideUndoRedoMenu=this.widget.visibleElements.undoRedoMenu,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layer=this.widget.layer,this.layout=this.widget.layout,this.pointSymbol=this.viewModel.pointSymbol,this.polygonSymbol=this.viewModel.polygonSymbol,this.polylineSymbol=this.viewModel.polylineSymbol,this.position="bottom-left",this.scale=this.widget.scale,this.toolbarKind=this.widget.toolbarKind,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.snappingOptions=this.widget.snappingOptions,this.state=this.widget.state,this.tooltipOptions=this.widget.tooltipOptions,this.updateGraphics=this.widget.updateGraphics,this.arcgisCreate=St(()=>this.widget,"create"),this.arcgisDelete=St(()=>this.widget,"delete"),this.arcgisPropertyChange=Wo()("state"),this.arcgisReady=jo(),this.arcgisRedo=St(()=>this.widget,"redo"),this.arcgisUndo=St(()=>this.widget,"undo"),this.arcgisUpdate=St(()=>this.widget,"update"),this.listen("arcgisReady",this._arcgisReadyHandler)}static{this.properties={activeTool:3,autoDestroyDisabled:5,availableCreateTools:0,createGraphic:0,creationMode:1,defaultCreateOptions:0,defaultGraphicsLayerDisabled:5,defaultUpdateOptions:0,hideCreateToolsCircle:5,hideCreateToolsPoint:5,hideCreateToolsPolygon:5,hideCreateToolsPolyline:5,hideCreateToolsRectangle:5,hideDuplicateButton:5,hideDeleteButton:5,hideSelectionCountLabel:5,hideLabelsToggle:5,hideSelectionToolsLassoSelection:5,hideSelectionToolsRectangleSelection:5,hideSettingsMenu:5,hideSnappingControls:5,hideSnappingControlsElementsEnabledToggle:5,hideSnappingControlsElementsFeatureEnabledToggle:5,hideSnappingControlsElementsLayerList:5,hideSnappingControlsElementsSelfEnabledToggle:5,hideTooltipsToggle:5,hideUndoRedoMenu:5,icon:1,label:1,labelOptions:0,layer:0,layout:1,pointSymbol:0,polygonSymbol:0,polylineSymbol:0,position:1,referenceElement:1,scale:1,toolbarKind:1,showSnappingControlsElementsHeader:5,snappingOptions:0,state:3,tooltipOptions:0,updateGraphics:0}}static{this.shadowRootOptions=Xo}static{this.styles=Lc}async cancel(){this.widget?.cancel()}async complete(){this.widget?.complete()}async create(e,t){await this.widget?.create(e,t)}async delete(){this.widget?.delete()}async destroy(){await this.manager.destroy()}async duplicate(){this.widget?.duplicate()}async redo(){this.widget?.redo()}async triggerUpdate(e,t){this.widget?.update(e,t)}async undo(){this.widget?.undo()}_arcgisReadyHandler(){this.defaultGraphicsLayerDisabled||this.el.view?.map.add(this.widget.layer)}async _editConstructorProperties(e){return this.defaultGraphicsLayerDisabled||(e.layer??=new cr({title:"Sketch Layer"})),e}}qo("arcgis-sketch",Rc);const ii="RampDrawGraphicsLayer",Ic=Ko({__name:"draw",setup(i){const{t:e}=Yo(),t=m=>e(m?`draw.${m}`:"draw.unknown"),s=Jo("iApi"),n=Ji();let o=null;const r=Qo("sketchEl");let c=null,p=null,d=null,h=null,u=!1,y=null,_=[];const v=er([]);async function S(){(await s.fixture.isLoaded("keyboardnav")).register("D",{name:{en:"Draw Tools",fr:"Outils de dessin"},activeHandler:()=>{n.setActiveTool("")},deactiveHandler:()=>{n.setActiveTool(null)},keys:[{key:"P",description:{en:"Draw a point",fr:"Dessine un point"},handler:()=>{n.setActiveTool("point")}},{key:"L",description:{en:"Draw a line",fr:"Dessine une ligne"},handler:()=>{n.setActiveTool("polyline")}},{key:"G",description:{en:"Draw a polygon",fr:"Dessine un polygone"},handler:()=>{n.setActiveTool("polygon")}},{key:"C",description:{en:"Draw a circle",fr:"Dessine un cercle"},handler:()=>{n.setActiveTool("circle")}},{key:"R",description:{en:"Draw a rectangle",fr:"Dessine un rectangle"},handler:()=>{n.setActiveTool("rectangle")}},{key:"E",description:{en:"Edit geometry",fr:"Mode dition"},handler:()=>{n.setActiveTool("edit")}}]})}const z=m=>{if(h&&(p?.remove(h),h=null),!m)return;let b;switch(m.geometry?.type){case"point":case"multipoint":b=new rr({color:[255,255,0,.8],size:16,outline:{color:[255,165,0,1],width:3}});break;case"polyline":b=new us({color:[255,255,0,.8],width:6});break;default:b=new Zt({color:[255,255,0,.3],outline:{color:[255,165,0,1],width:3}})}h=new Xe({geometry:m.geometry,symbol:b}),p?.add(h)};hs(()=>n.selectedGraphicId,(m,b)=>{if(!(!o||!p)){if(!m)o.cancel(),z();else if(m!==b){const I=p.graphics.toArray().find(G=>G.attributes&&G.attributes.id===m);I&&(o.triggerUpdate([I]),z(I))}}});const A=async()=>{if(!p||!o||n.activeTool!=="edit")return;await s.geo.map.viewPromise;const m=s.geo.map.esriView,b={x:m.width/2,y:m.height/2},P={x:b.x,y:b.y,width:20,height:20},G=(await m.hitTest(P)).results.filter(U=>!("graphic"in U)||U.graphic.layer!==p?!1:!!U.graphic.attributes?.id);G.length>0?(d=G[0].graphic,o.triggerUpdate([d]),d.attributes?.id&&n.selectGraphic(d.attributes.id),s.updateAlert(e("draw.graphic.selected",{type:t(d.attributes?.type)}))):(o.cancel(),d=null,n.clearSelection())},Z=async()=>{if(!o||!n.activeTool)return;await s.geo.map.viewPromise;const m=s.geo.map.esriView,b={x:Math.floor(m.width/2),y:Math.floor(m.height/2)},P=m.toMap(b),I=m.extent,G=I.width,U=I.height,Re=Math.min(G,U)/10;let se;switch(n.activeTool){case"point":se=new Xe({geometry:new N({x:P.x,y:P.y,spatialReference:m.spatialReference}),symbol:o.pointSymbol});break;case"polyline":se=new Xe({geometry:new Pe({paths:[[[P.x-Re/2,P.y],[P.x+Re/2,P.y]]],spatialReference:m.spatialReference}),symbol:o.polylineSymbol});break;case"polygon":case"rectangle":const W=Re/2;se=new Xe({geometry:new ie({rings:[[[P.x-W,P.y-W],[P.x+W,P.y-W],[P.x+W,P.y+W],[P.x-W,P.y+W],[P.x-W,P.y-W]]],spatialReference:m.spatialReference}),symbol:o.polygonSymbol||new Zt({color:[0,255,0,.3],outline:{color:[0,255,0,1],width:1}})});break;case"circle":const L=Re/2,D=36,ct=[];for(let pt=0;pt<=D;pt++){const dt=pt/D*2*Math.PI,xt=P.x+L*Math.cos(dt),j=P.y+L*Math.sin(dt);ct.push([xt,j])}se=new Xe({geometry:new ie({rings:[ct],spatialReference:m.spatialReference}),symbol:o.polygonSymbol||new Zt({color:[255,0,255,.3],outline:{color:[255,0,255,1],width:1}})});break;default:console.warn("Unknown tool type:",n.activeTool);return}if(se){const W=`graphic-${Date.now()}`;se.attributes={id:W,type:n.activeTool},p?.add(se),n.addGraphic({id:W,type:n.activeTool,geometry:se.geometry,attributes:se.attributes}),n.activeTool!=="point"&&(n.clearSelection(),n.setActiveTool(null),o.cancel()),s.updateAlert(e("draw.graphic.created",{type:t(n.activeTool)}))}},ye=m=>{const b=s.geo.map.esriView?.container;if(!(!document.activeElement||!b?.contains(document.activeElement)))switch(m.key){case"Enter":if(m.preventDefault(),n.activeTool&&n.activeTool!=="edit")if((n.activeTool==="polyline"||n.activeTool==="polygon")&&(u||_.length===0)){const I=s.geo.map.esriView,G={x:Math.floor(I.width/2),y:Math.floor(I.height/2)},U=I.toMap(G);u?(_.push([U.x,U.y]),n.activeTool==="polyline"?y.geometry=new Pe({paths:[_],spatialReference:I.spatialReference}):y.geometry=new ie({rings:[_],spatialReference:I.spatialReference}),s.updateAlert(e("draw.multiPoint.pointAdded",{type:t(n.activeTool),count:_.length}))):(u=!0,_=[[U.x,U.y]],n.activeTool==="polyline"?y=new Xe({geometry:new Pe({paths:[_],spatialReference:I.spatialReference}),symbol:o?.polylineSymbol||new us({color:[0,0,255,1],width:2})}):y=new Xe({geometry:new ie({rings:[_],spatialReference:I.spatialReference}),symbol:o?.polygonSymbol||new Zt({color:[0,255,0,.3],outline:{color:[0,255,0,1],width:1}})}),y.attributes={id:`temp-graphic-${Date.now()}`,type:n.activeTool},p?.add(y),s.updateAlert(e("draw.multiPoint.started",{type:t(n.activeTool),count:1})))}else Z();else A();break;case"Delete":case"Backspace":const P=s.geo.map.esriView;u&&_.length>1?(m.preventDefault(),_.pop(),n.activeTool==="polyline"?y.geometry=new Pe({paths:[_],spatialReference:P.spatialReference}):y.geometry=new ie({rings:[_],spatialReference:P.spatialReference}),y.set("geometry",y?.geometry),s.updateAlert(e("draw.multiPoint.pointRemoved",{type:t(n.activeTool??void 0),count:_.length}))):u&&_.length===1?(m.preventDefault(),y&&p?.remove(y),y=null,_=[],u=!1,s.updateAlert(e("draw.multiPoint.canceled"))):d&&(m.preventDefault(),o?.delete(),p?.remove(d),typeof n.removeGraphic=="function"&&n.removeGraphic(d.attributes.id),d=null,z(void 0),s.updateAlert(e("draw.graphic.deleted")));break;case"Escape":n.setActiveTool(null),o?.cancel(),d=null,z(void 0),n.clearSelection(),s.updateAlert(e("draw.tool.canceled"));break}},Le=m=>{const b=s.geo.map.esriView.container;if(!document.activeElement||!b?.contains(document.activeElement)||!d||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(m.key))return;m.preventDefault(),m.stopPropagation();const I=10,G=m.shiftKey,U=m.altKey,Re=s.geo.map.esriView;let se=0,W=0;m.key==="ArrowLeft"&&(se=-I),m.key==="ArrowRight"&&(se=I),m.key==="ArrowUp"&&(W=-I),m.key==="ArrowDown"&&(W=I);const L=d.geometry;let D;if(L.type==="point")D={x:L.x,y:L.y};else{const Y=L.extent;D={x:(Y.xmin+Y.xmax)/2,y:(Y.ymin+Y.ymax)/2}}const ct=Re.toScreen(new N({x:D.x,y:D.y,spatialReference:Re.spatialReference}));ct.x+=se,ct.y+=W;const pt=Re.toMap(ct),dt=pt.x-D.x,xt=pt.y-D.y;let j;if(L.type==="point")!G&&!U?j=new N({x:L.x+dt,y:L.y+xt,spatialReference:L.spatialReference}):G?(j=L.clone(),s.updateAlert(e("draw.point.resize.unsupported"))):U&&(j=L.clone(),s.updateAlert(e("draw.point.rotate.unsupported")));else if(L.type==="polyline"){if(!G&&!U){const X=L.paths.map(ne=>ne.map(([oe,me])=>[oe+dt,me+xt]));j=new Pe({paths:X,spatialReference:L.spatialReference})}else if(G){const Y=L,X=m.key==="ArrowUp"||m.key==="ArrowRight"?1.05:.95,ne=Y.paths.map(oe=>oe.map(([me,je])=>[D.x+(me-D.x)*X,D.y+(je-D.y)*X]));j=new Pe({paths:ne,spatialReference:L.spatialReference})}else if(U){const Y=L,X=m.key==="ArrowLeft"?-.05:m.key==="ArrowRight"?.05:0;if(X!==0){const ne=Math.cos(X),oe=Math.sin(X),me=Y.paths.map(je=>je.map(([_i,vi])=>{const Et=_i-D.x,Mt=vi-D.y,fi=Et*ne-Mt*oe,wi=Et*oe+Mt*ne;return[D.x+fi,D.y+wi]}));j=new Pe({paths:me,spatialReference:L.spatialReference})}else j=L.clone()}}else if(L.type==="polygon"){if(!G&&!U){const X=L.rings.map(ne=>ne.map(([oe,me])=>[oe+dt,me+xt]));j=new ie({rings:X,spatialReference:L.spatialReference})}else if(G){const Y=L,X=m.key==="ArrowUp"||m.key==="ArrowRight"?1.05:.95,ne=Y.rings.map(oe=>oe.map(([me,je])=>[D.x+(me-D.x)*X,D.y+(je-D.y)*X]));j=new ie({rings:ne,spatialReference:L.spatialReference})}else if(U){const Y=L,X=m.key==="ArrowLeft"?-.05:m.key==="ArrowRight"?.05:0;if(X!==0){const ne=Math.cos(X),oe=Math.sin(X),me=Y.rings.map(je=>je.map(([_i,vi])=>{const Et=_i-D.x,Mt=vi-D.y,fi=Et*ne-Mt*oe,wi=Et*oe+Mt*ne;return[D.x+fi,D.y+wi]}));j=new ie({rings:me,spatialReference:L.spatialReference})}else j=L.clone()}}if(j){d.geometry=j,d.set("geometry",j),z(d),d.attributes?.id&&n.updateGraphicGeometry(d.attributes.id,j);const Y=G?"resized":U?"rotated":"moved";s.updateAlert(e(`draw.graphic.${Y}`))}},Ue=async m=>{const I=(await s.geo.map.esriView.hitTest(m)).results.find(G=>"graphic"in G&&G.graphic.layer===p&&!!G.graphic.attributes?.id);I&&n.activeTool==="edit"?o?.triggerUpdate([I.graphic]):(o?.cancel(),d=null,n.clearSelection(),z())},pe=async()=>{await s.geo.map.viewPromise,s.geo.layer.getLayer(ii)?p=s.geo.layer.getLayer(ii).esriLayer:(p=s.geo.layer.createLayer({id:ii,layerType:nr.GRAPHIC,cosmetic:!0,system:!0,url:""}),await s.geo.map.addLayer(p)),p?.esriLayer&&(p=p.esriLayer),Object.assign(r.value,{view:s.geo.map.esriView,layer:p,availableCreateTools:["point","multipoint","polyline","polygon","rectangle","circle"],updateOnGraphicClick:!0,visibleElements:{createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{enable:!0},settingsMenu:!1},defaultUpdateOptions:{highlightOptions:{enabled:!1}}}),s.geo.map.esriView.ui.add(r.value,"bottom-right"),r.value?.addEventListener("arcgisCreate",m=>We(m.detail)),r.value?.addEventListener("arcgisUpdate",m=>mi(m.detail)),c={remove:()=>r.value?.removeEventListener("arcgisCreate",m=>We(m.detail))},o=r.value,s.geo.map.esriView.on("click",Ue),document.addEventListener("keydown",ye),document.addEventListener("keydown",Le,{capture:!0})},ke=()=>{o&&(s.geo.map.esriView&&s.geo.map.esriView.ui.remove(o),c&&c.remove(),o.destroy()),document.removeEventListener("keydown",ye),document.removeEventListener("keydown",Le,{capture:!0}),u=!1,y=null,_=[],o=null,p=null},We=m=>{if(m.state==="complete"){const b=m.graphic,P=`graphic-${Date.now()}`;b.attributes=b.attributes||{},b.attributes.id=P,n.addGraphic({id:P,type:m.tool,geometry:b.geometry,attributes:b.attributes}),m.tool!=="point"&&n.setActiveTool(null)}},mi=m=>{const b=m.graphics[0];if(b)if(m.state==="start"){if(n.activeTool!=="edit"){o.cancel();return}d=b,b.attributes?.id&&(n.selectGraphic(b.attributes.id),s.updateAlert(e("draw.graphic.selected",{type:t(b.attributes?.type)})))}else m.state==="active"?z(b):m.state==="complete"&&b.attributes?.id&&(n.updateGraphicGeometry(b.attributes.id,b.geometry),s.updateAlert(e("draw.graphic.updated")))};return tr(()=>{S(),pe(),v.push(s.event.on(tn.MAP_DESTROYED,()=>{ke()}))}),hs(()=>n.activeTool,m=>{o.cancel(),z(),y=null,_=[],u=!1,m&&m!="edit"&&o.create(m)}),ir(()=>{ke(),v.forEach(m=>s.event.off(m))}),(m,b)=>(or(),sr("arcgis-sketch",{ref_key:"sketchEl",ref:r,style:{display:"none"}},null,512))}}),Us=[{type:"point"},{type:"polyline"},{type:"polygon"},{type:"circle"},{type:"rectangle"}];class Dc extends ar{store;constructor(e,t){super(e,t),this.store=Ji(this.$vApp.$pinia)}_parseConfig(e){if(!e){this.store.setSupportedTypes(Us);return}if(e.types!==void 0){const s=(e.types===null?[]:e.types).filter(n=>n.enabled!==!1);this.store.setSupportedTypes(s)}else this.store.setSupportedTypes(Us);e.defaultTool&&this.store.setActiveTool(e.defaultTool)}get graphicsLayerId(){return ii}}const Ac={en:{"draw.multiPoint.started":"{type} drawing started with 1 point","draw.multiPoint.pointAdded":"Point added {count} points total","draw.multiPoint.pointRemoved":"Point removed {count} points remaining","draw.multiPoint.canceled":"Drawing canceled","draw.multiPoint.completed":"{type} completed with {count} points","draw.multiPoint.notEnoughPoints":"Not enough points for {type} minimum {min} required","draw.graphic.created":"{type} created","draw.graphic.selected":"{type} selected","draw.graphic.deselected":"Graphic deselected","draw.graphic.deleted":"Graphic deleted","draw.graphic.updated":"Graphic updated","draw.graphic.none":"No graphic found","draw.tool.canceled":"Drawing tool canceled","draw.point.resize.unsupported":"Resizing not supported for point graphics","draw.point.rotate.unsupported":"Rotation not supported for point graphics","draw.move.up":"Moved up","draw.move.down":"Moved down","draw.move.left":"Moved left","draw.move.right":"Moved right","draw.resize.increase":"Increased size","draw.resize.decrease":"Decreased size","draw.rotate.clockwise":"Rotated clockwise","draw.rotate.counterclockwise":"Rotated counter-clockwise","draw.button.point":"Draw point","draw.button.polyline":"Draw line","draw.button.polygon":"Draw polygon","draw.button.rectangle":"Draw rectangle","draw.button.circle":"Draw circle","draw.point.tooltip":"Draw point","draw.polyline.tooltip":"Draw polyline","draw.polygon.tooltip":"Draw polygon","draw.circle.tooltip":"Draw circle","draw.rectangle.tooltip":"Draw rectangle","draw.edit.tooltip":"Edit Mode","draw.graphic.moved":"Graphic moved","draw.shape":"shape","draw.point":"point","draw.multipoint":"multipoint","draw.polyline":"polyline","draw.polygon":"polygon","draw.rectangle":"rectangle","draw.circle":"circle","draw.unknown":"unknown"},fr:{"draw.multiPoint.started":"Dessin de {type} commenc avec 1 point","draw.multiPoint.pointAdded":"Point ajout","draw.multiPoint.pointRemoved":"Point supprim","draw.multiPoint.canceled":"Dessin annul","draw.multiPoint.completed":"{type} termin avec {count} points","draw.multiPoint.notEnoughPoints":"Pas assez de points pour {type}","draw.graphic.created":"{type} cr","draw.graphic.selected":"{type} slectionn","draw.graphic.deselected":"Graphique dslectionn","draw.graphic.deleted":"Graphique supprim","draw.graphic.updated":"Graphique mis  jour","draw.graphic.none":"Aucun graphique trouv","draw.tool.canceled":"Outil de dessin annul","draw.point.resize.unsupported":"Le redimensionnement n'est pas pris en charge pour les points","draw.point.rotate.unsupported":"La rotation n'est pas prise en charge pour les points","draw.move.up":"Dplac vers le haut","draw.move.down":"Dplac vers le bas","draw.move.left":"Dplac vers la gauche","draw.move.right":"Dplac vers la droite","draw.resize.increase":"Taille augmente","draw.resize.decrease":"Taille rduite","draw.rotate.clockwise":"Rotation dans le sens horaire","draw.rotate.counterclockwise":"Rotation dans le sens antihoraire","draw.button.point":"Dessiner un point","draw.button.polyline":"Dessiner une ligne","draw.button.polygon":"Dessiner un polygone","draw.button.rectangle":"Dessiner un rectangle","draw.button.circle":"Dessiner un cercle","draw.point.tooltip":"Dessiner un point","draw.polyline.tooltip":"Dessiner une polyligne","draw.polygon.tooltip":"Dessiner un polygone","draw.circle.tooltip":"Dessiner un cercle","draw.rectangle.tooltip":"Dessiner un rectangle","draw.edit.tooltip":"Mode dition","draw.graphic.moved":"Graphique dplac","draw.shape":"forme","draw.point":"indiquer","draw.multipoint":"multipoint","draw.polyline":"polyligne","draw.polygon":"polygone","draw.rectangle":"rectangle","draw.circle":"cercle","draw.unknown":"inconnue"}};class Gc extends Dc{async init(){const{el:e}=this.mount(Ic,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(e.childNodes[0]),Object.entries(Ac).forEach(n=>this.$iApi.$i18n.mergeLocaleMessage(...n)),this._parseConfig(this.config),Ji(this.$vApp.$pinia).supportedTypes.forEach(n=>{const o=`${n.type}-icon`;this.$iApi.component(o,lr(Qn(Object.assign({"./icons/circle-icon.vue":()=>x(()=>import("./circle-icon-DpKi4ZEU.js"),__vite__mapDeps([181,1,2,3]),import.meta.url),"./icons/edit-icon.vue":()=>x(()=>import("./edit-icon-CoTV4Kir.js"),__vite__mapDeps([182,1,2,3]),import.meta.url),"./icons/point-icon.vue":()=>x(()=>import("./point-icon-Cl77g8D3.js"),__vite__mapDeps([183,1,2,3]),import.meta.url),"./icons/polygon-icon.vue":()=>x(()=>import("./polygon-icon-CyzjjNDq.js"),__vite__mapDeps([184,1,2,3]),import.meta.url),"./icons/polyline-icon.vue":()=>x(()=>import("./polyline-icon-DKH03SQo.js"),__vite__mapDeps([185,1,2,3]),import.meta.url),"./icons/rectangle-icon.vue":()=>x(()=>import("./rectangle-icon-D7ZICx70.js"),__vite__mapDeps([186,1,2,3]),import.meta.url)}),`./icons/${n.type}-icon.vue`,3)))})}async added(){this.$iApi.event.on(tn.MAP_CREATED,()=>{this.init()})}}const xd=Object.freeze(Object.defineProperty({__proto__:null,default:Gc},Symbol.toStringTag,{value:"Module"}));export{gl as A,Ip as B,Ha as C,Hp as D,Ni as E,id as F,Kp as G,Xp as H,zp as I,Gp as J,$l as K,ac as L,Fp as M,Bi as N,nl as O,Fa as P,ml as Q,vd as R,Ap as S,oc as T,Bp as U,bp as V,xd as W,Wp as Z,wn as a,Wn as b,rc as c,ei as d,Ui as e,_d as f,Ja as g,sl as h,ol as i,yi as j,rl as k,Gl as l,f as m,q as n,vt as o,Jp as p,Pi as q,Un as r,Dp as s,Is as t,te as u,lc as v,Zi as w,ge as x,Hi as y,hl as z};
