import{d as A,r as f,dO as w,hm as L,dP as _,dS as z,e2 as H,e5 as C,e7 as T,c$ as y,d$ as p,g9 as D,d0 as t,d_ as u,e9 as x,e0 as S,dY as E,d1 as b,F as N}from"./main-BpTXg8Ke.js";const U={en:{"keyboardnav.activeNamespace":"Namespace Active: {name}","keyboardnav.helpTitle":"Keyboard Shortcuts","keyboardnav.keysTitle":"Keys for {name}","keyboardnav.helpDescription":"To use keyboard shortcuts refer to the global list below or start by activating a feature group using the combo <span class='key indigo'>SHIFT + [letter]</span>. Once a group is active, its specific shortcuts will appear beneath it. Use <span class='key zinc'>[key]</span> to trigger individual actions within that group.","keyboardnav.noShortcuts":"No shortcuts available.","keyboardnav.mainShortcuts.title":"Global controls","keyboardnav.mainShortcuts.numbers":"Focus on an open panel (1 being leftmost)","keyboardnav.mainShortcuts.escape":"Close a focused panel"},fr:{"keyboardnav.activeNamespace":"Espace de noms actif : {name}","keyboardnav.helpTitle":"Raccourcis clavier","keyboardnav.keysTitle":"Raccourcis pour {name}","keyboardnav.helpDescription":"Pour utiliser les raccourcis clavier, consultez la liste globale ci-dessous ou commencez par activer un groupe de fonctionnalit\xE9s avec la combinaison <span class='key indigo'>SHIFT + [lettre]</span>. Une fois le groupe actif, ses raccourcis sp\xE9cifiques appara\xEEtront en dessous. Utilisez <span class='key zinc'>[touche]</span> pour d\xE9clencher les actions individuelles de ce groupe.","keyboardnav.noShortcuts":"Aucun raccourci disponible.","keyboardnav.mainShortcuts.title":"Contr\xF4les globaux","keyboardnav.mainShortcuts.numbers":"Concentrer sur un panneau ouvert (1 \xE9tant le plus \xE0 gauche)","keyboardnav.mainShortcuts.escape":"Fermer un panneau en focus"}},$=A("keyboardnav",()=>{const d=f(null),e=f({}),s=f(!1),i=["H","?"];function o(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(const a of n)if(!e.value[a]&&!i.includes(a))return a;return null}function l(n,a){let r=n.toUpperCase();if(i.includes(r)||e.value[r]){const c=o();c?r=c:console.error("No available keyboard namespace letters")}if(!a.handler)for(const c of a.keys)c.handler||console.error(`Keyboardnav registration for ${r} requires handlers for all keys or a parent handler`);return e.value[r]=a,r}function v(n){s.value!==n&&(s.value=n)}function h(n){d.value===n&&(d.value=null),delete e.value[n]}function m(n,a){d.value=n,e.value[n]?.activeHandler?.(a)}function g(n){d.value&&e.value[d.value]?.deactiveHandler?.(n),d.value=null}function k(n,a){const r=d.value;if(!r)return;const c=e.value[r];c&&(c.handler?c.handler(n,a):c.keys.find(K=>K.key===n)?.handler?.(a))}return{activeNamespace:d,namespaces:e,helpVisible:s,register:l,unregister:h,activate:m,deactivate:g,trigger:k,setHelpVisible:v}}),I={class:"relative w-[640px] max-h-[80vh] overflow-y-auto rounded-xl bg-white py-8 px-10 shadow-xl",role:"dialog","aria-modal":"true","aria-live":"polite"},V={class:"border-b border-gray-200 bg-white px-4 py-20 sm:px-24"},F={class:"text-base font-semibold text-gray-900"},M=["innerHTML"],O={role:"list",class:"m-0 max-w-[calc(var(--container-lg)-(--spacing(8)))] list-none divide-y divide-zinc-900/5 p-0 dark:divide-white/5"},j={class:"pl-24 mb-8 py-16"},B={class:"flex items-center gap-x-12"},R={class:"font-mono text-md text-zinc-600"},q={class:"space-y-4 p-16 pl-24"},P={class:"flex items-center gap-x-12"},G={class:"font-mono text-md text-zinc-600"},Y={class:"flex items-center gap-x-12"},J={class:"font-mono text-md text-zinc-600"},Q={key:0,class:"pl-24 mb-8 py-16 border-b"},W={class:"font-mono text-md text-zinc-600"},X={class:"flex items-center gap-x-12"},Z={class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-indigo-300 bg-indigo-400/10 text-indigo-500 dark:ring-indigo-400/30 dark:bg-indigo-400/10 dark:text-indigo-400"},ee={class:"font-mono text-md text-zinc-600"},ae={key:0,class:"space-y-4 p-16 pl-24"},te={class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-zinc-300 bg-zinc-400/10 text-zinc-500 dark:ring-zinc-400/30 dark:bg-zinc-400/10 dark:text-zinc-400"},ne={class:"font-mono text-md text-zinc-600"},se=w({__name:"keyboardnav",setup(d){const e=$(),{activeNamespace:s,namespaces:i,helpVisible:o}=L(e),{t:l}=_(),v=z(()=>Object.keys(i.value)),h=z(()=>{const n=s.value;return n?i.value[n]?.keys||[]:[]}),m=H("overlayRef");function g(){e.setHelpVisible(!1)}function k(n){const a=n.target;m.value&&a&&!m.value.contains(a)&&g()}return C(o,n=>{n?document.addEventListener("focusin",k):document.removeEventListener("focusin",k)}),T(()=>{document.removeEventListener("focusin",k)}),(n,a)=>(b(),y("div",null,[p(o)?(b(),y("div",{key:0,ref_key:"overlayRef",ref:m,onClick:D(g,["self"]),class:"absolute inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 transition-opacity",tabindex:"-1"},[t("div",I,[t("button",{class:"absolute right-8 top-8 rounded px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:g},u(p(l)("panels.controls.close")),1),t("div",V,[t("h3",F,u(p(l)("keyboardnav.helpTitle")),1),t("div",{innerHTML:p(l)("keyboardnav.helpDescription"),class:"mt-6 text-sm text-gray-500"},null,8,M)]),t("ul",O,[t("li",j,[t("div",B,[t("span",R,u(p(l)("keyboardnav.mainShortcuts.title")),1)]),t("div",q,[t("div",P,[a[0]||(a[0]=t("span",{class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-zinc-300 bg-zinc-400/10 text-zinc-500 dark:ring-zinc-400/30 dark:bg-zinc-400/10 dark:text-zinc-400"}," 1-5 ",-1)),a[1]||(a[1]=t("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),t("span",G,u(p(l)("keyboardnav.mainShortcuts.numbers")),1)]),t("div",Y,[a[2]||(a[2]=t("span",{class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-zinc-300 bg-zinc-400/10 text-zinc-500 dark:ring-zinc-400/30 dark:bg-zinc-400/10 dark:text-zinc-400"}," ESC ",-1)),a[3]||(a[3]=t("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),t("span",J,u(p(l)("keyboardnav.mainShortcuts.escape")),1)])])]),v.value.length===0?(b(),y("li",Q,[t("p",W,u(p(l)("keyboardnav.noShortcuts")),1)])):x("",!0),(b(!0),y(S,null,E(v.value,r=>(b(),y("li",{key:r,class:"pl-24 mb-8 py-16 border-b"},[t("div",X,[t("span",Z," SHIFT + "+u(r),1),a[4]||(a[4]=t("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),t("span",ee,u(p(l)(`keyboardnav.ns.${r}`)),1)]),p(s)===r?(b(),y("div",ae,[(b(!0),y(S,null,E(h.value,c=>(b(),y("div",{key:c.key,class:"flex items-center gap-x-12"},[t("span",te,u(c.key),1),a[5]||(a[5]=t("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),t("span",ne,u(p(l)(`keyboardnav.key.${r}.${c.key}`)),1)]))),128))])):x("",!0)]))),128))])])],512)):x("",!0)]))}});class ie extends N{keyboardnavStore=$(this.$vApp.$pinia);_isInput(e){return!e||!(e instanceof HTMLElement)?!1:!!e.closest('input, textarea, [contenteditable="true"]')}register(e,s){const i=e.toUpperCase(),o=this.keyboardnavStore.register(i,s),l=`keyboardnav.ns.${o}`;return Object.entries(s.name).forEach(([v,h])=>{this.$iApi.$i18n.mergeLocaleMessage(v,{[l]:h})}),s.keys.forEach(v=>{const h=`keyboardnav.key.${o}.${v.key}`;Object.entries(v.description).forEach(([m,g])=>{this.$iApi.$i18n.mergeLocaleMessage(m,{[h]:g})})}),o}added(){this.$iApi.$rootEl?.addEventListener("keydown",e=>this._handleKeyDown(e)),this.$iApi.$rootEl?.addEventListener("keyup",e=>this._handleKeyUp(e)),this.$iApi.$rootEl?.addEventListener("blur",this._handleBlur)}removed(){this.$iApi.$rootEl?.removeEventListener("keydown",e=>this._handleKeyDown(e)),this.$iApi.$rootEl?.removeEventListener("keyup",e=>this._handleKeyUp(e)),this.$iApi.$rootEl?.removeEventListener("blur",this._handleBlur)}_handleKeyDown=e=>{if(this._isInput(e.target))return;if(!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey){if(/^[1-5]$/.test(e.key)){const i=parseInt(e.key)-1,o=this.$iApi.panel.visible[i];o&&(e.preventDefault(),this.$iApi.panel.focus(o));return}else if(e.key==="Escape"){const i=e.target.closest("[data-cy]");if(i&&this.$iApi.$rootEl?.querySelector(".panel-container")?.contains(i)){e.preventDefault();const o=i.getAttribute("data-cy");o&&this.$iApi.panel.close(o)}return}}const s=e.key.toUpperCase();e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey?s in this.keyboardnavStore.namespaces&&(e.preventDefault(),this.keyboardnavStore.activeNamespace===s?this.keyboardnavStore.deactivate(e):this.keyboardnavStore.activate(s,e)):!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&s.length===1&&this.keyboardnavStore.activeNamespace&&(e.preventDefault(),this.keyboardnavStore.trigger(s,e))};_handleKeyUp=e=>{this._isInput(e.target)||(e.key.toUpperCase()==="H"||e.key==="?")&&e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&(e.preventDefault(),this.keyboardnavStore.setHelpVisible(!this.keyboardnavStore.helpVisible))};_handleBlur=e=>{this.keyboardnavStore.deactivate(e),this.keyboardnavStore.setHelpVisible(!1)}}class re extends ie{added(){Object.entries(U).forEach(i=>this.$iApi.$i18n.mergeLocaleMessage(...i));const{destroy:e,el:s}=this.mount(se,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(s.childNodes[0]),super.added(),this.removed=()=>{super.removed(),e(),$(this.$vApp.$pinia).$reset()}}}export{re as default};
