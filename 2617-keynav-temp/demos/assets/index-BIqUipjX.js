import{a1 as w,a2 as g,dO as z,hp as A,dP as L,dS as $,d2 as v,d$ as f,d3 as s,d_ as m,e9 as _,e0 as K,dY as S,d4 as y,F as H}from"./main-CYsUJ0p-.js";import"./preload-helper-ExcqyqRp.js";const N={en:{"keyboardnav.activeNamespace":"Namespace Active: {name}","keyboardnav.helpTitle":"Keyboard Shortcuts","keyboardnav.keysTitle":"Keys for {name}","keyboardnav.helpDescription":"To use keyboard shortcuts, start by activating a feature group using the combo <span class='key indigo'>SHIFT + [letter]</span>. Once a group is active, its specific shortcuts will appear beneath it. Use <span class='key zinc'>[key]</span> to trigger individual actions within that group.","keyboardnav.noShortcuts":"No shortcuts available."},fr:{"keyboardnav.activeNamespace":"Espace de noms actif : {name}","keyboardnav.helpTitle":"Raccourcis clavier","keyboardnav.keysTitle":"Raccourcis pour {name}","keyboardnav.helpDescription":"Pour utiliser les raccourcis clavier","keyboardnav.noShortcuts":"Aucun raccourci disponible."}},x=w("keyboardnav",()=>{const i=g(null),e=g({}),a=g(!1),u=["H","?"];function r(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(const n of t)if(!e.value[n]&&!u.includes(n))return n;return null}function o(t,n){let c=t.toUpperCase();if(u.includes(c)||e.value[c]){const d=r();d?c=d:console.error("No available keyboard namespace letters")}if(!n.handler)for(const d of n.keys)d.handler||console.error(`Keyboardnav registration for ${c} requires handlers for all keys or a parent handler`);return e.value[c]=n,c}function l(t){a.value!==t&&(a.value=t)}function h(t){i.value===t&&(i.value=null),delete e.value[t]}function b(t,n){i.value=t,e.value[t]?.activeHandler?.(n)}function p(t){i.value&&e.value[i.value]?.deactiveHandler?.(t),i.value=null}function k(t,n){const c=i.value;if(!c)return;const d=e.value[c];d&&(d.handler?d.handler(t,n):d.keys.find(E=>E.key===t)?.handler?.(n))}return{activeNamespace:i,namespaces:e,helpVisible:a,register:o,unregister:h,activate:b,deactivate:p,trigger:k,setHelpVisible:l}}),D={key:0,class:"absolute inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 transition-opacity"},T={class:"w-[640px] max-h-[80vh] overflow-y-auto rounded-xl bg-white py-8 px-10 shadow-xl",role:"dialog","aria-modal":"true","aria-live":"polite"},V={class:"border-b border-gray-200 bg-white px-4 py-20 sm:px-24"},C={class:"text-base font-semibold text-gray-900"},U=["innerHTML"],B={role:"list",class:"m-0 max-w-[calc(var(--container-lg)-(--spacing(8)))] list-none divide-y divide-zinc-900/5 p-0 dark:divide-white/5"},F={key:0,class:"pl-24 mb-8 py-16 border-b"},O={class:"font-mono text-md text-zinc-600"},I={class:"flex items-center gap-x-12"},M={class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-indigo-300 bg-indigo-400/10 text-indigo-500 dark:ring-indigo-400/30 dark:bg-indigo-400/10 dark:text-indigo-400"},R={class:"font-mono text-md text-zinc-600"},j={key:0,class:"space-y-4 p-16 pl-24"},P={class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-zinc-300 bg-zinc-400/10 text-zinc-500 dark:ring-zinc-400/30 dark:bg-zinc-400/10 dark:text-zinc-400"},Y={class:"font-mono text-md text-zinc-600"},q=z({__name:"keyboardnav",setup(i){const e=x(),{activeNamespace:a,namespaces:u,helpVisible:r}=A(e),{t:o}=L(),l=$(()=>Object.keys(u.value)),h=$(()=>{const b=a.value;return b?u.value[b]?.keys||[]:[]});return(b,p)=>(y(),v("div",null,[f(r)?(y(),v("div",D,[s("div",T,[s("div",V,[s("h3",C,m(f(o)("keyboardnav.helpTitle")),1),s("div",{innerHTML:f(o)("keyboardnav.helpDescription"),class:"mt-6 text-sm text-gray-500"},null,8,U)]),s("ul",B,[l.value.length===0?(y(),v("li",F,[s("p",O,m(f(o)("keyboardnav.noShortcuts")),1)])):_("",!0),(y(!0),v(K,null,S(l.value,k=>(y(),v("li",{key:k,class:"pl-24 mb-8 py-16 border-b"},[s("div",I,[s("span",M," SHIFT + "+m(k),1),p[0]||(p[0]=s("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),s("span",R,m(f(o)(`keyboardnav.ns.${k}`)),1)]),f(a)===k?(y(),v("div",j,[(y(!0),v(K,null,S(h.value,t=>(y(),v("div",{key:t.key,class:"flex items-center gap-x-12"},[s("span",P,m(t.key),1),p[1]||(p[1]=s("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),s("span",Y,m(f(o)(`keyboardnav.key.${k}.${t.key}`)),1)]))),128))])):_("",!0)]))),128))])])])):_("",!0)]))}});class G extends H{keyboardnavStore=x(this.$vApp.$pinia);register(e,a){const u=e.toUpperCase(),r=this.keyboardnavStore.register(u,a),o=`keyboardnav.ns.${r}`;return Object.entries(a.name).forEach(([l,h])=>{this.$iApi.$i18n.mergeLocaleMessage(l,{[o]:h})}),a.keys.forEach(l=>{const h=`keyboardnav.key.${r}.${l.key}`;Object.entries(l.description).forEach(([b,p])=>{this.$iApi.$i18n.mergeLocaleMessage(b,{[h]:p})})}),r}added(){this.$iApi.$rootEl?.addEventListener("keydown",e=>this._handleKeyDown(e)),this.$iApi.$rootEl?.addEventListener("keyup",e=>this._handleKeyUp(e)),this.$iApi.$rootEl?.addEventListener("blur",this._handleBlur)}removed(){this.$iApi.$rootEl?.removeEventListener("keydown",e=>this._handleKeyDown(e)),this.$iApi.$rootEl?.removeEventListener("keyup",e=>this._handleKeyUp(e)),this.$iApi.$rootEl?.removeEventListener("blur",this._handleBlur)}_handleKeyDown=e=>{const a=e.key.toUpperCase();e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey?a==="H"||e.key==="?"?(e.preventDefault(),this.keyboardnavStore.setHelpVisible(!0)):a in this.keyboardnavStore.namespaces&&(e.preventDefault(),this.keyboardnavStore.activate(a,e)):!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&a.length===1&&this.keyboardnavStore.activeNamespace&&(e.preventDefault(),this.keyboardnavStore.trigger(a,e))};_handleKeyUp=e=>{const a=e.key.toUpperCase();(!e.shiftKey||a==="H"||e.key==="?")&&this.keyboardnavStore.setHelpVisible(!1)};_handleBlur=e=>{this.keyboardnavStore.deactivate(e),this.keyboardnavStore.setHelpVisible(!1)}}class X extends G{added(){Object.entries(N).forEach(r=>this.$iApi.$i18n.mergeLocaleMessage(...r));const{destroy:e,el:a}=this.mount(q,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(a.childNodes[0]),super.added(),this.removed=()=>{super.removed(),e(),x(this.$vApp.$pinia).$reset()}}}export{X as default};
