import{d as z,r as f,dO as A,hm as H,dP as L,dS as K,c$ as v,d$ as g,d0 as n,d_ as m,e9 as x,e0 as E,dY as S,d1 as u,F as _}from"./main-CZ1ZHN9A.js";const N={en:{"keyboardnav.activeNamespace":"Namespace Active: {name}","keyboardnav.helpTitle":"Keyboard Shortcuts","keyboardnav.keysTitle":"Keys for {name}","keyboardnav.helpDescription":"To use keyboard shortcuts, start by activating a feature group using the combo <span class='key indigo'>SHIFT + [letter]</span>. Once a group is active, its specific shortcuts will appear beneath it. Use <span class='key zinc'>[key]</span> to trigger individual actions within that group.","keyboardnav.noShortcuts":"No shortcuts available."},fr:{"keyboardnav.activeNamespace":"Espace de noms actif : {name}","keyboardnav.helpTitle":"Raccourcis clavier","keyboardnav.keysTitle":"Raccourcis pour {name}","keyboardnav.helpDescription":"Pour utiliser les raccourcis clavier","keyboardnav.noShortcuts":"Aucun raccourci disponible."}},$=z("keyboardnav",()=>{const i=f(null),e=f({}),t=f(!1),r=["H","?"];function y(){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(const s of a)if(!e.value[s]&&!r.includes(s))return s;return null}function o(a,s){let d=a.toUpperCase();if(r.includes(d)||e.value[d]){const c=y();c?d=c:console.error("No available keyboard namespace letters")}if(!s.handler)for(const c of s.keys)c.handler||console.error(`Keyboardnav registration for ${d} requires handlers for all keys or a parent handler`);return e.value[d]=s,d}function l(a){t.value!==a&&(t.value=a)}function h(a){i.value===a&&(i.value=null),delete e.value[a]}function b(a,s){i.value=a,e.value[a]?.activeHandler?.(s)}function p(a){i.value&&e.value[i.value]?.deactiveHandler?.(a),i.value=null}function k(a,s){const d=i.value;if(!d)return;const c=e.value[d];c&&(c.handler?c.handler(a,s):c.keys.find(w=>w.key===a)?.handler?.(s))}return{activeNamespace:i,namespaces:e,helpVisible:t,register:o,unregister:h,activate:b,deactivate:p,trigger:k,setHelpVisible:l}}),T={key:0,class:"absolute inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 transition-opacity"},D={class:"w-[640px] max-h-[80vh] overflow-y-auto rounded-xl bg-white py-8 px-10 shadow-xl",role:"dialog","aria-modal":"true","aria-live":"polite"},U={class:"border-b border-gray-200 bg-white px-4 py-20 sm:px-24"},C={class:"text-base font-semibold text-gray-900"},O=["innerHTML"],V={role:"list",class:"m-0 max-w-[calc(var(--container-lg)-(--spacing(8)))] list-none divide-y divide-zinc-900/5 p-0 dark:divide-white/5"},M={key:0,class:"pl-24 mb-8 py-16 border-b"},j={class:"font-mono text-md text-zinc-600"},B={class:"flex items-center gap-x-12"},F={class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-indigo-300 bg-indigo-400/10 text-indigo-500 dark:ring-indigo-400/30 dark:bg-indigo-400/10 dark:text-indigo-400"},I={class:"font-mono text-md text-zinc-600"},P={key:0,class:"space-y-4 p-16 pl-24"},R={class:"font-mono px-6 text-[0.825rem]/6 font-semibold rounded-lg px-1.5 ring-1 ring-inset ring-zinc-300 bg-zinc-400/10 text-zinc-500 dark:ring-zinc-400/30 dark:bg-zinc-400/10 dark:text-zinc-400"},Y={class:"font-mono text-md text-zinc-600"},q=A({__name:"keyboardnav",setup(i){const e=$(),{activeNamespace:t,namespaces:r,helpVisible:y}=H(e),{t:o}=L(),l=K(()=>Object.keys(r.value)),h=K(()=>{const b=t.value;return b?r.value[b]?.keys||[]:[]});return(b,p)=>(u(),v("div",null,[g(y)?(u(),v("div",T,[n("div",D,[n("div",U,[n("h3",C,m(g(o)("keyboardnav.helpTitle")),1),n("div",{innerHTML:g(o)("keyboardnav.helpDescription"),class:"mt-6 text-sm text-gray-500"},null,8,O)]),n("ul",V,[l.value.length===0?(u(),v("li",M,[n("p",j,m(g(o)("keyboardnav.noShortcuts")),1)])):x("",!0),(u(!0),v(E,null,S(l.value,k=>(u(),v("li",{key:k,class:"pl-24 mb-8 py-16 border-b"},[n("div",B,[n("span",F," SHIFT + "+m(k),1),p[0]||(p[0]=n("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),n("span",I,m(g(o)(`keyboardnav.ns.${k}`)),1)]),g(t)===k?(u(),v("div",P,[(u(!0),v(E,null,S(h.value,a=>(u(),v("div",{key:a.key,class:"flex items-center gap-x-12"},[n("span",R,m(a.key),1),p[1]||(p[1]=n("span",{class:"h-2 w-2 rounded-full bg-zinc-300 dark:bg-zinc-600"},null,-1)),n("span",Y,m(g(o)(`keyboardnav.key.${k}.${a.key}`)),1)]))),128))])):x("",!0)]))),128))])])])):x("",!0)]))}});class G extends _{keyboardnavStore=$(this.$vApp.$pinia);register(e,t){const r=e.toUpperCase(),y=this.keyboardnavStore.register(r,t),o=`keyboardnav.ns.${y}`;return Object.entries(t.name).forEach(([l,h])=>{this.$iApi.$i18n.mergeLocaleMessage(l,{[o]:h})}),t.keys.forEach(l=>{const h=`keyboardnav.key.${y}.${l.key}`;Object.entries(l.description).forEach(([b,p])=>{this.$iApi.$i18n.mergeLocaleMessage(b,{[h]:p})})}),y}added(){this.$iApi.$rootEl?.addEventListener("keydown",e=>this._handleKeyDown(e)),this.$iApi.$rootEl?.addEventListener("keyup",e=>this._handleKeyUp(e)),this.$iApi.$rootEl?.addEventListener("blur",this._handleBlur)}removed(){this.$iApi.$rootEl?.removeEventListener("keydown",e=>this._handleKeyDown(e)),this.$iApi.$rootEl?.removeEventListener("keyup",e=>this._handleKeyUp(e)),this.$iApi.$rootEl?.removeEventListener("blur",this._handleBlur)}_handleKeyDown=e=>{const t=e.key.toUpperCase();e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey?t==="H"||e.key==="?"?(e.preventDefault(),this.keyboardnavStore.setHelpVisible(!0)):t in this.keyboardnavStore.namespaces&&(e.preventDefault(),this.keyboardnavStore.activate(t,e)):!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&t.length===1&&this.keyboardnavStore.activeNamespace&&(e.preventDefault(),this.keyboardnavStore.trigger(t,e))};_handleKeyUp=e=>{const t=e.key.toUpperCase();(!e.shiftKey||t==="H"||e.key==="?")&&this.keyboardnavStore.setHelpVisible(!1)};_handleBlur=e=>{this.keyboardnavStore.deactivate(e),this.keyboardnavStore.setHelpVisible(!1)}}class W extends G{added(){Object.entries(N).forEach(r=>this.$iApi.$i18n.mergeLocaleMessage(...r));const{destroy:e,el:t}=this.mount(q,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(t.childNodes[0]),super.added(),this.removed=()=>{super.removed(),e(),$(this.$vApp.$pinia).$reset()}}}export{W as default};
